<!DOCTYPE html>
<html >

<head>

  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>Programirajmo u R-u</title>
  <meta name="description" content="Udzbenik za vještinu ‘Osnove programskog jezika R’ na Fakultetu elektrotehnike i racunarstva, Sveuciliste u Zagrebu.">
  <meta name="generator" content="bookdown 0.7 and GitBook 2.6.7">

  <meta property="og:title" content="Programirajmo u R-u" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="Udzbenik za vještinu ‘Osnove programskog jezika R’ na Fakultetu elektrotehnike i racunarstva, Sveuciliste u Zagrebu." />
  <meta name="github-repo" content="rstudio/bookdown-demo" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Programirajmo u R-u" />
  
  <meta name="twitter:description" content="Udzbenik za vještinu ‘Osnove programskog jezika R’ na Fakultetu elektrotehnike i racunarstva, Sveuciliste u Zagrebu." />
  

<meta name="author" content="Damir Pintar">


<meta name="date" content="2018-11-06">

  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  
  
<link rel="prev" href="paketi.html">
<link rel="next" href="apply.html">
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />








<style type="text/css">
.showopt {
  background-color: #004c93;
  color: #FFFFFF; 
  width: 140px;
  height: 4	0px;
  text-align: center;
  vertical-align: middle !important;
  float: right;
  font-family: sans-serif;
  font-size:10 pt;
  border-radius: 8px;
}

.showopt:hover {
    background-color: #dfe4f2;
    color: #004c93;
}

pre.plot {
  background-color: white !important;
}
</style>

<script>
 $(document).ready(function() {

  $chunks = $('.fold');

  $chunks.each(function () {

    // add button to source code chunks
    if ( $(this).hasClass('s') ) {
      $('pre.r', this).prepend("<div class=\"showopt\">Prikaži rješenje</div><br style=\"line-height:22px;\"/>");
      $('pre.r', this).children('code').attr('class', 'folded');
    }

    // add button to output chunks
    if ( $(this).hasClass('o') ) {
      $('pre:not(.r)', this).has('code').prepend("<div class=\"showopt\">Prikaži ispis</div><br style=\"line-height:22px;\"/>");
      $('pre:not(.r)', this).children('code:not(r)').addClass('folded');

      // add button to plots
      $(this).find('img').wrap('<pre class=\"plot\"></pre>');
      $('pre.plot', this).prepend("<div class=\"showopt\">Prikaži sliku</div><br style=\"line-height:22px;\"/>");
      $('pre.plot', this).children('img').addClass('folded');

    }
  });

  // hide all chunks when document is loaded
  $('.folded').css('display', 'none')

  // function to toggle the visibility
  $('.showopt').click(function() {
    var label = $(this).html();
    if (label.indexOf("Prikaži") >= 0) {
      $(this).html(label.replace("Prikaži", "Sakrij"));
    } else {
      $(this).html(label.replace("Sakrij", "Prikaži"));
    }
    $(this).siblings('code, img').slideToggle('fast', 'swing');
  });
});
</script>


<style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; left: -4em; }
pre.numberSource a.sourceLine::before
  { content: attr(data-line-number);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>(Udžbenik za vještinu “Osnove programskog jezika R”)</a><ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#predgovor"><i class="fa fa-check"></i>Predgovor</a></li>
</ul></li>
<li class="part"><span><b>I Osnovni elementi jezika R</b></span></li>
<li class="chapter" data-level="1" data-path="uvod.html"><a href="uvod.html"><i class="fa fa-check"></i><b>1</b> Uvod</a><ul>
<li class="chapter" data-level="1.1" data-path="uvod.html"><a href="uvod.html#sto-je-programski-jezik-r"><i class="fa fa-check"></i><b>1.1</b> Što je programski jezik R?</a><ul>
<li class="chapter" data-level="1.1.1" data-path="uvod.html"><a href="uvod.html#opcenito-o-r-u"><i class="fa fa-check"></i><b>1.1.1</b> Općenito o R-u</a></li>
<li class="chapter" data-level="1.1.2" data-path="uvod.html"><a href="uvod.html#alternative-jeziku-r"><i class="fa fa-check"></i><b>1.1.2</b> Alternative jeziku R</a></li>
</ul></li>
<li class="chapter" data-level="1.2" data-path="uvod.html"><a href="uvod.html#instalacija-programske-podrske"><i class="fa fa-check"></i><b>1.2</b> Instalacija programske podrške</a></li>
<li class="chapter" data-level="1.3" data-path="uvod.html"><a href="uvod.html#pregled-razvojnog-sucelja-rstudio"><i class="fa fa-check"></i><b>1.3</b> Pregled razvojnog sučelja <em>RStudio</em></a><ul>
<li class="chapter" data-level="1.3.1" data-path="uvod.html"><a href="uvod.html#interaktivna-konzola"><i class="fa fa-check"></i><b>1.3.1</b> Interaktivna konzola</a></li>
<li class="chapter" data-level="1.3.2" data-path="uvod.html"><a href="uvod.html#pisanje-r-skripti"><i class="fa fa-check"></i><b>1.3.2</b> Pisanje R skripti</a></li>
<li class="chapter" data-level="1.3.3" data-path="uvod.html"><a href="uvod.html#r-markdown"><i class="fa fa-check"></i><b>1.3.3</b> <em>R Markdown</em></a></li>
</ul></li>
<li class="chapter" data-level="1.4" data-path="uvod.html"><a href="uvod.html#kako-koristiti-ovaj-udzbenik"><i class="fa fa-check"></i><b>1.4</b> Kako koristiti ovaj udžbenik?</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="tipovi.html"><a href="tipovi.html"><i class="fa fa-check"></i><b>2</b> Osnovni tipovi podataka i operatori</a><ul>
<li class="chapter" data-level="2.1" data-path="tipovi.html"><a href="tipovi.html#osnovni-tipovi-podataka"><i class="fa fa-check"></i><b>2.1</b> Osnovni tipovi podataka</a></li>
<li class="chapter" data-level="2.2" data-path="tipovi.html"><a href="tipovi.html#operatori"><i class="fa fa-check"></i><b>2.2</b> Operatori</a></li>
<li class="chapter" data-level="2.3" data-path="tipovi.html"><a href="tipovi.html#nedostajuce-nepoznate-i-nemoguce-vrijednosti"><i class="fa fa-check"></i><b>2.3</b> Nedostajuće, nepoznate i nemoguće vrijednosti</a></li>
<li class="chapter" data-level="" data-path="tipovi.html"><a href="tipovi.html#zadaci-za-vjezbu"><i class="fa fa-check"></i>Zadaci za vježbu</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="vektori.html"><a href="vektori.html"><i class="fa fa-check"></i><b>3</b> Vektori, matrice i liste</a><ul>
<li class="chapter" data-level="3.1" data-path="vektori.html"><a href="vektori.html#vektori-1"><i class="fa fa-check"></i><b>3.1</b> Vektori</a><ul>
<li class="chapter" data-level="3.1.1" data-path="vektori.html"><a href="vektori.html#stvaranje-vektora"><i class="fa fa-check"></i><b>3.1.1</b> Stvaranje vektora</a></li>
<li class="chapter" data-level="3.1.2" data-path="vektori.html"><a href="vektori.html#operator"><i class="fa fa-check"></i><b>3.1.2</b> Operator <code>[</code></a></li>
<li class="chapter" data-level="3.1.3" data-path="vektori.html"><a href="vektori.html#principi-vektorizacije-i-recikliranja"><i class="fa fa-check"></i><b>3.1.3</b> Principi vektorizacije i recikliranja</a></li>
</ul></li>
<li class="chapter" data-level="3.2" data-path="vektori.html"><a href="vektori.html#indeksni-vektori"><i class="fa fa-check"></i><b>3.2</b> Indeksni vektori</a><ul>
<li class="chapter" data-level="3.2.1" data-path="vektori.html"><a href="vektori.html#lokacijsko-referenciranje"><i class="fa fa-check"></i><b>3.2.1</b> Lokacijsko referenciranje</a></li>
<li class="chapter" data-level="3.2.2" data-path="vektori.html"><a href="vektori.html#uvjetno-referenciranje"><i class="fa fa-check"></i><b>3.2.2</b> Uvjetno referenciranje</a></li>
<li class="chapter" data-level="3.2.3" data-path="vektori.html"><a href="vektori.html#imensko-referenciranje"><i class="fa fa-check"></i><b>3.2.3</b> Imensko referenciranje</a></li>
</ul></li>
<li class="chapter" data-level="3.3" data-path="vektori.html"><a href="vektori.html#matrice-i-polja"><i class="fa fa-check"></i><b>3.3</b> Matrice i polja</a><ul>
<li class="chapter" data-level="3.3.1" data-path="vektori.html"><a href="vektori.html#rezanje-matrica"><i class="fa fa-check"></i><b>3.3.1</b> Rezanje matrica</a></li>
</ul></li>
<li class="chapter" data-level="3.4" data-path="vektori.html"><a href="vektori.html#liste"><i class="fa fa-check"></i><b>3.4</b> Liste</a></li>
<li class="chapter" data-level="" data-path="vektori.html"><a href="vektori.html#zadaci-za-vjezbu-1"><i class="fa fa-check"></i>Zadaci za vježbu</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="okviri.html"><a href="okviri.html"><i class="fa fa-check"></i><b>4</b> Podatkovni okviri i faktori</a><ul>
<li class="chapter" data-level="4.1" data-path="okviri.html"><a href="okviri.html#podatkovni-okviri"><i class="fa fa-check"></i><b>4.1</b> Podatkovni okviri</a></li>
<li class="chapter" data-level="4.2" data-path="okviri.html"><a href="okviri.html#odabir-redaka-i-stupaca-podatkovnih-okvira"><i class="fa fa-check"></i><b>4.2</b> Odabir redaka i stupaca podatkovnih okvira</a></li>
<li class="chapter" data-level="4.3" data-path="okviri.html"><a href="okviri.html#dodavanje-i-brisanje-redaka-i-stupaca"><i class="fa fa-check"></i><b>4.3</b> Dodavanje i brisanje redaka i stupaca</a></li>
<li class="chapter" data-level="4.4" data-path="okviri.html"><a href="okviri.html#faktori"><i class="fa fa-check"></i><b>4.4</b> Faktori</a></li>
<li class="chapter" data-level="" data-path="okviri.html"><a href="okviri.html#zadaci-za-vjezbu-2"><i class="fa fa-check"></i>Zadaci za vježbu</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="kontrola.html"><a href="kontrola.html"><i class="fa fa-check"></i><b>5</b> Kontrola toka i objekti</a><ul>
<li class="chapter" data-level="5.1" data-path="kontrola.html"><a href="kontrola.html#naredbe-kontrole-toka"><i class="fa fa-check"></i><b>5.1</b> Naredbe kontrole toka</a><ul>
<li class="chapter" data-level="5.1.1" data-path="kontrola.html"><a href="kontrola.html#uvjetno-izvoenje-naredbi"><i class="fa fa-check"></i><b>5.1.1</b> Uvjetno izvođenje naredbi</a></li>
<li class="chapter" data-level="5.1.2" data-path="kontrola.html"><a href="kontrola.html#programske-petlje"><i class="fa fa-check"></i><b>5.1.2</b> Programske petlje</a></li>
<li class="chapter" data-level="5.1.3" data-path="kontrola.html"><a href="kontrola.html#petlja-repeat"><i class="fa fa-check"></i><b>5.1.3</b> Petlja <code>repeat</code></a></li>
<li class="chapter" data-level="5.1.4" data-path="kontrola.html"><a href="kontrola.html#petlja-while"><i class="fa fa-check"></i><b>5.1.4</b> Petlja <code>while</code></a></li>
<li class="chapter" data-level="5.1.5" data-path="kontrola.html"><a href="kontrola.html#petlja-for"><i class="fa fa-check"></i><b>5.1.5</b> Petlja <code>for</code></a></li>
</ul></li>
<li class="chapter" data-level="5.2" data-path="kontrola.html"><a href="kontrola.html#objektni-modeli-u-jeziku-r"><i class="fa fa-check"></i><b>5.2</b> Objektni modeli u jeziku R</a><ul>
<li class="chapter" data-level="5.2.1" data-path="kontrola.html"><a href="kontrola.html#pregled-objektnog-modela-s3"><i class="fa fa-check"></i><b>5.2.1</b> Pregled objektnog modela S3</a></li>
<li class="chapter" data-level="5.2.2" data-path="kontrola.html"><a href="kontrola.html#genericke-funkcije"><i class="fa fa-check"></i><b>5.2.2</b> Generičke funkcije</a></li>
<li class="chapter" data-level="5.2.3" data-path="kontrola.html"><a href="kontrola.html#zakljucci-o-s3-objektima"><i class="fa fa-check"></i><b>5.2.3</b> Zaključci o S3 objektima</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="kontrola.html"><a href="kontrola.html#zadaci-za-vjezbu-3"><i class="fa fa-check"></i>Zadaci za vježbu</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="paketi.html"><a href="paketi.html"><i class="fa fa-check"></i><b>6</b> Paketi, ugrađene funkcije i okoline</a><ul>
<li class="chapter" data-level="6.1" data-path="paketi.html"><a href="paketi.html#rad-s-paketima"><i class="fa fa-check"></i><b>6.1</b> Rad s paketima</a></li>
<li class="chapter" data-level="6.2" data-path="paketi.html"><a href="paketi.html#ugraene-funkcije"><i class="fa fa-check"></i><b>6.2</b> Ugrađene funkcije</a></li>
<li class="chapter" data-level="6.3" data-path="paketi.html"><a href="paketi.html#okoline"><i class="fa fa-check"></i><b>6.3</b> Okoline</a></li>
<li class="chapter" data-level="" data-path="paketi.html"><a href="paketi.html#zadaci-za-vjezbu-4"><i class="fa fa-check"></i>Zadaci za vježbu</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="korisnik.html"><a href="korisnik.html"><i class="fa fa-check"></i><b>7</b> Korisnički definirane funkcije</a><ul>
<li class="chapter" data-level="7.1" data-path="korisnik.html"><a href="korisnik.html#kako-definirati-funkciju"><i class="fa fa-check"></i><b>7.1</b> Kako definirati funkciju</a><ul>
<li class="chapter" data-level="7.1.1" data-path="korisnik.html"><a href="korisnik.html#princip-kopiranja-kod-izmjene-copy-on-modify"><i class="fa fa-check"></i><b>7.1.1</b> Princip “kopiranja kod izmjene” (copy-on-modify)</a></li>
<li class="chapter" data-level="7.1.2" data-path="korisnik.html"><a href="korisnik.html#funkcija-kao-objekt"><i class="fa fa-check"></i><b>7.1.2</b> Funkcija kao objekt</a></li>
<li class="chapter" data-level="7.1.3" data-path="korisnik.html"><a href="korisnik.html#genericke-funkcije-1"><i class="fa fa-check"></i><b>7.1.3</b> Generičke funkcije</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="korisnik.html"><a href="korisnik.html#zadaci-za-vjezbu-5"><i class="fa fa-check"></i>Zadaci za vježbu</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="apply.html"><a href="apply.html"><i class="fa fa-check"></i><b>8</b> Porodica funkcija <code>apply</code></a><ul>
<li class="chapter" data-level="8.1" data-path="apply.html"><a href="apply.html#sto-su-apply-funkcije"><i class="fa fa-check"></i><b>8.1</b> Što su <code>apply</code> funkcije?</a></li>
<li class="chapter" data-level="8.2" data-path="apply.html"><a href="apply.html#funkcija-apply"><i class="fa fa-check"></i><b>8.2</b> Funkcija <code>apply</code></a></li>
<li class="chapter" data-level="8.3" data-path="apply.html"><a href="apply.html#funkcije-lapply-sapply-i-vapply"><i class="fa fa-check"></i><b>8.3</b> Funkcije <code>lapply</code>, <code>sapply</code> i <code>vapply</code></a></li>
<li class="chapter" data-level="8.4" data-path="apply.html"><a href="apply.html#ostale-funkcije-iz-porodice-apply-i-dostupne-alternative"><i class="fa fa-check"></i><b>8.4</b> Ostale funkcije iz porodice <code>apply</code> i dostupne alternative</a></li>
<li class="chapter" data-level="" data-path="apply.html"><a href="apply.html#zadaci-za-vjezbu-6"><i class="fa fa-check"></i>Zadaci za vježbu</a></li>
</ul></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Programirajmo u R-u</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="korisnik" class="section level1">
<h1><span class="header-section-number">7</span> Korisnički definirane funkcije</h1>
<hr />
<p>Programski jezik R, iako objektnog tipa, u svojoj je srži jezik za funkcijsko programiranje. Ova programska paradigma nije nova (datira još iz 50-tih godina prošlog stoljeća), no u posljednje vrijeme dobiva znatno na popularnosti kao svojevrsni komplement objektno-orijentiranom programiranju, za koje bi se moglo reći da je dominantna programska paradigma u zadnjih nekoliko desetljeća.</p>
<p>Kako ne bi preduboko ulazili u značajke funkcijskog programiranja te provodili detaljnu usporednu analizu sa objektno-orijentiranim principima, navesti ćemo samo nekoliko okvirnih značajki i smjernica vezano uz te dvije paradigme. <strong>Objektno-orijentirano programiranje</strong> u principu program gleda kao <strong>sustav imenica</strong> gdje komponente realiziramo u obliku objekata koji enkapsuliraju atribute spomenute imenice te metoda koje izvršavaju određene zadatke vezane uz navedenu imenicu. Isto tako, objektno-orijentirani sustavi usredotočavaju se na <strong>kontroliranu izmjenu stanja komponenata</strong> informacijskog sustava kao rezultat razmjene poruka između njih. <strong>Funkcijsko programiranje</strong> program gleda kao <strong>sustav glagola</strong> gdje funkcije, tj zadaci koje želimo izvršavati imaju prioritet naspram komponenata nad kojima se ti zadaci izvršavaju. Funkcijsko programiranje modelira informacijski sustav kroz <strong>komponente koje u pravilu ne mijenjaju vlastito stanje</strong>, tako da rezultat programa strogo ovisi o ulazima što olakšava testiranje i održavanje. Ukratko, razlika između objektno-orijentiranog programiranja i funkcijskog programiranje se često navodi na sljedeći način: <em>“Kod objektno-orijentiranog programiranja stvaramo podatke koji sadrže funkcije; kod funkcijskog stvaramo funkcije koje sadrže podatke”</em>.</p>
<p>Za učenje R-a ne moramo se previše zamarati sa karakteristikama funkcijskog programiranja niti biti primorani usvojiti potpuno novu programsku paradigmu. No za uspješno učenje R-a svladavanje nekih koncepata funkcijskog programiranja može se pokazati iznimno korisnim budući da će nam omogućiti pisanje čišćeg i učinkovitijeg programskog koda koji će biti u skladu sa načinom na koji je R kao jezik i dizajniran. U R-u vrijedi sljedeće: <em>funkcije su “punokrvni” objekti</em>, možemo ih <em>referencirati varijablom</em> iz birane okoline, <em>slati u funkcije</em> kao argumente, <em>primati kao povratnu vrijednost</em> funkcije ili <em>pohranjivati u podatkovne strukture</em> kao što je npr. lista. Funkcija u R-u je jednostavno objekt kojeg se može “izvršiti” tj. natjerati da obavi neki posao. Veliki broj funkcija - pogotovo onih koje zamjenjuju konstrukt programske petlje - radi na principu funkcijskih jezika gdje posao obavljamo na način da deklarativno navedemo koju funkciju želimo primijeniti na kojoj podatkovnoj strukturi te pustimo da programski jezik sam obavlja niskorazinske poslove kao što je iteriranje po strukturi i pripremanje rezultata. Primjere ovoga ćemo naučiti uskoro, a sada se prvo upoznajmo sa sintaksom definiranja funkcije u R-u.</p>
<hr />
<div id="kako-definirati-funkciju" class="section level2">
<h2><span class="header-section-number">7.1</span> Kako definirati funkciju</h2>
<p>U općenitom slučaju, definicija nove funkcije izgleda ovako:</p>
<div class="sourceCode" id="cb235"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb235-1" data-line-number="1">ime_funkcije &lt;-<span class="st"> </span><span class="cf">function</span>(ulazni argumenti) {</a>
<a class="sourceLine" id="cb235-2" data-line-number="2">    tijelo funkcije</a>
<a class="sourceLine" id="cb235-3" data-line-number="3">}</a></code></pre></div>
<p>Uočimo da kod definicije funkcije koristimo operator <code>&lt;-</code>. Ovo nije slučajno - definicija funkcije nije ništa drugo nego stvaranje objekta klase <code>function</code> kojeg onda pridružujemo određenoj varijabli; ime varijable zapravo je “naziv” funkcije.</p>
<p>U R-u ne definiramo tipove ulaznih i izlaznih argumenata. Ulazni argumenti imaju ime i opcionalnu nazivnu vrijednost. Funkcija formalno vraća jednu vrijednost, što nije nužno restrikcija ukoliko želimo vratiti više vrijednosti - jednostavno ih enkapsuliramo u obliku vektora ili liste. Ključna riječ <code>return</code> je opcionalna - funkcija vraća rezultat zadnjeg izraza u funkciji pa je često dovoljno navesti samo varijablu koja predstavlja povratnu vrijednost kao zadnji red funkcije.</p>
<p>Konačno, ukoliko želimo povećati robusnost funkcije na način da ćemo odbiti izvođenje logike unutar funkcije ako nisu zadovoljeni određeni uvjeti, za to možemo koristiti funkciju <code>stopifnot(&lt;logički izraz&gt;)</code>. Ova funkcija izračunava zadani logički izraz i prekida funkciju ako navedeni uvjet <em>nije istinit</em>.</p>
<hr />
<p><strong>Zadatak 7.1 - prva korisnički definirana funkcija</strong></p>
<div class="sourceCode" id="cb236"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb236-1" data-line-number="1"><span class="co"># napišite funkciju `veci` koja prima dva numerička vektora iste duljine </span></a>
<a class="sourceLine" id="cb236-2" data-line-number="2"><span class="co"># i vraća vektor koji sadrži veći od dva elementa na istim mjestima</span></a>
<a class="sourceLine" id="cb236-3" data-line-number="3"><span class="co"># ukoliko jedan ili oba vektora nisu numerički ili nisu iste duljine, </span></a>
<a class="sourceLine" id="cb236-4" data-line-number="4"><span class="co"># funkcija mora izbaciti grešku</span></a>
<a class="sourceLine" id="cb236-5" data-line-number="5"><span class="co"># u funkciji nemojte koristiti petlje</span></a>
<a class="sourceLine" id="cb236-6" data-line-number="6"></a>
<a class="sourceLine" id="cb236-7" data-line-number="7"><span class="co"># pozovite funkciju `veci` nad kombinacijama vektora</span></a>
<a class="sourceLine" id="cb236-8" data-line-number="8"><span class="co"># c(T, F, T) i c(1, 2, 3)</span></a>
<a class="sourceLine" id="cb236-9" data-line-number="9"><span class="co"># c(1, 2, 3, 4) i c(5, 6, 7)</span></a>
<a class="sourceLine" id="cb236-10" data-line-number="10"><span class="co"># c(1, 2, 3) i c(0, 4, 2)</span></a>
<a class="sourceLine" id="cb236-11" data-line-number="11"></a>
<a class="sourceLine" id="cb236-12" data-line-number="12"><span class="co"># (preporuka - drugi dio zadatka isprobati direktno u konzoli!)</span></a></code></pre></div>
<div class="fold s o">
<div class="sourceCode" id="cb237"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb237-1" data-line-number="1"><span class="co"># napišite funkciju `veci` koja prima dva numerička vektora iste duljine </span></a>
<a class="sourceLine" id="cb237-2" data-line-number="2"><span class="co"># i vraća vektor koji sadrži veći od dva elementa na istim mjestima</span></a>
<a class="sourceLine" id="cb237-3" data-line-number="3"><span class="co"># ukoliko jedan ili oba vektora nisu numerički ili nisu iste duljine, </span></a>
<a class="sourceLine" id="cb237-4" data-line-number="4"><span class="co"># funkcija mora izbaciti grešku</span></a>
<a class="sourceLine" id="cb237-5" data-line-number="5"><span class="co"># u funkciji nemojte koristiti petlje</span></a>
<a class="sourceLine" id="cb237-6" data-line-number="6"></a>
<a class="sourceLine" id="cb237-7" data-line-number="7">veci &lt;-<span class="st"> </span><span class="cf">function</span>(a, b) {</a>
<a class="sourceLine" id="cb237-8" data-line-number="8">    <span class="kw">stopifnot</span>(<span class="kw">is.numeric</span>(a) <span class="op">&amp;&amp;</span><span class="st"> </span><span class="kw">is.numeric</span>(b) <span class="op">&amp;&amp;</span><span class="st"> </span><span class="kw">length</span>(a) <span class="op">==</span><span class="st"> </span><span class="kw">length</span>(b));</a>
<a class="sourceLine" id="cb237-9" data-line-number="9">    <span class="kw">ifelse</span>(a <span class="op">&gt;</span><span class="st"> </span>b, a, b)</a>
<a class="sourceLine" id="cb237-10" data-line-number="10">}</a></code></pre></div>
</div>
<hr />
<p>Kod poziva funkcije možemo ali ne moramo navesti imena parametara, a R dozvoljava miješanje imenovanih i neimenovanih parametara (iako to nije nešto što bismo trebali često koristiti u praksi). Kada R bude povezivao poslane vrijednosti sa formalnim parametrima, imenovani parametri imati će prioritet te će se prvi razriješiti, a potom će se redom razrješavati neimenovani parametri.</p>
<p>U ovo se možemo uvjeriti u sljedećem zadatku, u kojem ćemo usput iskoristiti priliku i pokazati rad jedne vrlo često korištene funkcije - <code>paste</code>. Ova funkcija konkatenira znakovne nizove uz dodavanje razmaka (za spajanje bez razmaka postoji alternativna funkcija <code>paste0</code>).</p>
<hr />
<p><strong>Zadatak 7.2 - parametri funkcije</strong></p>
<div class="sourceCode" id="cb238"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb238-1" data-line-number="1">ispisiABC &lt;-<span class="st"> </span><span class="cf">function</span>(a, b, c) {</a>
<a class="sourceLine" id="cb238-2" data-line-number="2">   <span class="kw">print</span>(<span class="kw">paste</span>(<span class="st">&quot;A:&quot;</span>, a, <span class="st">&quot;B:&quot;</span>, b, <span class="st">&quot;C:&quot;</span>, c))   </a>
<a class="sourceLine" id="cb238-3" data-line-number="3">}</a>
<a class="sourceLine" id="cb238-4" data-line-number="4"></a>
<a class="sourceLine" id="cb238-5" data-line-number="5"><span class="co"># razmislite - što ispisuje sljedeći poziv funkcije? </span></a>
<a class="sourceLine" id="cb238-6" data-line-number="6"><span class="kw">ispisiABC</span>(<span class="dv">1</span>, <span class="dt">a =</span> <span class="dv">2</span>, <span class="dv">3</span>)</a></code></pre></div>
<div class="fold s o">
<div class="sourceCode" id="cb239"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb239-1" data-line-number="1">ispisiABC &lt;-<span class="st"> </span><span class="cf">function</span>(a, b, c) {</a>
<a class="sourceLine" id="cb239-2" data-line-number="2">   <span class="kw">print</span>(<span class="kw">paste</span>(<span class="st">&quot;A:&quot;</span>, a, <span class="st">&quot;B:&quot;</span>, b, <span class="st">&quot;C:&quot;</span>, c))   </a>
<a class="sourceLine" id="cb239-3" data-line-number="3">}</a>
<a class="sourceLine" id="cb239-4" data-line-number="4"></a>
<a class="sourceLine" id="cb239-5" data-line-number="5"><span class="kw">ispisiABC</span>(<span class="dv">1</span>, <span class="dt">a =</span> <span class="dv">2</span>, <span class="dv">3</span>)</a></code></pre></div>
<pre><code>## [1] &quot;A: 2 B: 1 C: 3&quot;</code></pre>
</div>
<hr />
<p>U praksi bismo se trebali držati konvencije da prvo koristimo neimenovane parametre, a potom imenovane. Uobičajeno je da postavljamo samo one imenovane parametre čija nazivna vrijednost nam ne odgovara pri čemu strogi raspored nije bitan (iako će praćenje rasporeda zadanog potpisom funkcije povećati čitljivost našeg koda).</p>
<p>Ako želimo napisati funkciju koja prima proizvoljan broj argumenata, koristimo se elementom <code>...</code>, tj. trotočkom. Primjer ovakve funkcije jest gore prikazana ugrađena funkcija <code>paste</code> koja može primiti proizvoljan broj znakovnih nizova. Ako koristimo trotočku u našoj funkciji, u potpisu ju u pravilu stavljamo na kraj liste argumenata, a unutar same funkcije ju potom jednostavno pretvorimo u listu te potom pristupamo njenim parametrima na način koji nam odgovara.</p>
<hr />
<p><strong>Zadatak 7.3 - funkcija sa proizvoljnim brojem parametara</strong></p>
<div class="sourceCode" id="cb241"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb241-1" data-line-number="1">ispisiParametre &lt;-<span class="st"> </span><span class="cf">function</span>(...) {</a>
<a class="sourceLine" id="cb241-2" data-line-number="2">   parametri &lt;-<span class="st"> </span><span class="kw">list</span>(...)</a>
<a class="sourceLine" id="cb241-3" data-line-number="3">   <span class="cf">for</span> (p <span class="cf">in</span> parametri) <span class="kw">print</span>(p)</a>
<a class="sourceLine" id="cb241-4" data-line-number="4">}</a>
<a class="sourceLine" id="cb241-5" data-line-number="5"></a>
<a class="sourceLine" id="cb241-6" data-line-number="6"><span class="co"># pozovite gornju funkciju sa proizvoljnim parametrima</span></a></code></pre></div>
<div class="fold s o">
<div class="sourceCode" id="cb242"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb242-1" data-line-number="1"><span class="kw">ispisiParametre</span>(<span class="kw">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>), <span class="dv">5</span>, T, <span class="kw">data.frame</span>(<span class="dt">x =</span> <span class="dv">1</span><span class="op">:</span><span class="dv">2</span>, <span class="dt">y =</span> <span class="kw">c</span>(T, F)))</a></code></pre></div>
<pre><code>## [1] 1 2 3
## [1] 5
## [1] TRUE
##   x     y
## 1 1  TRUE
## 2 2 FALSE</code></pre>
</div>
<hr />
<p>Za kraj, prisjetimo se priče o S3 objektima i činjenice da R nema formalni sustav stvaranja i korištenja objekata, ali da se preporučuje korištenje zasebne konstruktorske funkcije koja zamjenjuje “ručno” slaganje objekta i deklariranje njegove klase. Sada kada znamo stvoriti vlastitu funkciju možemo pogledati kako bi izgledao mogući konstruktor klase <code>Osoba</code>.</p>
<div class="sourceCode" id="cb244"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb244-1" data-line-number="1"><span class="co"># konstruktor klase osoba</span></a>
<a class="sourceLine" id="cb244-2" data-line-number="2"></a>
<a class="sourceLine" id="cb244-3" data-line-number="3">Osoba &lt;-<span class="st"> </span><span class="cf">function</span>(oib, prezime, tezina) {</a>
<a class="sourceLine" id="cb244-4" data-line-number="4"></a>
<a class="sourceLine" id="cb244-5" data-line-number="5">    <span class="kw">stopifnot</span>(<span class="kw">is.character</span>(oib))</a>
<a class="sourceLine" id="cb244-6" data-line-number="6">    <span class="kw">stopifnot</span>(<span class="kw">is.character</span>(prezime))</a>
<a class="sourceLine" id="cb244-7" data-line-number="7">    <span class="kw">stopifnot</span>(<span class="kw">is.numeric</span>(tezina) <span class="op">&amp;&amp;</span><span class="st"> </span>tezina <span class="op">&gt;</span><span class="st"> </span><span class="dv">0</span>)</a>
<a class="sourceLine" id="cb244-8" data-line-number="8"></a>
<a class="sourceLine" id="cb244-9" data-line-number="9">    o &lt;-<span class="st"> </span><span class="kw">list</span>(<span class="dt">oib =</span> oib, <span class="dt">prezime =</span> prezime, <span class="dt">tezina =</span> tezina)</a>
<a class="sourceLine" id="cb244-10" data-line-number="10">    <span class="kw">class</span>(o) &lt;-<span class="st"> &quot;Osoba&quot;</span></a>
<a class="sourceLine" id="cb244-11" data-line-number="11"></a>
<a class="sourceLine" id="cb244-12" data-line-number="12">    o</a>
<a class="sourceLine" id="cb244-13" data-line-number="13">}</a></code></pre></div>
<p>Pokušajmo uz pomoć prikazanog konstruktora stvoriti novi objekt klase <code>Osoba</code>.</p>
<hr />
<p><strong>Zadatak 7.4 - konstruktorska funkcija</strong></p>
<div class="sourceCode" id="cb245"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb245-1" data-line-number="1"><span class="co"># stvorite varijablu `ivo` koja će biti klase `Osoba` a koja će imati sljedeće vrijednosti atributa:</span></a>
<a class="sourceLine" id="cb245-2" data-line-number="2"><span class="co"># OIB: 1357135713, prezime: Ivić, tezina: 76</span></a>
<a class="sourceLine" id="cb245-3" data-line-number="3"></a>
<a class="sourceLine" id="cb245-4" data-line-number="4"><span class="co"># ispišite varijablu `ivo`</span></a></code></pre></div>
<div class="fold s o">
<div class="sourceCode" id="cb246"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb246-1" data-line-number="1">ivo &lt;-<span class="st"> </span><span class="kw">Osoba</span>(<span class="st">&quot;135135713&quot;</span>, <span class="st">&quot;Ivić&quot;</span>, <span class="dv">76</span>)</a>
<a class="sourceLine" id="cb246-2" data-line-number="2"></a>
<a class="sourceLine" id="cb246-3" data-line-number="3">ivo</a></code></pre></div>
<pre><code>## $oib
## [1] &quot;135135713&quot;
## 
## $prezime
## [1] &quot;Ivic&quot;
## 
## $tezina
## [1] 76
## 
## attr(,&quot;class&quot;)
## [1] &quot;Osoba&quot;</code></pre>
</div>
<hr />
<p>Prednost konstruktora je dodatna robustnost u vidu točno definiranih imena atributa ali i mogućnosti ugrađivanja i dodatnih kontrola (npr. <code>OIB</code> i <code>prezime</code> moraju biti znakovni nizovi dok <code>tezina</code> mora biti realni broj i sl.). Ukoliko stvaramo vlastite S3 objekte, preporuka je da za njih definiramo pripadajuće konstruktorske funkcije.</p>
<hr />
<div id="princip-kopiranja-kod-izmjene-copy-on-modify" class="section level3">
<h3><span class="header-section-number">7.1.1</span> Princip “kopiranja kod izmjene” (copy-on-modify)</h3>
<p>Jedno od češćih pitanja koje se postavlja kod učenja novih programskih jezika jest da li funkcije rada na način “poziva preko vrijednosti” (engl. <em>call-by-value</em>) ili “poziva preko reference” (engl. <em>call-by-reference</em>). Razlika se svodi na sposobnost funkcije da mijenja vrijednosti varijabli koje su poslane na mjestu formalnih argumenata funkcije; kod <em>call-by-value</em> principa u funkciju se šalju samo “vrijednosti” parametara, tj. “kopije” originalnih argumenata. S druge strane, kod “<em>call-by-reference</em>” principa funkcija prima “reference” originalnih varijabli, tj. ponaša se kao da su originalne varijable proslijeđene funkciji i sve izmjene nad njima odraziti će se u pozivajućem programu.</p>
<p>Jezik R koristi hibridni princip poznat po nazivom “kopiranje kod izmjene” (engl. <em>copy-on-modify</em>). Kod ovog principa u funkciju se prosljeđuju reference argumenata, što nam omogućuje da prenosimo i “velike” varijable bez straha da će doći do nepotrebnog kopiranja. No ovo vrijedi samo ukoliko funkcija ne mijenja vrijednost dobivenih varijabli - u trenutku kada funkcija pokuša provesti bilo kakvu izmjenu, provodi se kopiranje varijable i funkcija dalje nastavlja rad na kopiji. Zbog ovoga se kaže da R kao takav ne podržava <em>call-by-reference</em> (jedan razlog uvođenja objekata tipa “<em>reference classes</em>” tj. RC objekata u jezik R upravo je uvođenje ovog principa).</p>
<p>Provjerimo gore navedene tvrdnje na konkretnom primjeru.</p>
<hr />
<div class="sourceCode" id="cb248"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb248-1" data-line-number="1"><span class="co"># pokušaj izmjene varijable iz pozivajuće okoline</span></a>
<a class="sourceLine" id="cb248-2" data-line-number="2"></a>
<a class="sourceLine" id="cb248-3" data-line-number="3">f &lt;-<span class="st"> </span><span class="cf">function</span>(x) {</a>
<a class="sourceLine" id="cb248-4" data-line-number="4">    x &lt;-<span class="st"> </span>x <span class="op">+</span><span class="st"> </span><span class="dv">1</span></a>
<a class="sourceLine" id="cb248-5" data-line-number="5">}</a>
<a class="sourceLine" id="cb248-6" data-line-number="6"></a>
<a class="sourceLine" id="cb248-7" data-line-number="7">x &lt;-<span class="st"> </span><span class="dv">5</span></a>
<a class="sourceLine" id="cb248-8" data-line-number="8"><span class="kw">f</span>(x)</a>
<a class="sourceLine" id="cb248-9" data-line-number="9"><span class="kw">print</span>(x)</a></code></pre></div>
<pre><code>## [1] 5</code></pre>
<hr />
<p>Funkcija pri izvođenju stvara privremenu vlastitu okolinu unutar koje se pohranjuju “lokalne” varijable. U gornjem primjeru unutar tijela funkcije <code>f</code> pojavljuje se varijabla <code>x</code> koja “maskira” vanjsku varijablu <code>x</code> tako da se sve izmjene više ne odražavaju na vrijednost vanjske varijable. Važno je uočiti da bi funkcija mogla pristupiti vanjskoj varijabli čak i bez njenog slanja u funkciju, budući da bi referenciranjem varijable <code>x</code> koja ne postoji u lokalnoj okolini funkcije R pretragu nastavio u okolini roditelju što bi u ovom slučaju bila globalna okolina. Pokušaj izmjene ove varijable ipak ne bi uspio - R bi detektirao pokušaj izmjene varijable i stvorio lokalnu kopiju istog imena.</p>
<p>Da li ovo znači da funkcija nikada ne može mijenjati varijable iz pozivajuće okoline? Naravno da ne. Jedan od načina kako ovo izvesti jest taj da funkciji pošaljemo referencu na okolinu unutar kojeg se nalazi objekt kojeg mijenjamo (ili pustimo funkciju da sama dohvati referencu na globalnu okolinu ukoliko se varijabla tamo nalazi).</p>
<hr />
<p><strong>Zadatak 7.5 - izmjena varijable globalne okoline</strong></p>
<div class="sourceCode" id="cb250"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb250-1" data-line-number="1"><span class="co"># implementirajte funkciju f tako da dohvati referencu na globalnu okolinu </span></a>
<a class="sourceLine" id="cb250-2" data-line-number="2"><span class="co"># i poveća &quot;vanjski&quot; x za 1</span></a>
<a class="sourceLine" id="cb250-3" data-line-number="3"></a>
<a class="sourceLine" id="cb250-4" data-line-number="4">x &lt;-<span class="st"> </span><span class="dv">5</span></a>
<a class="sourceLine" id="cb250-5" data-line-number="5"><span class="co"># pozovite f(x) i ispisite x</span></a></code></pre></div>
<div class="fold s o">
<div class="sourceCode" id="cb251"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb251-1" data-line-number="1">f &lt;-<span class="st"> </span><span class="cf">function</span>() {</a>
<a class="sourceLine" id="cb251-2" data-line-number="2">  e &lt;-<span class="st"> </span><span class="kw">globalenv</span>()</a>
<a class="sourceLine" id="cb251-3" data-line-number="3">  e<span class="op">$</span>x &lt;-<span class="st"> </span>e<span class="op">$</span>x <span class="op">+</span><span class="st"> </span><span class="dv">1</span></a>
<a class="sourceLine" id="cb251-4" data-line-number="4">}</a>
<a class="sourceLine" id="cb251-5" data-line-number="5"></a>
<a class="sourceLine" id="cb251-6" data-line-number="6">x &lt;-<span class="st"> </span><span class="dv">5</span></a>
<a class="sourceLine" id="cb251-7" data-line-number="7"><span class="kw">f</span>()</a>
<a class="sourceLine" id="cb251-8" data-line-number="8"><span class="kw">print</span>(x)</a></code></pre></div>
<pre><code>## [1] 6</code></pre>
</div>
<hr />
<p>Jednostavniji način rješavanja gornjeg zadatka bio bi korištenjem operatora <code>&lt;&lt;-</code>. Ovo je tzv. “operator dodjele vanjskom opsegu” (engl. <em>scoping assignment operator</em>), a njegova funkcija jest da izmjeni varijablu zadanog imena koja se nalazi ’negdje&quot; na stazi pretrage. R ide sekvencijalno po stazi pretrage i mijenja prvu pojavu navedene varijable. Ukoliko varijabla tog naziva ne postoji nigdje u stazi pretrage, R će stvoriti novu varijablu u prvoj okolini iznad okoline funkcije.</p>
<div class="sourceCode" id="cb253"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb253-1" data-line-number="1"><span class="co"># operator `&lt;&lt;-`</span></a>
<a class="sourceLine" id="cb253-2" data-line-number="2">f &lt;-<span class="st"> </span><span class="cf">function</span>(x) {</a>
<a class="sourceLine" id="cb253-3" data-line-number="3">    x &lt;-<span class="st"> </span><span class="dv">6</span></a>
<a class="sourceLine" id="cb253-4" data-line-number="4">    x &lt;&lt;-<span class="st"> </span><span class="dv">7</span></a>
<a class="sourceLine" id="cb253-5" data-line-number="5">}</a>
<a class="sourceLine" id="cb253-6" data-line-number="6"></a>
<a class="sourceLine" id="cb253-7" data-line-number="7">x &lt;-<span class="st"> </span><span class="dv">5</span></a>
<a class="sourceLine" id="cb253-8" data-line-number="8"><span class="kw">f</span>()</a>
<a class="sourceLine" id="cb253-9" data-line-number="9">x</a></code></pre></div>
<pre><code>## [1] 7</code></pre>
<p>Ovaj operator je potencijalno nepredvidiv tako da ćemo veću robusnost ipak postići korištenjem funkcije <code>assign</code> ili operatora <code>$</code> uz referencu na okolinu gdje se nalazi varijabla koju želimo mijenjati.</p>
<p>Za kraj spomenimo samo jedno svojstvo funkcija u R-u - tzv. “lijena evaluacija” (engl. <em>lazy evaluation</em>). Ovo jednostavno znači da R neće evaluirati primljeni parametar sve do trenutka kada ga eksplicitno koristimo. Do tog trenutka taj objekt je tzv. “obećanje” (engl. <em>promise</em>) - R “zna” kako evaluirati taj objekt ali to ne radi dok zaista ne treba a do tada imamo samo njegovo obećanje da će to učiniti :) . Na ovaj način povećava se učinkovitost jezika; ako se neki parametar koristi samo u nekoj uvjetnoj grani, onda se u scenarijima kada on nije potreban neće na njega trošiti memorija. No isto tako, moramo biti oprezni jer lijena evaluacija može dovesti do neočekivanih problema ako ne vodimo računa o njenom postojanju.</p>
</div>
<div id="funkcija-kao-objekt" class="section level3">
<h3><span class="header-section-number">7.1.2</span> Funkcija kao objekt</h3>
<p>Već smo rekli da R ima kvalitetnu podršku za tzv. “funkcionalno programiranje” što predstavlja programsku paradigmu koja naglasak stavlja na dizajniranje funkcija bez oslanjanja na objekte sa izmjenjivim stanjima. Jedna od karakteristika ovakvih jezika su i tzv. “funkcije prve klase” (engl. <em>first class functions</em>), što zapravo znači da jezik podržava definiciju funkcija na način da su one ravnopravni objekti svim drugim tipovima objekata - mogu se pohraniti u varijablu, koristiti kao ulazni argument druge funkcije ili kao njezina povratna vrijednost, pohranjivati u druge podatkovne strukture i sl. Iako koncepti funkcionalnog programiranja izlaze iz okvira gradiva kojeg želimo prikazati, činjenicu da R tretira funkcije kao sve druge objekte je vrlo važno znati budući da se ova činjenica iznimno često koristi kod programiranja u jeziku R.</p>
<p>Pokažimo ovo na trivijalnom primjeru. Znamo da R nudi funkciju <code>sum</code> unutar paketa <code>base</code> koja računa aritmetičku sumu elemenata vektora koje joj proslijedimo. No <code>sum</code> je zapravo <em>ime varijable</em> koja referencira kod koji implementira dotičnu funkciju. Ukoliko želimo, možemo vrlo lako pridružiti ovu funkciju nekoj drugoj varijabli čime smo joj efektivno “promijenili ime” ili bolje reći dodali alternativni način pozivanja iz potpuno druge okoline.</p>
<div class="sourceCode" id="cb255"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb255-1" data-line-number="1">zbroji &lt;-<span class="st"> </span>sum</a>
<a class="sourceLine" id="cb255-2" data-line-number="2"></a>
<a class="sourceLine" id="cb255-3" data-line-number="3"><span class="kw">zbroji</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">10</span>)  <span class="co"># isto kao sum(1:10)</span></a></code></pre></div>
<p>Ovo je najlakše shvatiti na način da je funkcija jednostavno “varijabla koja se može pozvati”, pri čemu pod “pozivom” smatramo korištenje sintakse koja uključuje referencu na funkciju i ulazne argumente uokvirene u zagrade, a koja će nakon izvršavanja u R okolini vratiti nekakvu vrijednost.</p>
<hr />
<p>Funkcija može uredno vraćati i neku drugu funkciju.</p>
<div class="sourceCode" id="cb256"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb256-1" data-line-number="1">stvoriteljFje &lt;-<span class="st"> </span><span class="cf">function</span>() {</a>
<a class="sourceLine" id="cb256-2" data-line-number="2">    f &lt;-<span class="st"> </span><span class="cf">function</span>(x) x <span class="op">+</span><span class="st"> </span><span class="dv">1</span></a>
<a class="sourceLine" id="cb256-3" data-line-number="3">    <span class="kw">return</span>(f)</a>
<a class="sourceLine" id="cb256-4" data-line-number="4">}</a>
<a class="sourceLine" id="cb256-5" data-line-number="5"></a>
<a class="sourceLine" id="cb256-6" data-line-number="6">novaFja &lt;-<span class="st"> </span><span class="kw">stvoriteljFje</span>() <span class="co"># dobili smo funkciju &quot;dodavanja jedinice&quot;</span></a>
<a class="sourceLine" id="cb256-7" data-line-number="7"><span class="kw">novaFja</span>(<span class="dv">5</span>)  </a></code></pre></div>
<pre><code>## [1] 6</code></pre>
<p>Funkcija je jednostavno stvorila novu funkciju i vratila ju pozivajućem programu kao što bi učinila sa bilo kojim drugim objektom. Povratnu vrijednost spremili smo u varijablu koja je sad “pozivljiva” - ako joj dodamo zagrade i parametre ona će se izvršiti na način na koji je definirana unutar funkcije koja ju je stvorila.</p>
<p>Uočite da smo mogli iskoristiti činjenicu da funkcija vraća rezultat zadnjeg izraza i funkciju definirati i kraće:</p>
<div class="sourceCode" id="cb258"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb258-1" data-line-number="1"><span class="co">#kraća definicija</span></a>
<a class="sourceLine" id="cb258-2" data-line-number="2">stvoriteljFje &lt;-<span class="st"> </span><span class="cf">function</span>() {</a>
<a class="sourceLine" id="cb258-3" data-line-number="3">    <span class="cf">function</span>(x) x <span class="op">+</span><span class="st"> </span><span class="dv">1</span></a>
<a class="sourceLine" id="cb258-4" data-line-number="4">}</a></code></pre></div>
<p>Ovakve funkcije često se zovu i “tvornicama” ili “generatorima” funkcija, a za razliku od gornjeg primjera u praksi generatoru funkcija često šaljemo i neke parametre koji određuju kako će se vraćena funkcija ponašati.</p>
<p>Pokušajte samostalno napraviti generator funkcija koji vraća funkcije za množenje sa unaprijed postavljenim parametrom.</p>
<hr />
<p><strong>Zadatak 7.6 - generator funkcija</strong></p>
<div class="sourceCode" id="cb259"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb259-1" data-line-number="1"><span class="co"># stvorite funkciju `tvornicaMnozenja` koja stvara funkcije množenja primljenog broja </span></a>
<a class="sourceLine" id="cb259-2" data-line-number="2"><span class="co"># sa nekom predefiniranom konstantom</span></a>
<a class="sourceLine" id="cb259-3" data-line-number="3"></a>
<a class="sourceLine" id="cb259-4" data-line-number="4"><span class="co"># uz pomoć gornje funkcije napravite funkciju `puta2` koja udvostručuje primljeni broj</span></a>
<a class="sourceLine" id="cb259-5" data-line-number="5"></a>
<a class="sourceLine" id="cb259-6" data-line-number="6"><span class="co"># pozovite funkciju `puta2` s parametrom 3 i ispišite rezultat</span></a></code></pre></div>
<div class="fold s o">
<div class="sourceCode" id="cb260"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb260-1" data-line-number="1"><span class="co"># stvorite funkciju `tvornicaMnozenja` koja stvara funkcije množenja primljenog broja </span></a>
<a class="sourceLine" id="cb260-2" data-line-number="2"><span class="co"># sa nekom predefiniranom konstantom</span></a>
<a class="sourceLine" id="cb260-3" data-line-number="3">tvornicaMnozenja &lt;-<span class="st"> </span><span class="cf">function</span>(x) {</a>
<a class="sourceLine" id="cb260-4" data-line-number="4">  <span class="cf">function</span>(a) a<span class="op">*</span>x</a>
<a class="sourceLine" id="cb260-5" data-line-number="5">}</a>
<a class="sourceLine" id="cb260-6" data-line-number="6"></a>
<a class="sourceLine" id="cb260-7" data-line-number="7"><span class="co"># uz pomoć gornje funkcije napravite funkciju `puta2` koja udvostručuje primljeni broj</span></a>
<a class="sourceLine" id="cb260-8" data-line-number="8">puta2 &lt;-<span class="st"> </span><span class="kw">tvornicaMnozenja</span>(<span class="dv">2</span>)</a>
<a class="sourceLine" id="cb260-9" data-line-number="9"></a>
<a class="sourceLine" id="cb260-10" data-line-number="10"><span class="co"># pozovite funkciju `puta2` s parametrom 3 i ispišite rezultat</span></a>
<a class="sourceLine" id="cb260-11" data-line-number="11"><span class="kw">puta2</span>(<span class="dv">3</span>)</a></code></pre></div>
<pre><code>## [1] 6</code></pre>
</div>
<p>Funkcija <code>tvornicaMnozenja</code> zapravo stvara “porodicu” funkcija koje sve pružaju mogućnost množenja sa odabranim brojem - tj. parametrom kojeg odabire sam programer. Ovakav način upravljanja funkcijama je možda inicijalno zbunjujući, no korištenjem istoga u praksi (što ćemo prikazati već u idućem poglavlju) lako se uočava dodatna fleksibilnost i učinkovitost ovakvog pristupa.</p>
<hr />
<p>Ako definiramo funkciju, a ne pridružimo ju nekoj varijabli, onda smo stvorili tzv. “anonimnu funkciju”.</p>
<div class="sourceCode" id="cb262"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb262-1" data-line-number="1"><span class="co"># anonimna funkcija</span></a>
<a class="sourceLine" id="cb262-2" data-line-number="2"><span class="cf">function</span>(x) x <span class="op">*</span><span class="st"> </span>x </a></code></pre></div>
<p>Uočimo da je svaka funkcija inicijalno “anonimna”. Ako se vratimo na sintaksu definicije funkcije, vidimo da je ona zapravo kombinacija stvaranja anonimne funkcije i pridjeljivanja iste nekoj varijabli uz operator pridruživanja. Naravno, ostavljanje funkcije anonimnom kao što smo izveli u gornjem primjeru nema previše smisla, isto kao što nema smisla definirati neki vektor ili listu bez pridjeljivanja reference na taj objekt - u tom slučaju stvoreni objekt nije ni na koji način iskoristiv jer nema nijedne poveznice prema njemu te će ga R vrlo brzo obrisati u sklopu rutine “čišćenja smeća”.</p>
<p>Možemo se zapitati - kako onda izgleda scenarij gdje je korištenje anonimne funkcije smisleno i korisno? Eksplicitne anonimne funkcije koristimo kada nam dobro dođe “jednokratna” funkcija, recimo kao argument neke druge funkcije. Ako je funkciju koju želimo poslati kao argument lako definirati u jednom retku, a ne planiramo ju više koristiti u programu, onda nema smisla zasebno ju definirati i dodijeliti joj vlastitu referencu. Primjer ovoga vidjet ćemo u lekciji o <code>apply</code> porodici funkcija.</p>
<hr />
<p>Za kraj ovog dijela ponovimo najbitnije stvari - u R-u je funkcija objekt kao i svaki drugi, jedina specifičnost jest da se radi o objektu koji je “izvršiv”, tj. koji uz korištenje sintakse za poziv funkcije obavlja neki posao i vraća neku vrijednost. Čak i anonimnu funkciju možemo bez problema izvršiti (iako samo jednom, budući da nemamo referencu za njezino ponovno zvanje).</p>
<div class="sourceCode" id="cb263"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb263-1" data-line-number="1"><span class="co"># anonimna funkcija s pozivom</span></a>
<a class="sourceLine" id="cb263-2" data-line-number="2">(<span class="cf">function</span>(x) x <span class="op">+</span><span class="st"> </span><span class="dv">1</span>)(<span class="dv">2</span>)</a></code></pre></div>
<pre><code>## [1] 3</code></pre>
<hr />
</div>
<div id="genericke-funkcije-1" class="section level3">
<h3><span class="header-section-number">7.1.3</span> Generičke funkcije</h3>
<p>Generičke funkcije već smo spominjali u poglavlju o objektima no svejedno se kratko podsjetimo o čemu se zapravo radi. Programski jezik R svoje objektno orijentirane principe ne temelji na takozvanom “principu razmjene poruka” gdje bi npr. poziv za crtanje grafa mogao izgledati ovako:</p>
<div class="sourceCode" id="cb265"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb265-1" data-line-number="1"><span class="co"># uobičajeni OOP princip poziva metode objekta</span></a>
<a class="sourceLine" id="cb265-2" data-line-number="2"><span class="kw">graf.crtaj</span>()</a></code></pre></div>
<p>već ovako:</p>
<div class="sourceCode" id="cb266"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb266-1" data-line-number="1"><span class="co"># R-ovski princip poziva metode objekta</span></a>
<a class="sourceLine" id="cb266-2" data-line-number="2"><span class="kw">crtaj</span>(graf)</a></code></pre></div>
<p>U prvom slučaju graf je objekt koji implementira posebnu metodu za crtanje te koju moramo pozvati kako bi dobili traženu sliku grafa. U drugom postoji “vanjska” funkcija koja “zna” nacrtati graf. Ovu funkciju nazivamo generička funkcija.</p>
<hr />
<p>Općenita svojstva generičke funkcije su sljedeća:</p>
<ul>
<li>funkcija ima intuitivnu, jasno određenu svrhu</li>
<li>očekivani način rada sličan je za više tipova objekata (npr. crtanje će rezultirati slikom)</li>
<li>svaki tip objekta zahtjeva vlastitu implementaciju ovisno o karakteristikama objekta (npr. način crtanja kruga se razlikuje se od načina crtanja kvadrata)</li>
</ul>
<p>Način implementacije generičkih funkcija (za S3 objekte!) zapravo je iznimno jednostavan, što je vjerojatno i razlog njihove široke prihvaćenosti i velike popularnosti u R zajednici. Postupak se svodi na tri jednostavna koraka:</p>
<ul>
<li>izaberemo naziv generičke funkcije (npr. <code>ispisi</code>) i deklariramo da se radi o generičkoj funkciji
<ul>
<li>alternativno, odaberemo neku od postojećih generičkih funkcija</li>
</ul></li>
<li>stvorimo objekt i deklariramo njegovu klasu (npr. <code>Osoba</code>)</li>
<li>implementiramo funkciju naziva <code>ime_gen_fje.ime_klase</code> (npr. <code>ispisi.Osoba</code>)</li>
</ul>
<p>I to je sve! R ne zahtjeva nikakve dodatne korake, gore navedeno je sasvim dovoljno da R prepoznaje novu generičku funkciju i da ju primjenjuje na sve objekte za čiju klasu je implementirana ta generička funkcija u obliku <code>ime_gen_fje.ime_klase</code> (ili <code>ime_gen_fje.default</code> za sve klase za koje ne postoji posebna implementacija).</p>
<p>Pokušajmo u sljedećem zadatku implementirati generičku metodu <code>ispisi</code> za objekt klase <code>Osoba</code>.</p>
<hr />
<p><strong>Zadatak 7.7 - nova generička funkcija</strong></p>
<div class="sourceCode" id="cb267"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb267-1" data-line-number="1">pero &lt;-<span class="st"> </span><span class="kw">Osoba</span>(<span class="dt">oib =</span> <span class="st">&quot;12345678&quot;</span>, <span class="dt">prezime =</span> <span class="st">&quot;Peric&quot;</span>, <span class="dt">tezina =</span> <span class="dv">78</span>)</a>
<a class="sourceLine" id="cb267-2" data-line-number="2"></a>
<a class="sourceLine" id="cb267-3" data-line-number="3"><span class="co"># stvaramo novu generičku funkciju `ispisi` uz pomoć funkcije `UseMethod`</span></a>
<a class="sourceLine" id="cb267-4" data-line-number="4">ispisi &lt;-<span class="st"> </span><span class="cf">function</span>(x) <span class="kw">UseMethod</span>(<span class="st">&quot;ispisi&quot;</span>)</a>
<a class="sourceLine" id="cb267-5" data-line-number="5"></a>
<a class="sourceLine" id="cb267-6" data-line-number="6"><span class="co"># implementirajte funkciju naziva `ispisi.Osoba` koja prima jedan parametar (očekivano klase `Osoba`)</span></a>
<a class="sourceLine" id="cb267-7" data-line-number="7"><span class="co"># te na zaslon ispisuje podatke o osobi na sljedeći način:</span></a>
<a class="sourceLine" id="cb267-8" data-line-number="8"><span class="co"># OIB: &lt;oib&gt;, Prezime: &lt;prezime&gt;, tezina: &lt;tezina&gt;</span></a>
<a class="sourceLine" id="cb267-9" data-line-number="9"><span class="co"># za slaganje ispisa koristite funkciju `paste`</span></a>
<a class="sourceLine" id="cb267-10" data-line-number="10"><span class="co"># a za sam ispis funkciju `cat`</span></a>
<a class="sourceLine" id="cb267-11" data-line-number="11"></a>
<a class="sourceLine" id="cb267-12" data-line-number="12"><span class="co"># implementirajte funkciju naziva ispisi.default koja prima jedan parametar</span></a>
<a class="sourceLine" id="cb267-13" data-line-number="13"><span class="co"># i ispisuje ga na zaslon uz pomoć funkcije `cat`</span></a>
<a class="sourceLine" id="cb267-14" data-line-number="14"></a>
<a class="sourceLine" id="cb267-15" data-line-number="15"><span class="co"># ispišite varijablu `pero` uz pomoć generičke funkcije `ispisi`</span></a>
<a class="sourceLine" id="cb267-16" data-line-number="16"></a>
<a class="sourceLine" id="cb267-17" data-line-number="17"><span class="co"># ispišite vektor c(1, 2, 3, 4, 5) uz pomoć generičke funkcije `ispisi`</span></a></code></pre></div>
<div class="fold s o">
<div class="sourceCode" id="cb268"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb268-1" data-line-number="1"><span class="co"># implementirajte funkciju naziva `ispisi.Osoba` koja prima jedan parametar (očekivano klase `Osoba`)</span></a>
<a class="sourceLine" id="cb268-2" data-line-number="2"><span class="co"># te na zaslon ispisuje podatke o osobi na sljedeći način:</span></a>
<a class="sourceLine" id="cb268-3" data-line-number="3"><span class="co"># OIB: &lt;oib&gt;, Prezime: &lt;prezime&gt;, tezina: &lt;tezina&gt;</span></a>
<a class="sourceLine" id="cb268-4" data-line-number="4"><span class="co"># za slaganje ispisa koristite funkciju `paste`</span></a>
<a class="sourceLine" id="cb268-5" data-line-number="5"><span class="co"># a za sam ispis funkciju `cat`</span></a>
<a class="sourceLine" id="cb268-6" data-line-number="6">ispisi.Osoba &lt;-<span class="st"> </span><span class="cf">function</span>(o) {</a>
<a class="sourceLine" id="cb268-7" data-line-number="7">    rez &lt;-<span class="st"> </span><span class="kw">paste</span>(<span class="st">&quot;OIB:&quot;</span>, o<span class="op">$</span>oib, <span class="st">&quot;, Prezime:&quot;</span>, o<span class="op">$</span>prezime, <span class="st">&quot;, tezina:&quot;</span>, o<span class="op">$</span>tezina, <span class="st">&quot;</span><span class="ch">\n</span><span class="st">&quot;</span>)</a>
<a class="sourceLine" id="cb268-8" data-line-number="8">    <span class="kw">cat</span>(rez)</a>
<a class="sourceLine" id="cb268-9" data-line-number="9">}</a>
<a class="sourceLine" id="cb268-10" data-line-number="10"></a>
<a class="sourceLine" id="cb268-11" data-line-number="11"><span class="co"># implementirajte funkciju naziva ispisi.default koja prima jedan parametar</span></a>
<a class="sourceLine" id="cb268-12" data-line-number="12"><span class="co"># i ispisuje ga na zaslon uz pomoć funkcije `cat`</span></a>
<a class="sourceLine" id="cb268-13" data-line-number="13">ispisi.default &lt;-<span class="st"> </span><span class="cf">function</span>(x) <span class="kw">cat</span>(x)</a>
<a class="sourceLine" id="cb268-14" data-line-number="14"></a>
<a class="sourceLine" id="cb268-15" data-line-number="15"><span class="co"># ispišite varijablu `pero` uz pomoć generičke funkcije `ispisi`</span></a>
<a class="sourceLine" id="cb268-16" data-line-number="16"><span class="kw">ispisi</span>(pero)</a>
<a class="sourceLine" id="cb268-17" data-line-number="17"></a>
<a class="sourceLine" id="cb268-18" data-line-number="18"><span class="co"># ispišite vektor c(1, 2, 3, 4, 5) uz pomoć generičke funkcije `ispisi`</span></a>
<a class="sourceLine" id="cb268-19" data-line-number="19"><span class="kw">ispisi</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">5</span>)</a></code></pre></div>
<pre><code>## OIB: 12345678 , Prezime: Peric , tezina: 78 
## 1 2 3 4 5</code></pre>
</div>
<hr />
<p>Naravno, nismo morali nužno stvoriti vlastitu funkciju ispisi - vjerojatno bi bolji odabir bio korištenje već postojećih generičkih funkcija kao to su <code>print</code> ili <code>cat</code>.</p>
<hr />
<p><strong>Zadatak 7.8 - korištenje postojećih generičkih funkcija</strong></p>
<div class="sourceCode" id="cb270"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb270-1" data-line-number="1"><span class="co"># provjerite da li je print generička funkcija </span></a>
<a class="sourceLine" id="cb270-2" data-line-number="2"><span class="co"># (jednostavno ispišite njezin izvorni kod navođenjem samog imena funkcije)</span></a>
<a class="sourceLine" id="cb270-3" data-line-number="3"></a>
<a class="sourceLine" id="cb270-4" data-line-number="4"><span class="co"># omogućite ispis klase `Osoba` uz pomoć generičke funkcije `print`</span></a>
<a class="sourceLine" id="cb270-5" data-line-number="5"><span class="co"># (možete se poslužiti funkcijom iz prethodnog zadatka)</span></a>
<a class="sourceLine" id="cb270-6" data-line-number="6"></a>
<a class="sourceLine" id="cb270-7" data-line-number="7"><span class="co"># ispišite varijablu `Pero` uz pomoć generičke funkcije `print`</span></a></code></pre></div>
<div class="fold s o">
<div class="sourceCode" id="cb271"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb271-1" data-line-number="1"><span class="co"># provjerite da li je print generička funkcija </span></a>
<a class="sourceLine" id="cb271-2" data-line-number="2"><span class="co"># (jednostavno ispišite njezin izvorni kod navođenjem samog imena funkcije)</span></a>
<a class="sourceLine" id="cb271-3" data-line-number="3">print</a>
<a class="sourceLine" id="cb271-4" data-line-number="4"></a>
<a class="sourceLine" id="cb271-5" data-line-number="5"><span class="co"># omogućite ispis klase `Osoba` uz pomoć generičke funkcije `print`</span></a>
<a class="sourceLine" id="cb271-6" data-line-number="6"><span class="co"># (možete se poslužiti funkcijom iz prethodnog zadatka)</span></a>
<a class="sourceLine" id="cb271-7" data-line-number="7">print.Osoba &lt;-<span class="st"> </span>ispisi.Osoba</a>
<a class="sourceLine" id="cb271-8" data-line-number="8"></a>
<a class="sourceLine" id="cb271-9" data-line-number="9"></a>
<a class="sourceLine" id="cb271-10" data-line-number="10"><span class="co"># ispišite varijablu `Pero` uz pomoć generičke funkcije `print`</span></a>
<a class="sourceLine" id="cb271-11" data-line-number="11"><span class="kw">print</span>(pero)</a></code></pre></div>
<pre><code>## function (x, ...) 
## UseMethod(&quot;print&quot;)
## &lt;bytecode: 0x000000000fe69828&gt;
## &lt;environment: namespace:base&gt;
## OIB: 12345678 , Prezime: Peric , tezina: 78</code></pre>
</div>
<hr />
<p>Za kraj, prikažimo mogućnost R-a da nam izlista sve trenutno poznate implementacije neke generičke metode. Za to se jednostavno koristimo funkcijom <code>methods</code> kojoj proslijedimo ime dotične metode. Istom funkcijom možemo i provjeriti koje sve implementacije generičkih funkcija postoje za određenu klasu. Za to koristimo parametar <code>class</code> kojem prosljeđujemo naziv klase za koju tražimo spomenute implementacije.</p>
<hr />
<p><strong>Zadatak 7.9 - funkcija <code>methods</code></strong></p>
<div class="sourceCode" id="cb273"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb273-1" data-line-number="1"><span class="co"># prikažite sve do sad poznate implementacije generičke funkcije `summary`</span></a>
<a class="sourceLine" id="cb273-2" data-line-number="2"></a>
<a class="sourceLine" id="cb273-3" data-line-number="3"><span class="co"># provjerite koje sve implementacije generičkih funkcija postoje za klasu `factor`</span></a></code></pre></div>
<div class="fold s o">
<div class="sourceCode" id="cb274"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb274-1" data-line-number="1"><span class="co"># prikažite sve do sad poznate implementacije generičke funkcije `summary`</span></a>
<a class="sourceLine" id="cb274-2" data-line-number="2"><span class="co">#methods(summary)   # probati na konzoli</span></a>
<a class="sourceLine" id="cb274-3" data-line-number="3"></a>
<a class="sourceLine" id="cb274-4" data-line-number="4"><span class="kw">cat</span>(<span class="st">&quot;-----------------------</span><span class="ch">\n</span><span class="st">&quot;</span>)</a>
<a class="sourceLine" id="cb274-5" data-line-number="5"></a>
<a class="sourceLine" id="cb274-6" data-line-number="6"><span class="co"># provjerite koje sve implementacije generičkih funkcija postoje za klasu `factor`</span></a>
<a class="sourceLine" id="cb274-7" data-line-number="7"><span class="kw">methods</span>(<span class="dt">class =</span> <span class="st">&quot;factor&quot;</span>)</a></code></pre></div>
<pre><code>## -----------------------
##  [1] /             [             [[            [[&lt;-          [&lt;-          
##  [6] +             all.equal     Arith         as.character  as.data.frame
## [11] as.Date       as.duration   as.interval   as.list       as.logical   
## [16] as.period     as.POSIXlt    as.vector     as_date       as_datetime  
## [21] as_factor     brief         cbind2        coerce        Compare      
## [26] corresp       droplevels    format        histogram     initialize   
## [31] is.na&lt;-       is_vector_s3  length&lt;-      levels&lt;-      Logic        
## [36] Math          Ops           plot          print         rbind2       
## [41] recode        relevel       relist        rep           scale_type   
## [46] show          slotsFromS3   summary       Summary       type_sum     
## [51] xtfrm        
## see &#39;?methods&#39; for accessing help and source code</code></pre>
</div>
<hr />
</div>
</div>
<div id="zadaci-za-vjezbu-5" class="section level2 unnumbered">
<h2>Zadaci za vježbu</h2>
<ol style="list-style-type: decimal">
<li><p>R ima funkciju <code>which</code> koja pretvara logički vektor u numerički sa rednim brojevima elemenata koji su <code>TRUE</code> (tako <code>c(T, F, F, F, F, T, F, T)</code> postaje <code>c(1, 6, 8)</code>). Implementirajte vlastitu inačicu ove funkcije.</p></li>
<li><p>Uzmimo numerički vektor x duljine n. U statistici standardiziranim momentom k-tog reda zovemo vrijednost:</p></li>
</ol>
<p><span class="math display">\[\frac{1}{n}\sum_{i=1}^n{(x_i - \bar{x})}^{k+1}\]</span></p>
<p>Stvorite generator funkcija <code>moment(k)</code> koji će stvarati funkcije za računanje standardiziranog centralnog momenta k-tog reda. Stvorite funkcije <code>nulti_moment(x)</code> i <code>prvi_moment(x)</code> sa vrijednosti parametra <code>k</code> redom <code>0</code> i <code>1</code>. Testirajte funkcije na vektoru <code>1:1000</code>. Usporedite rezultate koje daje funkcija <code>sd</code> (standardna devijacija) nad vektorom <code>1:1000</code> i korijen rezultata funkcije <code>prvi_moment</code> nad istim vektorom.</p>
<ol start="3" style="list-style-type: decimal">
<li>Implementirajte konstruktor klase <code>Zaposlenik</code> koja nasljeđuje objekt klase <code>Osoba</code> sa sljedećom konstruktorskom funkcijom i funkcijom ispisa:</li>
</ol>
<div class="sourceCode" id="cb276"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb276-1" data-line-number="1">Osoba &lt;-<span class="st"> </span><span class="cf">function</span>(oib, prezime, tezina) {</a>
<a class="sourceLine" id="cb276-2" data-line-number="2">    o &lt;-<span class="st"> </span><span class="kw">list</span>(<span class="dt">oib =</span> oib, <span class="dt">prezime =</span> prezime, <span class="dt">tezina =</span> tezina)</a>
<a class="sourceLine" id="cb276-3" data-line-number="3">    <span class="kw">class</span>(o) &lt;-<span class="st"> &quot;Osoba&quot;</span></a>
<a class="sourceLine" id="cb276-4" data-line-number="4">    o</a>
<a class="sourceLine" id="cb276-5" data-line-number="5">}</a>
<a class="sourceLine" id="cb276-6" data-line-number="6"></a>
<a class="sourceLine" id="cb276-7" data-line-number="7">print.Osoba &lt;-<span class="st"> </span><span class="cf">function</span>(o) {</a>
<a class="sourceLine" id="cb276-8" data-line-number="8">    rez &lt;-<span class="st"> </span><span class="kw">paste</span>(<span class="st">&quot;OIB:&quot;</span>, o<span class="op">$</span>oib, <span class="st">&quot;, Prezime:&quot;</span>, o<span class="op">$</span>prezime, <span class="st">&quot;, tezina:&quot;</span>, o<span class="op">$</span>tezina, <span class="st">&quot;</span><span class="ch">\n</span><span class="st">&quot;</span>)</a>
<a class="sourceLine" id="cb276-9" data-line-number="9">    <span class="kw">cat</span>(rez)</a>
<a class="sourceLine" id="cb276-10" data-line-number="10">}</a></code></pre></div>
<p><code>Zaposlenik</code> uz atribute klase <code>Osoba</code> ima i atribut <code>nadredjeni</code> koji predstavlja referencu na nadređenog zaposlenika (ukoliko postoji, inače je <code>NA</code>).</p>
<p>Stvorite dva objekta klase <code>Zaposlenik</code> (jedan nadređen drugom) i ispišite ih uz pomoć funkcije <code>print</code>. Potom implementirajte vlastitu inačicu generičke funkcije <code>print</code> za klasu <code>Zaposlenik</code> koja ispisuje podatke o zaposleniku i podatke o nadređenom zaposleniku (ako postoji, inače ispisuje poruku da nema nadređenog zaposlenika). Ponovo ispišite oba zaposlenika uz pomoć funkcije <code>print</code>.</p>
<hr />
<p><a rel="license" href="http://creativecommons.org/licenses/by-nc-nd/4.0/"><img alt="Creative Commons License" style="border-width:0" src="https://i.creativecommons.org/l/by-nc-nd/4.0/88x31.png" /></a><br /><span xmlns:dct="http://purl.org/dc/terms/" property="dct:title">Programirajmo u R-u</span> by <a xmlns:cc="http://creativecommons.org/ns#" href="https://www.fer.unizg.hr/en/damir.pintar" property="cc:attributionName" rel="cc:attributionURL">Damir Pintar</a> is licensed under a <a rel="license" href="http://creativecommons.org/licenses/by-nc-nd/4.0/">Creative Commons Attribution-NonCommercial-NoDerivatives 4.0 International License</a>.<br />Based on a work at <a xmlns:dct="http://purl.org/dc/terms/" href="https://ratnip.github.io/FER_OPJR/" rel="dct:source">https://ratnip.github.io/FER_OPJR/</a></p>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="paketi.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="apply.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"google": false,
"linkedin": false,
"weibo": false,
"instapper": false,
"vk": false,
"all": ["facebook", "google", "twitter", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"download": null,
"toc": {
"collapse": "section",
"scroll_highlight": true
},
"toolbar": {
"position": "fixed",
"edit": null,
"download": null,
"search": true
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdn.bootcss.com/mathjax/2.7.1/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:" && /^https?:/.test(src))
      src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
