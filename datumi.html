<!DOCTYPE html>
<html >

<head>

  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>Programirajmo u R-u</title>
  <meta name="description" content="Udzbenik za vještinu ‘Osnove programskog jezika R’ na Fakultetu elektrotehnike i racunarstva, Sveuciliste u Zagrebu.">
  <meta name="generator" content="bookdown 0.7 and GitBook 2.6.7">

  <meta property="og:title" content="Programirajmo u R-u" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="Udzbenik za vještinu ‘Osnove programskog jezika R’ na Fakultetu elektrotehnike i racunarstva, Sveuciliste u Zagrebu." />
  <meta name="github-repo" content="rstudio/bookdown-demo" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Programirajmo u R-u" />
  
  <meta name="twitter:description" content="Udzbenik za vještinu ‘Osnove programskog jezika R’ na Fakultetu elektrotehnike i racunarstva, Sveuciliste u Zagrebu." />
  

<meta name="author" content="Damir Pintar">


<meta name="date" content="2018-12-11">

  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  
  
<link rel="prev" href="cijev.html">
<link rel="next" href="prilagodba-podatkovnih-skupova-uz-paket-dplyr.html">
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />








<style type="text/css">
.showopt {
  background-color: #004c93;
  color: #FFFFFF; 
  width: 140px;
  height: 4	0px;
  text-align: center;
  vertical-align: middle !important;
  float: right;
  font-family: sans-serif;
  font-size:10 pt;
  border-radius: 8px;
}

.showopt:hover {
    background-color: #dfe4f2;
    color: #004c93;
}

pre.plot {
  background-color: white !important;
}
</style>

<script>
 $(document).ready(function() {

  $chunks = $('.fold');

  $chunks.each(function () {

    // add button to source code chunks
    if ( $(this).hasClass('s') ) {
      $('pre.r', this).prepend("<div class=\"showopt\">Prikaži rješenje</div><br style=\"line-height:22px;\"/>");
      $('pre.r', this).children('code').attr('class', 'folded');
    }

    // add button to output chunks
    if ( $(this).hasClass('o') ) {
      $('pre:not(.r)', this).has('code').prepend("<div class=\"showopt\">Prikaži ispis</div><br style=\"line-height:22px;\"/>");
      $('pre:not(.r)', this).children('code:not(r)').addClass('folded');

      // add button to plots
      $(this).find('img').wrap('<pre class=\"plot\"></pre>');
      $('pre.plot', this).prepend("<div class=\"showopt\">Prikaži sliku</div><br style=\"line-height:22px;\"/>");
      $('pre.plot', this).children('img').addClass('folded');

    }
  });

  // hide all chunks when document is loaded
  $('.folded').css('display', 'none')

  // function to toggle the visibility
  $('.showopt').click(function() {
    var label = $(this).html();
    if (label.indexOf("Prikaži") >= 0) {
      $(this).html(label.replace("Prikaži", "Sakrij"));
    } else {
      $(this).html(label.replace("Sakrij", "Prikaži"));
    }
    $(this).siblings('code, img').slideToggle('fast', 'swing');
  });
});
</script>


<style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; left: -4em; }
pre.numberSource a.sourceLine::before
  { content: attr(data-line-number);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>(Udžbenik za vještinu “Osnove programskog jezika R”)</a><ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#predgovor"><i class="fa fa-check"></i>Predgovor</a></li>
</ul></li>
<li class="part"><span><b>I Osnovni elementi jezika R</b></span></li>
<li class="chapter" data-level="1" data-path="uvod.html"><a href="uvod.html"><i class="fa fa-check"></i><b>1</b> Uvod</a><ul>
<li class="chapter" data-level="1.1" data-path="uvod.html"><a href="uvod.html#sto-je-programski-jezik-r"><i class="fa fa-check"></i><b>1.1</b> Što je programski jezik R?</a><ul>
<li class="chapter" data-level="1.1.1" data-path="uvod.html"><a href="uvod.html#opcenito-o-r-u"><i class="fa fa-check"></i><b>1.1.1</b> Općenito o R-u</a></li>
<li class="chapter" data-level="1.1.2" data-path="uvod.html"><a href="uvod.html#alternative-jeziku-r"><i class="fa fa-check"></i><b>1.1.2</b> Alternative jeziku R</a></li>
</ul></li>
<li class="chapter" data-level="1.2" data-path="uvod.html"><a href="uvod.html#instalacija-programske-podrske"><i class="fa fa-check"></i><b>1.2</b> Instalacija programske podrške</a></li>
<li class="chapter" data-level="1.3" data-path="uvod.html"><a href="uvod.html#pregled-razvojnog-sucelja-rstudio"><i class="fa fa-check"></i><b>1.3</b> Pregled razvojnog sučelja <em>RStudio</em></a><ul>
<li class="chapter" data-level="1.3.1" data-path="uvod.html"><a href="uvod.html#interaktivna-konzola"><i class="fa fa-check"></i><b>1.3.1</b> Interaktivna konzola</a></li>
<li class="chapter" data-level="1.3.2" data-path="uvod.html"><a href="uvod.html#pisanje-r-skripti"><i class="fa fa-check"></i><b>1.3.2</b> Pisanje R skripti</a></li>
<li class="chapter" data-level="1.3.3" data-path="uvod.html"><a href="uvod.html#r-markdown"><i class="fa fa-check"></i><b>1.3.3</b> <em>R Markdown</em></a></li>
</ul></li>
<li class="chapter" data-level="1.4" data-path="uvod.html"><a href="uvod.html#kako-koristiti-ovaj-udzbenik"><i class="fa fa-check"></i><b>1.4</b> Kako koristiti ovaj udžbenik?</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="tipovi.html"><a href="tipovi.html"><i class="fa fa-check"></i><b>2</b> Osnovni tipovi podataka i operatori</a><ul>
<li class="chapter" data-level="2.1" data-path="tipovi.html"><a href="tipovi.html#osnovni-tipovi-podataka"><i class="fa fa-check"></i><b>2.1</b> Osnovni tipovi podataka</a></li>
<li class="chapter" data-level="2.2" data-path="tipovi.html"><a href="tipovi.html#operatori"><i class="fa fa-check"></i><b>2.2</b> Operatori</a></li>
<li class="chapter" data-level="2.3" data-path="tipovi.html"><a href="tipovi.html#nedostajuce-nepoznate-i-nemoguce-vrijednosti"><i class="fa fa-check"></i><b>2.3</b> Nedostajuće, nepoznate i nemoguće vrijednosti</a></li>
<li class="chapter" data-level="" data-path="tipovi.html"><a href="tipovi.html#zadaci-za-vjezbu"><i class="fa fa-check"></i>Zadaci za vježbu</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="vektori.html"><a href="vektori.html"><i class="fa fa-check"></i><b>3</b> Vektori, matrice i liste</a><ul>
<li class="chapter" data-level="3.1" data-path="vektori.html"><a href="vektori.html#vektori-1"><i class="fa fa-check"></i><b>3.1</b> Vektori</a><ul>
<li class="chapter" data-level="3.1.1" data-path="vektori.html"><a href="vektori.html#stvaranje-vektora"><i class="fa fa-check"></i><b>3.1.1</b> Stvaranje vektora</a></li>
<li class="chapter" data-level="3.1.2" data-path="vektori.html"><a href="vektori.html#operator"><i class="fa fa-check"></i><b>3.1.2</b> Operator <code>[</code></a></li>
<li class="chapter" data-level="3.1.3" data-path="vektori.html"><a href="vektori.html#principi-vektorizacije-i-recikliranja"><i class="fa fa-check"></i><b>3.1.3</b> Principi vektorizacije i recikliranja</a></li>
</ul></li>
<li class="chapter" data-level="3.2" data-path="vektori.html"><a href="vektori.html#indeksni-vektori"><i class="fa fa-check"></i><b>3.2</b> Indeksni vektori</a><ul>
<li class="chapter" data-level="3.2.1" data-path="vektori.html"><a href="vektori.html#lokacijsko-referenciranje"><i class="fa fa-check"></i><b>3.2.1</b> Lokacijsko referenciranje</a></li>
<li class="chapter" data-level="3.2.2" data-path="vektori.html"><a href="vektori.html#uvjetno-referenciranje"><i class="fa fa-check"></i><b>3.2.2</b> Uvjetno referenciranje</a></li>
<li class="chapter" data-level="3.2.3" data-path="vektori.html"><a href="vektori.html#imensko-referenciranje"><i class="fa fa-check"></i><b>3.2.3</b> Imensko referenciranje</a></li>
</ul></li>
<li class="chapter" data-level="3.3" data-path="vektori.html"><a href="vektori.html#matrice-i-polja"><i class="fa fa-check"></i><b>3.3</b> Matrice i polja</a><ul>
<li class="chapter" data-level="3.3.1" data-path="vektori.html"><a href="vektori.html#rezanje-matrica"><i class="fa fa-check"></i><b>3.3.1</b> Rezanje matrica</a></li>
</ul></li>
<li class="chapter" data-level="3.4" data-path="vektori.html"><a href="vektori.html#liste"><i class="fa fa-check"></i><b>3.4</b> Liste</a></li>
<li class="chapter" data-level="" data-path="vektori.html"><a href="vektori.html#zadaci-za-vjezbu-1"><i class="fa fa-check"></i>Zadaci za vježbu</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="okviri.html"><a href="okviri.html"><i class="fa fa-check"></i><b>4</b> Podatkovni okviri i faktori</a><ul>
<li class="chapter" data-level="4.1" data-path="okviri.html"><a href="okviri.html#podatkovni-okviri"><i class="fa fa-check"></i><b>4.1</b> Podatkovni okviri</a></li>
<li class="chapter" data-level="4.2" data-path="okviri.html"><a href="okviri.html#odabir-redaka-i-stupaca-podatkovnih-okvira"><i class="fa fa-check"></i><b>4.2</b> Odabir redaka i stupaca podatkovnih okvira</a></li>
<li class="chapter" data-level="4.3" data-path="okviri.html"><a href="okviri.html#dodavanje-i-brisanje-redaka-i-stupaca"><i class="fa fa-check"></i><b>4.3</b> Dodavanje i brisanje redaka i stupaca</a></li>
<li class="chapter" data-level="4.4" data-path="okviri.html"><a href="okviri.html#faktori"><i class="fa fa-check"></i><b>4.4</b> Faktori</a></li>
<li class="chapter" data-level="" data-path="okviri.html"><a href="okviri.html#zadaci-za-vjezbu-2"><i class="fa fa-check"></i>Zadaci za vježbu</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="kontrola.html"><a href="kontrola.html"><i class="fa fa-check"></i><b>5</b> Kontrola toka i objekti</a><ul>
<li class="chapter" data-level="5.1" data-path="kontrola.html"><a href="kontrola.html#naredbe-kontrole-toka"><i class="fa fa-check"></i><b>5.1</b> Naredbe kontrole toka</a><ul>
<li class="chapter" data-level="5.1.1" data-path="kontrola.html"><a href="kontrola.html#uvjetno-izvoenje-naredbi"><i class="fa fa-check"></i><b>5.1.1</b> Uvjetno izvođenje naredbi</a></li>
<li class="chapter" data-level="5.1.2" data-path="kontrola.html"><a href="kontrola.html#programske-petlje"><i class="fa fa-check"></i><b>5.1.2</b> Programske petlje</a></li>
<li class="chapter" data-level="5.1.3" data-path="kontrola.html"><a href="kontrola.html#petlja-repeat"><i class="fa fa-check"></i><b>5.1.3</b> Petlja <code>repeat</code></a></li>
<li class="chapter" data-level="5.1.4" data-path="kontrola.html"><a href="kontrola.html#petlja-while"><i class="fa fa-check"></i><b>5.1.4</b> Petlja <code>while</code></a></li>
<li class="chapter" data-level="5.1.5" data-path="kontrola.html"><a href="kontrola.html#petlja-for"><i class="fa fa-check"></i><b>5.1.5</b> Petlja <code>for</code></a></li>
</ul></li>
<li class="chapter" data-level="5.2" data-path="kontrola.html"><a href="kontrola.html#objektni-modeli-u-jeziku-r"><i class="fa fa-check"></i><b>5.2</b> Objektni modeli u jeziku R</a><ul>
<li class="chapter" data-level="5.2.1" data-path="kontrola.html"><a href="kontrola.html#pregled-objektnog-modela-s3"><i class="fa fa-check"></i><b>5.2.1</b> Pregled objektnog modela S3</a></li>
<li class="chapter" data-level="5.2.2" data-path="kontrola.html"><a href="kontrola.html#genericke-funkcije"><i class="fa fa-check"></i><b>5.2.2</b> Generičke funkcije</a></li>
<li class="chapter" data-level="5.2.3" data-path="kontrola.html"><a href="kontrola.html#zakljucci-o-s3-objektima"><i class="fa fa-check"></i><b>5.2.3</b> Zaključci o S3 objektima</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="kontrola.html"><a href="kontrola.html#zadaci-za-vjezbu-3"><i class="fa fa-check"></i>Zadaci za vježbu</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="paketi.html"><a href="paketi.html"><i class="fa fa-check"></i><b>6</b> Paketi, ugrađene funkcije i okoline</a><ul>
<li class="chapter" data-level="6.1" data-path="paketi.html"><a href="paketi.html#rad-s-paketima"><i class="fa fa-check"></i><b>6.1</b> Rad s paketima</a></li>
<li class="chapter" data-level="6.2" data-path="paketi.html"><a href="paketi.html#ugraene-funkcije"><i class="fa fa-check"></i><b>6.2</b> Ugrađene funkcije</a></li>
<li class="chapter" data-level="6.3" data-path="paketi.html"><a href="paketi.html#okoline"><i class="fa fa-check"></i><b>6.3</b> Okoline</a></li>
<li class="chapter" data-level="" data-path="paketi.html"><a href="paketi.html#zadaci-za-vjezbu-4"><i class="fa fa-check"></i>Zadaci za vježbu</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="korisnik.html"><a href="korisnik.html"><i class="fa fa-check"></i><b>7</b> Korisnički definirane funkcije</a><ul>
<li class="chapter" data-level="7.1" data-path="korisnik.html"><a href="korisnik.html#kako-definirati-funkciju"><i class="fa fa-check"></i><b>7.1</b> Kako definirati funkciju</a><ul>
<li class="chapter" data-level="7.1.1" data-path="korisnik.html"><a href="korisnik.html#princip-kopiranja-kod-izmjene-copy-on-modify"><i class="fa fa-check"></i><b>7.1.1</b> Princip “kopiranja kod izmjene” (copy-on-modify)</a></li>
<li class="chapter" data-level="7.1.2" data-path="korisnik.html"><a href="korisnik.html#funkcija-kao-objekt"><i class="fa fa-check"></i><b>7.1.2</b> Funkcija kao objekt</a></li>
<li class="chapter" data-level="7.1.3" data-path="korisnik.html"><a href="korisnik.html#genericke-funkcije-1"><i class="fa fa-check"></i><b>7.1.3</b> Generičke funkcije</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="korisnik.html"><a href="korisnik.html#zadaci-za-vjezbu-5"><i class="fa fa-check"></i>Zadaci za vježbu</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="apply.html"><a href="apply.html"><i class="fa fa-check"></i><b>8</b> Porodica funkcija <code>apply</code></a><ul>
<li class="chapter" data-level="8.1" data-path="apply.html"><a href="apply.html#sto-su-apply-funkcije"><i class="fa fa-check"></i><b>8.1</b> Što su <code>apply</code> funkcije?</a></li>
<li class="chapter" data-level="8.2" data-path="apply.html"><a href="apply.html#funkcija-apply"><i class="fa fa-check"></i><b>8.2</b> Funkcija <code>apply</code></a></li>
<li class="chapter" data-level="8.3" data-path="apply.html"><a href="apply.html#funkcije-lapply-sapply-i-vapply"><i class="fa fa-check"></i><b>8.3</b> Funkcije <code>lapply</code>, <code>sapply</code> i <code>vapply</code></a></li>
<li class="chapter" data-level="8.4" data-path="apply.html"><a href="apply.html#ostale-funkcije-iz-porodice-apply-i-dostupne-alternative"><i class="fa fa-check"></i><b>8.4</b> Ostale funkcije iz porodice <code>apply</code> i dostupne alternative</a></li>
<li class="chapter" data-level="" data-path="apply.html"><a href="apply.html#zadaci-za-vjezbu-6"><i class="fa fa-check"></i>Zadaci za vježbu</a></li>
</ul></li>
<li class="part"><span><b>II Upravljanje podacima i vizualizacije</b></span></li>
<li class="chapter" data-level="9" data-path="cijev.html"><a href="cijev.html"><i class="fa fa-check"></i><b>9</b> Operator cjevovoda i uredni podaci</a><ul>
<li class="chapter" data-level="9.1" data-path="cijev.html"><a href="cijev.html#operator-cjevovoda"><i class="fa fa-check"></i><b>9.1</b> Operator cjevovoda</a></li>
<li class="chapter" data-level="9.2" data-path="cijev.html"><a href="cijev.html#uredni-podaci"><i class="fa fa-check"></i><b>9.2</b> Uredni podaci</a><ul>
<li class="chapter" data-level="9.2.1" data-path="cijev.html"><a href="cijev.html#funkcije-gather-i-spread"><i class="fa fa-check"></i><b>9.2.1</b> Funkcije <code>gather</code> i <code>spread</code></a></li>
<li class="chapter" data-level="9.2.2" data-path="cijev.html"><a href="cijev.html#funkcije-separate-i-unite"><i class="fa fa-check"></i><b>9.2.2</b> Funkcije <code>separate</code> i <code>unite</code></a></li>
</ul></li>
<li class="chapter" data-level="" data-path="cijev.html"><a href="cijev.html#zadaci-za-vjezbu-7"><i class="fa fa-check"></i>Zadaci za vježbu</a></li>
</ul></li>
<li class="chapter" data-level="10" data-path="datumi.html"><a href="datumi.html"><i class="fa fa-check"></i><b>10</b> Rad sa datumima i znakovnim nizovima</a><ul>
<li class="chapter" data-level="10.1" data-path="datumi.html"><a href="datumi.html#rad-sa-datumima"><i class="fa fa-check"></i><b>10.1</b> Rad sa datumima</a><ul>
<li class="chapter" data-level="10.1.1" data-path="datumi.html"><a href="datumi.html#klasa-date"><i class="fa fa-check"></i><b>10.1.1</b> Klasa <code>Date</code></a></li>
<li class="chapter" data-level="10.1.2" data-path="datumi.html"><a href="datumi.html#klase-posixct-i-posixlt"><i class="fa fa-check"></i><b>10.1.2</b> Klase <code>POSIXct</code> i <code>POSIXlt</code></a></li>
<li class="chapter" data-level="10.1.3" data-path="datumi.html"><a href="datumi.html#paket-lubridate"><i class="fa fa-check"></i><b>10.1.3</b> Paket <code>lubridate</code></a></li>
</ul></li>
<li class="chapter" data-level="10.2" data-path="datumi.html"><a href="datumi.html#rad-sa-znakovnim-nizovima"><i class="fa fa-check"></i><b>10.2</b> Rad sa znakovnim nizovima</a><ul>
<li class="chapter" data-level="10.2.1" data-path="datumi.html"><a href="datumi.html#analiza-teksta-i-regularni-izrazi"><i class="fa fa-check"></i><b>10.2.1</b> Analiza teksta i regularni izrazi</a></li>
<li class="chapter" data-level="10.2.2" data-path="datumi.html"><a href="datumi.html#paket-stringr"><i class="fa fa-check"></i><b>10.2.2</b> Paket <code>stringr</code></a></li>
</ul></li>
<li class="chapter" data-level="" data-path="datumi.html"><a href="datumi.html#zadaci-za-vjezbu-8"><i class="fa fa-check"></i>Zadaci za vježbu</a></li>
</ul></li>
<li class="chapter" data-level="11" data-path="prilagodba-podatkovnih-skupova-uz-paket-dplyr.html"><a href="prilagodba-podatkovnih-skupova-uz-paket-dplyr.html"><i class="fa fa-check"></i><b>11</b> Prilagodba podatkovnih skupova uz paket <code>dplyr</code></a><ul>
<li class="chapter" data-level="11.1" data-path="prilagodba-podatkovnih-skupova-uz-paket-dplyr.html"><a href="prilagodba-podatkovnih-skupova-uz-paket-dplyr.html#ogledni-podatkovni-skup-titanic"><i class="fa fa-check"></i><b>11.1</b> Ogledni podatkovni skup: <em>Titanic</em></a></li>
<li class="chapter" data-level="11.2" data-path="prilagodba-podatkovnih-skupova-uz-paket-dplyr.html"><a href="prilagodba-podatkovnih-skupova-uz-paket-dplyr.html#stvaranje-podskupa-obzervacija-uz-filter-i-slice"><i class="fa fa-check"></i><b>11.2</b> Stvaranje podskupa obzervacija uz <code>filter</code> i <code>slice</code></a></li>
<li class="chapter" data-level="11.3" data-path="prilagodba-podatkovnih-skupova-uz-paket-dplyr.html"><a href="prilagodba-podatkovnih-skupova-uz-paket-dplyr.html#stvaranje-podskupa-varijabli-uz-select"><i class="fa fa-check"></i><b>11.3</b> Stvaranje podskupa varijabli uz <code>select</code></a></li>
<li class="chapter" data-level="11.4" data-path="prilagodba-podatkovnih-skupova-uz-paket-dplyr.html"><a href="prilagodba-podatkovnih-skupova-uz-paket-dplyr.html#stvaranje-novih-stupaca-uz-mutate"><i class="fa fa-check"></i><b>11.4</b> Stvaranje novih stupaca uz <code>mutate</code></a></li>
<li class="chapter" data-level="11.5" data-path="prilagodba-podatkovnih-skupova-uz-paket-dplyr.html"><a href="prilagodba-podatkovnih-skupova-uz-paket-dplyr.html#ogledni-podatkovni-skup-houston-flights"><i class="fa fa-check"></i><b>11.5</b> Ogledni podatkovni skup: <em>Houston flights</em></a></li>
<li class="chapter" data-level="11.6" data-path="prilagodba-podatkovnih-skupova-uz-paket-dplyr.html"><a href="prilagodba-podatkovnih-skupova-uz-paket-dplyr.html#grupiranje-i-agregacija-uz-group_by-i-summarise"><i class="fa fa-check"></i><b>11.6</b> Grupiranje i agregacija uz <code>group_by</code> i <code>summarise</code></a></li>
<li class="chapter" data-level="11.7" data-path="prilagodba-podatkovnih-skupova-uz-paket-dplyr.html"><a href="prilagodba-podatkovnih-skupova-uz-paket-dplyr.html#spajanje-podatkovnih-okvira-uz-join-funkcije"><i class="fa fa-check"></i><b>11.7</b> Spajanje podatkovnih okvira uz join funkcije</a></li>
<li class="chapter" data-level="11.8" data-path="prilagodba-podatkovnih-skupova-uz-paket-dplyr.html"><a href="prilagodba-podatkovnih-skupova-uz-paket-dplyr.html#integracija-sa-relacijskim-bazama-podataka"><i class="fa fa-check"></i><b>11.8</b> Integracija sa relacijskim bazama podataka</a></li>
<li class="chapter" data-level="" data-path="prilagodba-podatkovnih-skupova-uz-paket-dplyr.html"><a href="prilagodba-podatkovnih-skupova-uz-paket-dplyr.html#zadaci-za-vjezbu-9"><i class="fa fa-check"></i>Zadaci za vježbu</a></li>
</ul></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Programirajmo u R-u</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="datumi" class="section level1">
<h1><span class="header-section-number">10</span> Rad sa datumima i znakovnim nizovima</h1>
<hr />
<div id="rad-sa-datumima" class="section level2">
<h2><span class="header-section-number">10.1</span> Rad sa datumima</h2>
<p>Upravljanje datumima i vremenskim oznakama uvijek predstavlja izazov kod rada sa podatkovnim skupovima budući da moramo voditi računa o stvarima kao što su:</p>
<ul>
<li>različiti oblici prikaza datuma i vremena</li>
<li>različite interne reprezentacije</li>
<li>različite vremenske zone</li>
<li>razlika između matematičkog i kalendarskog poimanja vremenskih perioda</li>
</ul>
<p>Jedan od češće korištenih standarda je tzv “unix vrijeme” (ili “POSIX vrijeme”) koja vrijeme računa kao broj sekundi protekao od ponoći 1. siječnja 1970. UTC (<em>Coordinated Universal Time</em>). Ne koriste svi informacijski sustavi POSIX vrijeme; npr. Microsoft Excel ima svoj format gdje broji dane od 1.1.1900., a onda za određeni dan broj sati, minuta i sekundi protekao od ponoći.</p>
<p>Programski jezik R ima tri klase za upravljanje datumima / vremenskim oznakama:</p>
<ul>
<li><code>Date</code> za prikaz datuma</li>
<li><code>POSIXct</code> za kompaktni prikaz vremenske oznake</li>
<li><code>POSIXlt</code> za “dugi” prikaz vremenske oznake (u obliku liste)</li>
</ul>
<div id="klasa-date" class="section level3">
<h3><span class="header-section-number">10.1.1</span> Klasa <code>Date</code></h3>
<p>Klasu Date koristimo kada nas zanima datum ali ne i vrijeme neke obzervacije ili poslovnog događaja. Ova klasa nema svoj konstruktor, već objekte ovog tipa (najčešće) stvaramo uz pomoć sljedećih funkcija:</p>
<ul>
<li><code>Sys.Date()</code> koja vraća današnji datum</li>
<li><code>as.Date()</code> kojoj kao parametar prosljeđujemo znakovni niz koji reprezentira datum</li>
</ul>
<p>Funkcija <code>as.Date()</code> po <em>default</em>-u prihvaća datume oblika <code>%Y-%m-%d</code>, gdje <code>%Y</code> predstavlja četveroznamenkastu godinu a <code>%m</code> i <code>%d</code> dvoznamenkasti mjesec i dan. Ukoliko želimo interpretirati datum koji je zapisan u nekom drugom obliku onda moramo funkciji dodati parametar format koji će parametarski opisati oblik kojeg koristimo (npr. za <code>28/10/1978</code> bi vrijednost parametra format trebala biti <code>%d/%m/%Y</code>). Sve moguće oblikovne specifikacije mogu se pogledati uz pomoć naredbe <code>?strptime</code> iako, kao što ćemo se uvjeriti kasnije, jednostavnija metoda jest koristiti se funkcijama paketa <code>lubridate</code>.</p>
<hr />
<p><strong>Zadatak 10.1 - klasa <code>Date</code></strong></p>
<div class="sourceCode" id="cb369"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb369-1" data-line-number="1"><span class="co"># ispišite današnji datum</span></a>
<a class="sourceLine" id="cb369-2" data-line-number="2"></a>
<a class="sourceLine" id="cb369-3" data-line-number="3"><span class="co"># pretvorite sljedeće znakovne nizove u objekt tipa `Date` i ispišite rezultat na zaslon:</span></a>
<a class="sourceLine" id="cb369-4" data-line-number="4"><span class="co"># &#39;1986-12-27&#39;,&#39;2016-31-05&#39;, &#39;17. 10. 2015.&#39;, &#39;01#01#2001&#39;</span></a></code></pre></div>
<div class="fold s o">
<div class="sourceCode" id="cb370"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb370-1" data-line-number="1"><span class="co"># ispišite današnji datum</span></a>
<a class="sourceLine" id="cb370-2" data-line-number="2"><span class="kw">Sys.Date</span>()</a>
<a class="sourceLine" id="cb370-3" data-line-number="3"></a>
<a class="sourceLine" id="cb370-4" data-line-number="4"><span class="co"># pretvorite sljedeće znakovne nizove u objekt tipa `Date` i ispišite rezultat na zaslon:</span></a>
<a class="sourceLine" id="cb370-5" data-line-number="5"><span class="co"># &#39;1986-12-27&#39;,&#39;2016-31-05&#39;, &#39;17. 10. 2015.&#39;, &#39;01#01#2001&#39;</span></a>
<a class="sourceLine" id="cb370-6" data-line-number="6"><span class="kw">as.Date</span>(<span class="st">&#39;1986-12-27&#39;</span>)</a>
<a class="sourceLine" id="cb370-7" data-line-number="7"><span class="kw">as.Date</span>(<span class="st">&#39;2016-31-05&#39;</span>, <span class="dt">format =</span> <span class="st">&#39;%Y-%d-%m&#39;</span>)</a>
<a class="sourceLine" id="cb370-8" data-line-number="8"><span class="kw">as.Date</span>(<span class="st">&#39;17. 10. 2015.&#39;</span>,  <span class="dt">format =</span> <span class="st">&#39;%d. %m. %Y&#39;</span>)</a>
<a class="sourceLine" id="cb370-9" data-line-number="9"><span class="kw">as.Date</span>(<span class="st">&#39;01#01#2001&#39;</span>, <span class="dt">format =</span> <span class="st">&#39;%d#%m#%Y&#39;</span>)</a></code></pre></div>
<pre><code>## [1] &quot;2018-12-11&quot;
## [1] &quot;1986-12-27&quot;
## [1] &quot;2016-05-31&quot;
## [1] &quot;2015-10-17&quot;
## [1] &quot;2001-01-01&quot;</code></pre>
</div>
<hr />
<p>Sa datumima možemo raditi jednostavne računske operacije kao što je dodavanje i oduzimanje dana (koristimo operatore + i - i cijele brojeve) ili razliku u danima između dva datuma (operator -).</p>
<hr />
<p><strong>Zadatak 10.2 - aritmetika s datumima</strong></p>
<div class="sourceCode" id="cb372"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb372-1" data-line-number="1"><span class="co"># ispišite koji je datum bio 1000 dana prije današnjeg datuma</span></a>
<a class="sourceLine" id="cb372-2" data-line-number="2"></a>
<a class="sourceLine" id="cb372-3" data-line-number="3"><span class="co"># dodajte jedan dan datumima 28.2.2015. i 28.2.2016 i ispišite rezultat</span></a>
<a class="sourceLine" id="cb372-4" data-line-number="4"></a>
<a class="sourceLine" id="cb372-5" data-line-number="5"><span class="co"># ispišite koliko je dana prošlo od 1.1.2000. do danas</span></a></code></pre></div>
<div class="fold s o">
<div class="sourceCode" id="cb373"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb373-1" data-line-number="1"><span class="co"># ispišite koji je datum bio 1000 dana prije današnjeg datuma</span></a>
<a class="sourceLine" id="cb373-2" data-line-number="2"><span class="kw">Sys.Date</span>() <span class="op">-</span><span class="st"> </span><span class="dv">1000</span></a>
<a class="sourceLine" id="cb373-3" data-line-number="3"></a>
<a class="sourceLine" id="cb373-4" data-line-number="4"><span class="co"># dodajte jedan dan datumima 28.2.2015. i 28.2.2016 i ispišite rezultat</span></a>
<a class="sourceLine" id="cb373-5" data-line-number="5"><span class="kw">as.Date</span>(<span class="st">&#39;2015-02-28&#39;</span>) <span class="op">+</span><span class="st"> </span><span class="dv">1</span></a>
<a class="sourceLine" id="cb373-6" data-line-number="6"><span class="kw">as.Date</span>(<span class="st">&#39;2016-02-28&#39;</span>) <span class="op">+</span><span class="st"> </span><span class="dv">1</span></a>
<a class="sourceLine" id="cb373-7" data-line-number="7"></a>
<a class="sourceLine" id="cb373-8" data-line-number="8"><span class="co"># ispišite koliko je dana prošlo od 1.1.2000. do danas</span></a>
<a class="sourceLine" id="cb373-9" data-line-number="9"><span class="kw">Sys.Date</span>() <span class="op">-</span><span class="st"> </span><span class="kw">as.Date</span>(<span class="st">&#39;2000-01-01&#39;</span>)</a></code></pre></div>
<pre><code>## [1] &quot;2016-03-16&quot;
## [1] &quot;2015-03-01&quot;
## [1] &quot;2016-02-29&quot;
## Time difference of 6919 days</code></pre>
</div>
<hr />
<p>Zadnji izraz će zapravo rezultirati objektom klase <code>difftime</code> koja označava vremenski interval. Ispis koristi tzv. “automatski” odabir jedinice (konkretno, parametar <code>units</code> postavljen na <code>&quot;auto&quot;</code>) koji će pokušati odabrati najprikladniju vremensku jedinicu za ispis. Ukoliko želimo eksplicitno odabrati koju vremensku jedinicu želimo (sekunde, minute, sate, dane ili tjedne) onda možemo umjesto operatora <code>-</code> koristiti funkciju <code>difftime</code> uz parametar <code>units</code> postavljen na znakovni niz odabrane vremenski jedinice (<code>&quot;seconds&quot;</code>, <code>&quot;minutes&quot;</code>, itd.).</p>
<hr />
<p><strong>Zadatak 10.3 - funkcija <code>difftime</code></strong></p>
<div class="sourceCode" id="cb375"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb375-1" data-line-number="1"><span class="co"># Koliko je prošlo tjedana između 1.3.2016. i 1.3.2015.?</span></a>
<a class="sourceLine" id="cb375-2" data-line-number="2"><span class="co"># koristite funkciju `difftime`</span></a>
<a class="sourceLine" id="cb375-3" data-line-number="3"><span class="co"># NAPOMENA: ne morate eksplicitno pozvati funkciju `as.Date`, funkcija `difftime`</span></a>
<a class="sourceLine" id="cb375-4" data-line-number="4"><span class="co">#       će to sama učiniti ako pošaljete datum u default-nom obliku</span></a>
<a class="sourceLine" id="cb375-5" data-line-number="5"></a>
<a class="sourceLine" id="cb375-6" data-line-number="6"><span class="co"># koliko je prošlo sati od 1.3.2015. do danas?</span></a></code></pre></div>
<div class="fold s o">
<div class="sourceCode" id="cb376"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb376-1" data-line-number="1"><span class="co"># Koliko je prošlo tjedana između 1.3.2016. i 1.3.2015.?</span></a>
<a class="sourceLine" id="cb376-2" data-line-number="2"><span class="co"># koristite funkciju `difftime`</span></a>
<a class="sourceLine" id="cb376-3" data-line-number="3"><span class="co"># NAPOMENA: ne morate eksplicitno pozvati funkciju `as.Date`, funkcija `difftime`</span></a>
<a class="sourceLine" id="cb376-4" data-line-number="4"><span class="co">#       će to sama učiniti ako pošaljete datum u default-nom obliku</span></a>
<a class="sourceLine" id="cb376-5" data-line-number="5"><span class="kw">difftime</span>(<span class="st">&#39;2016-03-01&#39;</span>, <span class="st">&#39;2015-03-01&#39;</span>, <span class="dt">units =</span> <span class="st">&quot;weeks&quot;</span>)</a>
<a class="sourceLine" id="cb376-6" data-line-number="6"></a>
<a class="sourceLine" id="cb376-7" data-line-number="7"><span class="co"># koliko je prošlo sati od 1.3.2015. do danas?</span></a>
<a class="sourceLine" id="cb376-8" data-line-number="8"><span class="kw">difftime</span>(<span class="kw">Sys.Date</span>(), <span class="st">&#39;2015-03-01&#39;</span>, <span class="dt">units =</span> <span class="st">&quot;hours&quot;</span>)</a></code></pre></div>
<pre><code>## Time difference of 52.28571 weeks
## Time difference of 33145 hours</code></pre>
</div>
<hr />
<p>Funkcija <code>difftime</code> zapravo radi i sa vremenskim oznakama, tj. ne moramo nužno raditi na razini datuma, već se možemo spustiti do razine sekunde. Ovo ćemo isprobati kada naučimo klasu <code>POSIXct</code> u nastavku. Isto tako, ako nam treba samo broj (sekundi, sati, dana i sl.), lako transformiramo izlaz u cijeli broj uz pomoć funkcije <code>as.numeric</code>.</p>
<p>Jezik R implementira i posebnu varijantu funkcije <code>seq</code> za rad sa datumima koja ima sljedeći potpis:</p>
<div class="sourceCode" id="cb378"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb378-1" data-line-number="1"><span class="kw">seq</span>(from, to, by, <span class="dt">length.out =</span> <span class="ot">NULL</span>, <span class="dt">along.with =</span> <span class="ot">NULL</span>, ...)</a></code></pre></div>
<p>Parametri ove funkcije su sljedeći:</p>
<ul>
<li><code>from</code> - početni datum (obvezni parametar)</li>
<li><code>to</code> - konačni datum</li>
<li><code>by</code> - korak sekvence u danima ili znakovni niz tipa <code>&quot;7 days&quot;</code>, <code>&quot;2 weeks&quot;</code> i sl. (za sve mogućnosti pogledati dokumentaciju!)</li>
<li><code>length.out</code> - duljina sekvence</li>
<li><code>along.with</code> - vektor čiju duljinu uzimamo za referencu</li>
</ul>
<p>Isprobajmo ovu funkciju.</p>
<hr />
<p><strong>Zadatak 10.4 - funkcija <code>seq</code> i datumi</strong></p>
<div class="sourceCode" id="cb379"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb379-1" data-line-number="1"><span class="co"># ispišite sekvencu datuma od 1.1.2010. do 1.1.2030. u koracima od 6 mjeseci</span></a>
<a class="sourceLine" id="cb379-2" data-line-number="2"></a>
<a class="sourceLine" id="cb379-3" data-line-number="3"></a>
<a class="sourceLine" id="cb379-4" data-line-number="4"><span class="co"># napravite raspored čišćenja zajedničkih prostora za stambenu zgradu</span></a>
<a class="sourceLine" id="cb379-5" data-line-number="5"><span class="co"># prostori se moraju čistiti svaka 3 tjedna</span></a>
<a class="sourceLine" id="cb379-6" data-line-number="6"><span class="co"># svaki stan mora imati svoj datum čišćenja</span></a>
<a class="sourceLine" id="cb379-7" data-line-number="7"></a>
<a class="sourceLine" id="cb379-8" data-line-number="8"><span class="co"># stanovi su opisani sljedećim podatkovnim okvirom</span></a>
<a class="sourceLine" id="cb379-9" data-line-number="9">stanovi &lt;-<span class="st"> </span><span class="kw">data.frame</span>(<span class="dt">broj_stana =</span> <span class="dv">1</span><span class="op">:</span><span class="dv">10</span>,</a>
<a class="sourceLine" id="cb379-10" data-line-number="10">                      <span class="dt">prezime =</span> <span class="kw">c</span>(<span class="st">&quot;Ebert&quot;</span>, <span class="st">&quot;Ladovac&quot;</span>, <span class="st">&quot;Cerić&quot;</span>, <span class="st">&quot;Dikla&quot;</span>, <span class="st">&quot;Anić&quot;</span>,</a>
<a class="sourceLine" id="cb379-11" data-line-number="11">                                  <span class="st">&quot;Perić&quot;</span>, <span class="st">&quot;Žužić&quot;, &quot;</span>Babić<span class="st">&quot;, &quot;</span>Ibiz<span class="st">&quot;, &quot;</span>Radler<span class="st">&quot;))</span></a>
<a class="sourceLine" id="cb379-12" data-line-number="12"></a>
<a class="sourceLine" id="cb379-13" data-line-number="13"><span class="st"># dodajte stupac `ciscenje` sa po jednim datumom za svaki pojedini stan </span></a>
<a class="sourceLine" id="cb379-14" data-line-number="14"><span class="st"># redom po brojevima stana, počevši od današnjeg datuma</span></a>
<a class="sourceLine" id="cb379-15" data-line-number="15"></a>
<a class="sourceLine" id="cb379-16" data-line-number="16"></a>
<a class="sourceLine" id="cb379-17" data-line-number="17"><span class="st"># ispišite podatkovni okvir `stanovi` (koristite `print` </span></a>
<a class="sourceLine" id="cb379-18" data-line-number="18"><span class="st"># ili pretvorite datume u znakovni stupac)</span></a></code></pre></div>
<div class="fold s o">
<div class="sourceCode" id="cb380"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb380-1" data-line-number="1"><span class="kw">seq</span>(<span class="kw">as.Date</span>(<span class="st">&#39;2010-01-01&#39;</span>), <span class="kw">as.Date</span>(<span class="st">&#39;2030-01-01&#39;</span>), <span class="dt">by =</span> <span class="st">&quot;6 months&quot;</span>)</a>
<a class="sourceLine" id="cb380-2" data-line-number="2"></a>
<a class="sourceLine" id="cb380-3" data-line-number="3"><span class="kw">seq</span>(<span class="kw">Sys.Date</span>(), <span class="dt">by =</span> <span class="st">&quot;3 weeks&quot;</span>, </a>
<a class="sourceLine" id="cb380-4" data-line-number="4">    <span class="dt">along.with =</span> stanovi<span class="op">$</span>broj_stana) -&gt;<span class="st"> </span>stanovi<span class="op">$</span>ciscenje</a>
<a class="sourceLine" id="cb380-5" data-line-number="5"></a>
<a class="sourceLine" id="cb380-6" data-line-number="6">stanovi</a></code></pre></div>
<pre><code>##  [1] &quot;2010-01-01&quot; &quot;2010-07-01&quot; &quot;2011-01-01&quot; &quot;2011-07-01&quot; &quot;2012-01-01&quot;
##  [6] &quot;2012-07-01&quot; &quot;2013-01-01&quot; &quot;2013-07-01&quot; &quot;2014-01-01&quot; &quot;2014-07-01&quot;
## [11] &quot;2015-01-01&quot; &quot;2015-07-01&quot; &quot;2016-01-01&quot; &quot;2016-07-01&quot; &quot;2017-01-01&quot;
## [16] &quot;2017-07-01&quot; &quot;2018-01-01&quot; &quot;2018-07-01&quot; &quot;2019-01-01&quot; &quot;2019-07-01&quot;
## [21] &quot;2020-01-01&quot; &quot;2020-07-01&quot; &quot;2021-01-01&quot; &quot;2021-07-01&quot; &quot;2022-01-01&quot;
## [26] &quot;2022-07-01&quot; &quot;2023-01-01&quot; &quot;2023-07-01&quot; &quot;2024-01-01&quot; &quot;2024-07-01&quot;
## [31] &quot;2025-01-01&quot; &quot;2025-07-01&quot; &quot;2026-01-01&quot; &quot;2026-07-01&quot; &quot;2027-01-01&quot;
## [36] &quot;2027-07-01&quot; &quot;2028-01-01&quot; &quot;2028-07-01&quot; &quot;2029-01-01&quot; &quot;2029-07-01&quot;
## [41] &quot;2030-01-01&quot;
##    broj_stana prezime   ciscenje
## 1           1   Ebert 2018-12-11
## 2           2 Ladovac 2019-01-01
## 3           3   Ceric 2019-01-22
## 4           4   Dikla 2019-02-12
## 5           5    Anic 2019-03-05
## 6           6   Peric 2019-03-26
## 7           7   Žužic 2019-04-16
## 8           8   Babic 2019-05-07
## 9           9    Ibiz 2019-05-28
## 10         10  Radler 2019-06-18</code></pre>
</div>
<hr />
</div>
<div id="klase-posixct-i-posixlt" class="section level3">
<h3><span class="header-section-number">10.1.2</span> Klase <code>POSIXct</code> i <code>POSIXlt</code></h3>
<p>Klasa <code>POSIXct</code> nam je pogodna kada nam nije dosta samo pohraniti datum, već moramo znati i točno vrijeme za neku obzervaciju ili poslovni događaj. Objekt ove klase najčešće stvaramo uz pomoć sljedećih funkcija:</p>
<ul>
<li><code>Sys.time()</code> koja vraća trenutnu vremensku oznaku uzimajući u obzir postavljenu vremensku zonu</li>
<li><code>as.POSIXct()</code> kojoj kao parametar prosljeđujemo znakovni niz koji predstavlja datum i vrijeme</li>
</ul>
<p>Funkcija <code>as.POSIXct()</code> kao parametar očekuje vremensku oznaku tipa <code>%Y-%m-%d %H:%M:%S</code> gdje su prve tri oblikovne specifikacije istovjetne već poznatoj specifikaciji datuma, dok <code>%H</code>, <code>%M</code> i <code>%S</code> predstavljaju dvoznamenkaste sate, minute i sekunde (gleda se 24-satni oblik prikaza vremena). Za parsiranje drugih oblika vremenskih oznaka potrebno je - kao i kod klase <code>Date</code> - dodati parametar format sa oblikovnom specifikacijom kako intepretirati zadani znakovni niz. Opet, za popis svih parametara nam pomaže poziv <code>?strptime</code>, iako je u praksi poželjna opcija za lakši rad proučiti paket <code>lubridate</code> kojeg ćemo raditi kasnije. Funkciji <code>as.POSIXct</code> možemo dodati i parametar <code>tz</code> postavljen na znakovni niz koji definira vremensku zonu.</p>
<hr />
<p><strong>Zadatak 10.5 - klasa <code>POSIXct</code></strong></p>
<div class="sourceCode" id="cb382"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb382-1" data-line-number="1"><span class="co"># ispišite trenutni datum i  vrijeme</span></a>
<a class="sourceLine" id="cb382-2" data-line-number="2"></a>
<a class="sourceLine" id="cb382-3" data-line-number="3"><span class="co"># pretvorite sljedeće znakovne nizove u vremenske oznake i ispišite ih na zaslon:</span></a>
<a class="sourceLine" id="cb382-4" data-line-number="4"><span class="co"># &quot;2015-10-28 15:30:42&quot;</span></a>
<a class="sourceLine" id="cb382-5" data-line-number="5"><span class="co"># &quot;01-12-2001 14:30&quot;   &lt;-- oznaka očitana u New York-u, SAD, vremenska zona EST</span></a></code></pre></div>
<div class="fold s o">
<div class="sourceCode" id="cb383"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb383-1" data-line-number="1"><span class="co"># ispišite trenutni datum i  vrijeme</span></a>
<a class="sourceLine" id="cb383-2" data-line-number="2"><span class="kw">Sys.time</span>()</a>
<a class="sourceLine" id="cb383-3" data-line-number="3"></a>
<a class="sourceLine" id="cb383-4" data-line-number="4"><span class="co"># pretvorite sljedeće znakovne nizove u vremenske oznake i ispišite ih na zaslon:</span></a>
<a class="sourceLine" id="cb383-5" data-line-number="5"><span class="co"># &quot;2015-10-28 15:30:42&quot;</span></a>
<a class="sourceLine" id="cb383-6" data-line-number="6"><span class="co"># &quot;01-12-2001 14:30&quot;   &lt;-- oznaka očitana u New York-u, SAD, vremenska zona EST</span></a>
<a class="sourceLine" id="cb383-7" data-line-number="7"><span class="kw">as.POSIXct</span>(<span class="st">&quot;2015-10-28 15:30:42&quot;</span>)</a>
<a class="sourceLine" id="cb383-8" data-line-number="8"><span class="kw">as.POSIXct</span>(<span class="st">&quot;01-12-2001 14:30&quot;</span>, <span class="dt">tz =</span> <span class="st">&quot;EST&quot;</span>, <span class="dt">format =</span> <span class="st">&quot;%d-%m-%Y %H:%M&quot;</span>)</a></code></pre></div>
<pre><code>## [1] &quot;2018-12-11 11:08:03 CET&quot;
## [1] &quot;2015-10-28 15:30:42 CET&quot;
## [1] &quot;2001-12-01 14:30:00 EST&quot;</code></pre>
</div>
<hr />
<p>Imena vremenskih zona su standardizirana (tzv. “Olsonove vremenske zone”) a dohvaćaju se uz pomoć operativnog sustava a možemo ih ispisati uz pomoć funkcije <code>OlsonNames()</code>. Trenutnu vremensku zonu platforme možemo ispisati uz pomoć funkcije <code>Sys.timezone()</code>.</p>
<hr />
<p><strong>Zadatak 10.6 - vremenske zone</strong></p>
<div class="sourceCode" id="cb385"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb385-1" data-line-number="1"><span class="co"># ispišite trenutnu vremensku zonu</span></a>
<a class="sourceLine" id="cb385-2" data-line-number="2"></a>
<a class="sourceLine" id="cb385-3" data-line-number="3"><span class="co"># ispišite 10 nasumično odabranih oznaka vremenskih zona instaliranih na trenutnoj platformi</span></a></code></pre></div>
<div class="fold s o">
<div class="sourceCode" id="cb386"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb386-1" data-line-number="1"><span class="co"># ispišite trenutnu vremensku zonu</span></a>
<a class="sourceLine" id="cb386-2" data-line-number="2"><span class="kw">Sys.timezone</span>()</a>
<a class="sourceLine" id="cb386-3" data-line-number="3"></a>
<a class="sourceLine" id="cb386-4" data-line-number="4"><span class="co"># ispišite 10 nasumično odabranih oznaka vremenskih zona instaliranih na trenutnoj platformi</span></a>
<a class="sourceLine" id="cb386-5" data-line-number="5"><span class="kw">sample</span>(<span class="kw">OlsonNames</span>(), <span class="dv">10</span>)</a></code></pre></div>
<pre><code>## [1] &quot;Europe/Warsaw&quot;
##  [1] &quot;Pacific/Kosrae&quot;       &quot;America/Havana&quot;       &quot;Asia/Aqtau&quot;          
##  [4] &quot;Africa/Timbuktu&quot;      &quot;Israel&quot;               &quot;America/Campo_Grande&quot;
##  [7] &quot;Asia/Hong_Kong&quot;       &quot;Pacific/Johnston&quot;     &quot;Asia/Tashkent&quot;       
## [10] &quot;Etc/GMT-2&quot;</code></pre>
</div>
<hr />
<p>Vremenske oznake također mogu koristiti operatore <code>+</code> i <code>-</code> uz cjelobrojne vrijednosti kao drugi operand pri čemu se od vremenske oznake oduzimaju ili dodaju sekunde. Isto tako, možemo oduzimati dvije vremenske oznake kako bi dobili razliku u sekundama, ili koristiti funkciju <code>difftime</code> sa odabranom vrijednosti vremenske jedinice.</p>
<hr />
<p><strong>Zadatak 10.7 - aritmetika sa vremenskim oznakama</strong></p>
<div class="sourceCode" id="cb388"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb388-1" data-line-number="1"><span class="co"># ispišite koje će biti vrijeme 1000 sekundi od ovog trenutka</span></a>
<a class="sourceLine" id="cb388-2" data-line-number="2"></a>
<a class="sourceLine" id="cb388-3" data-line-number="3"><span class="co"># ispišite koliko je prošlo sati od ponoći 1.1.2015. do sad</span></a></code></pre></div>
<div class="fold s o">
<div class="sourceCode" id="cb389"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb389-1" data-line-number="1"><span class="co"># ispišite koje će biti vrijeme 1000 sekundi od ovog trenutka</span></a>
<a class="sourceLine" id="cb389-2" data-line-number="2"><span class="kw">Sys.time</span>() <span class="op">+</span><span class="st"> </span><span class="dv">1000</span></a>
<a class="sourceLine" id="cb389-3" data-line-number="3"></a>
<a class="sourceLine" id="cb389-4" data-line-number="4"><span class="co"># ispišite koliko je prošlo sati od ponoći 1.1.2015. do sad</span></a>
<a class="sourceLine" id="cb389-5" data-line-number="5"><span class="kw">difftime</span>(<span class="kw">Sys.time</span>(), <span class="st">&quot;2015-01-01 00:00:00&quot;</span>, <span class="dt">units =</span> <span class="st">&quot;hours&quot;</span>)</a></code></pre></div>
<pre><code>## [1] &quot;2018-12-11 11:24:44 CET&quot;
## Time difference of 34571.13 hours</code></pre>
</div>
<hr />
<p>Klasa <code>POSIXlt</code> se ponaša isto kao i <code>POSIXct</code> (za stvaranje se koristimo funkcijom <code>as.POSIXlt</code>), no zapravo se radi o listi koja nam omogućuje jednostavno izvlačenje određenih parametara iz vremenske oznake, kao što su broj sekundi, broj minuta, dan u tjednu i sl. Sve elemente liste lako možemo vidjeti ako napravimo <code>POSIXlt</code> objekt i onda pozovemo funkciju <code>unclass</code> nad njim, pri čemu će se on pretvoriti u “običnu” listu. Možemo ići i korak dalje - ako listu ubacimo u funkciju <code>unlist</code>, kao rezultat dobivamo obični znakovni vektor.</p>
<hr />
<p><strong>Zadatak 10.8 - klasa <code>POSIXlt</code></strong></p>
<div class="sourceCode" id="cb391"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb391-1" data-line-number="1"><span class="co"># pretvorite sljedeći znakovni niz u vremensku oznaku tipa `POSIXlt`</span></a>
<a class="sourceLine" id="cb391-2" data-line-number="2"><span class="co"># pohranite rezultat u varijablu `t_long`</span></a>
<a class="sourceLine" id="cb391-3" data-line-number="3"><span class="co"># &quot;1.5.2013 13:35&quot;</span></a>
<a class="sourceLine" id="cb391-4" data-line-number="4"></a>
<a class="sourceLine" id="cb391-5" data-line-number="5"><span class="co"># ispišite broj sati i broj minuta vremenske oznake `t_long`</span></a>
<a class="sourceLine" id="cb391-6" data-line-number="6"><span class="co"># ispisom njenih elemenata naziva `hour` i `min`</span></a>
<a class="sourceLine" id="cb391-7" data-line-number="7"></a>
<a class="sourceLine" id="cb391-8" data-line-number="8"><span class="co"># uklonite klasu i svojstvo liste varijable `t_long` </span></a>
<a class="sourceLine" id="cb391-9" data-line-number="9"><span class="co"># i ispišite ju na zaslon</span></a></code></pre></div>
<div class="fold s o">
<div class="sourceCode" id="cb392"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb392-1" data-line-number="1"><span class="co"># pretvorite sljedeći znakovni niz u vremensku oznaku tipa `POSIXlt`</span></a>
<a class="sourceLine" id="cb392-2" data-line-number="2"><span class="co"># pohranite rezultat u varijablu `t_long`</span></a>
<a class="sourceLine" id="cb392-3" data-line-number="3"><span class="co"># &quot;1.5.2013 13:35&quot;</span></a>
<a class="sourceLine" id="cb392-4" data-line-number="4">t_long &lt;-<span class="st"> </span><span class="kw">as.POSIXlt</span>(<span class="st">&quot;1.5.2013 13:35&quot;</span>, <span class="dt">format =</span> <span class="st">&quot;%d.%m.%Y %H:%M&quot;</span>)</a>
<a class="sourceLine" id="cb392-5" data-line-number="5"></a>
<a class="sourceLine" id="cb392-6" data-line-number="6"><span class="co"># ispišite broj sati i broj minuta vremenske oznake `t_long`</span></a>
<a class="sourceLine" id="cb392-7" data-line-number="7"><span class="co"># ispisom njenih elemenata naziva `hour` i `min`</span></a>
<a class="sourceLine" id="cb392-8" data-line-number="8">t_long<span class="op">$</span>hour</a>
<a class="sourceLine" id="cb392-9" data-line-number="9">t_long<span class="op">$</span>min</a>
<a class="sourceLine" id="cb392-10" data-line-number="10"></a>
<a class="sourceLine" id="cb392-11" data-line-number="11"><span class="co">#  uklonite klasu i svojstvo liste varijable `t_long` </span></a>
<a class="sourceLine" id="cb392-12" data-line-number="12"><span class="co"># i ispišite ju na zaslon</span></a>
<a class="sourceLine" id="cb392-13" data-line-number="13">t_long <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">unclass</span>() <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">unlist</span>()</a></code></pre></div>
<pre><code>## [1] 13
## [1] 35
##    sec    min   hour   mday    mon   year   wday   yday  isdst   zone 
##    &quot;0&quot;   &quot;35&quot;   &quot;13&quot;    &quot;1&quot;    &quot;4&quot;  &quot;113&quot;    &quot;3&quot;  &quot;120&quot;    &quot;1&quot; &quot;CEST&quot; 
## gmtoff 
##     NA</code></pre>
</div>
<hr />
</div>
<div id="paket-lubridate" class="section level3">
<h3><span class="header-section-number">10.1.3</span> Paket <code>lubridate</code></h3>
<p>Iako jezik R ima relativno dobru podršku za rad sa datumima i vremenskim oznakama, upravljanje istima možemo učiniti znatno učinkovitijim uz paket <code>lubridate</code>. Ukoliko analiziramo podatke gdje je vremenska komponenta jako bitna, ili upravljamo podatkovnim skupovima koji koriste različite oblike zapisa datuma i vremenskih oznaka, onda si proces analize uvelike olakšavamo i ubrzavamo korištenjem funkcija iz ovog paketa.</p>
<p>Jedna od stvari koja je možda najkorisnija programerima koji ne vole pisati oblikovne specifikacije za parsiranje datuma je porodica funkcija za parsiranje datuma čija imena odgovaraju okvirnom izgledu zapisa kojeg želimo parsirati. Npr. funkcija imena <code>ymd</code> zna parsirati znakovne nizove u kojima je datum zapisan redoslijedom <em>godina-mjesec-dan</em>. Funkcija je dovoljno “pametna” da sama interpretira pojedinosti oko zapisa, kao što su delimiteri, znakovna polja i sl. Ukoliko zapis ima drugi raspored dana, mjeseca i godine, potrebno je samo adekvatno razmjestiti slova u nazivu funkcije.</p>
<hr />
<p><strong>Zadatak 10.9 - funkcije paketa <code>lubridate</code> za parsiranje datuma</strong></p>
<div class="sourceCode" id="cb394"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb394-1" data-line-number="1"><span class="co"># library(lubridate)   #učitati ako je potrebno!</span></a>
<a class="sourceLine" id="cb394-2" data-line-number="2"></a>
<a class="sourceLine" id="cb394-3" data-line-number="3"><span class="co"># koristeći se funkcijama iz paketa `lubridate`</span></a>
<a class="sourceLine" id="cb394-4" data-line-number="4"><span class="co"># parsirajte  u datume i ispišite sljedeće znakovne nizove</span></a>
<a class="sourceLine" id="cb394-5" data-line-number="5"><span class="co">#  &quot;2016-07-31&quot;</span></a>
<a class="sourceLine" id="cb394-6" data-line-number="6"><span class="co">#  &quot;28.2.1983.&quot;</span></a>
<a class="sourceLine" id="cb394-7" data-line-number="7"><span class="co">#  &quot;07#31#1996&quot;</span></a>
<a class="sourceLine" id="cb394-8" data-line-number="8"><span class="co">#  &quot;20010830&quot;</span></a></code></pre></div>
<div class="fold s o">
<div class="sourceCode" id="cb395"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb395-1" data-line-number="1"><span class="co"># koristeći se funkcijama iz paketa `lubridate`</span></a>
<a class="sourceLine" id="cb395-2" data-line-number="2"><span class="co"># parsirajte  u datume i ispišite sljedeće znakovne nizove</span></a>
<a class="sourceLine" id="cb395-3" data-line-number="3"><span class="co">#  &quot;2016-07-31&quot;</span></a>
<a class="sourceLine" id="cb395-4" data-line-number="4"><span class="co">#  &quot;28.2.1983.&quot;</span></a>
<a class="sourceLine" id="cb395-5" data-line-number="5"><span class="co">#  &quot;07#31#1996&quot;</span></a>
<a class="sourceLine" id="cb395-6" data-line-number="6"><span class="co">#  &quot;20010830&quot;</span></a>
<a class="sourceLine" id="cb395-7" data-line-number="7"><span class="kw">ymd</span>(<span class="st">&quot;2016-07-31&quot;</span>)</a>
<a class="sourceLine" id="cb395-8" data-line-number="8"><span class="kw">dmy</span>(<span class="st">&quot;28.2.1983.&quot;</span>)</a>
<a class="sourceLine" id="cb395-9" data-line-number="9"><span class="kw">mdy</span>(<span class="st">&quot;07#31#1996&quot;</span>)</a>
<a class="sourceLine" id="cb395-10" data-line-number="10"><span class="kw">ymd</span>(<span class="st">&quot;20010830&quot;</span>)</a></code></pre></div>
<pre><code>## [1] &quot;2016-07-31&quot;
## [1] &quot;1983-02-28&quot;
## [1] &quot;1996-07-31&quot;
## [1] &quot;2001-08-30&quot;</code></pre>
</div>
<hr />
<p>Navedeni koncept može se koristiti i za vremenske oznake, samo imenu funkcije dodamo podcrtu i “specifikaciju” sati, minuta i sekundi (npr. <code>ymd_hms</code>).</p>
<hr />
<p><strong>Zadatak 10.10 - funkcije paketa <code>lubridate</code> za parsiranje vremenskih oznaka</strong></p>
<div class="sourceCode" id="cb397"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb397-1" data-line-number="1"><span class="co"># koristeći se funkcijama iz paketa `lubridate`</span></a>
<a class="sourceLine" id="cb397-2" data-line-number="2"><span class="co"># parsirajte u vremenske oznake i ispišite sljedeće znakovne nizove</span></a>
<a class="sourceLine" id="cb397-3" data-line-number="3"><span class="co"># &quot;17.5.1977. 10:15pm&quot;</span></a>
<a class="sourceLine" id="cb397-4" data-line-number="4"><span class="co"># &quot;20160429 10.05.17&quot;</span></a></code></pre></div>
<div class="fold s o">
<div class="sourceCode" id="cb398"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb398-1" data-line-number="1"><span class="co"># koristeći se funkcijama iz paketa `lubridate`</span></a>
<a class="sourceLine" id="cb398-2" data-line-number="2"><span class="co"># parsirajte u vremenske oznake i ispišite sljedeće znakovne nizove</span></a>
<a class="sourceLine" id="cb398-3" data-line-number="3"><span class="co"># &quot;17.5.1977. 10:15pm&quot;</span></a>
<a class="sourceLine" id="cb398-4" data-line-number="4"><span class="co"># &quot;20160429 10.05.17&quot;</span></a>
<a class="sourceLine" id="cb398-5" data-line-number="5"><span class="kw">dmy_hm</span>(<span class="st">&quot;17.5.1977. 10:15pm&quot;</span>)</a>
<a class="sourceLine" id="cb398-6" data-line-number="6"><span class="kw">ymd_hms</span>(<span class="st">&quot;20160429 10.05.17&quot;</span>)</a></code></pre></div>
<pre><code>## [1] &quot;1977-05-17 22:15:00 UTC&quot;
## [1] &quot;2016-04-29 10:05:17 UTC&quot;</code></pre>
</div>
<hr />
<p>Uočimo da ove funkcije uvijek za vremensku zonu postavljaju <code>UTC</code>. Ovo je namjerno napravljeno s ciljem da se motivira korištenje jedinstvene vremenske zone u podatkovnom skupu kojeg analiziramo. Ukoliko želimo, tijekom parsiranja možemo postaviti vremensku zonu uz pomoć parametra <code>tz</code>. Isto tako, kod već inicijaliziranih vremenskih oznaka možemo upravljati vremenskim zonama uz pomoć sljedećih funkcija</p>
<ul>
<li><code>force_tz</code> - “nameće” novu vremensku zonu tj. ostavlja iste vrijednosti vremenske oznake ali postavlja vremensku zonu koju definiramo</li>
<li><code>with_tz</code> - provodi transformaciju vremenske oznake u onu koja odgovara traženoj vremenskoj zoni</li>
</ul>
<div class="sourceCode" id="cb400"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb400-1" data-line-number="1">t &lt;-<span class="st"> </span><span class="kw">ymd_hms</span>(<span class="st">&quot;20161129 10.05.17&quot;</span>, <span class="dt">tz =</span> <span class="st">&quot;EST&quot;</span>)</a>
<a class="sourceLine" id="cb400-2" data-line-number="2">t</a>
<a class="sourceLine" id="cb400-3" data-line-number="3"></a>
<a class="sourceLine" id="cb400-4" data-line-number="4"><span class="kw">force_tz</span>(t, <span class="dt">tz =</span> <span class="st">&quot;CET&quot;</span>)</a>
<a class="sourceLine" id="cb400-5" data-line-number="5"><span class="kw">with_tz</span>(t, <span class="dt">tz =</span> <span class="st">&quot;CET&quot;</span>)</a></code></pre></div>
<pre><code>## [1] &quot;2016-11-29 10:05:17 EST&quot;
## [1] &quot;2016-11-29 10:05:17 CET&quot;
## [1] &quot;2016-11-29 16:05:17 CET&quot;</code></pre>
<hr />
<p>Paket <code>lubridate</code> također uvelike olakšava izvlačenje segmenata datuma i vremena iz vremenskih oznaka uz pomoć funkcija kao što su <code>year</code>, <code>week</code>, <code>month</code> i sl. Uz pomoć istih funkcija možemo lako i izmijeniti neku od komponenti vremena.</p>
<hr />
<p><strong>Zadatak 10.11 - izvlacenje elemenata vremenskih oznaka</strong></p>
<div class="sourceCode" id="cb402"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb402-1" data-line-number="1">x &lt;-<span class="st"> </span><span class="kw">dmy_hms</span>(<span class="st">&quot;19.7.1996. 16:15:27&quot;</span>)</a>
<a class="sourceLine" id="cb402-2" data-line-number="2"></a>
<a class="sourceLine" id="cb402-3" data-line-number="3"><span class="co"># iz gornje vremenske oznake izvucite i ispišite sate te potom minute</span></a>
<a class="sourceLine" id="cb402-4" data-line-number="4"></a>
<a class="sourceLine" id="cb402-5" data-line-number="5"><span class="co"># postavite godinu gornje vremenske oznake na 2011., a mjesec na lipanj</span></a>
<a class="sourceLine" id="cb402-6" data-line-number="6"></a>
<a class="sourceLine" id="cb402-7" data-line-number="7"><span class="co"># ispišite `x`</span></a></code></pre></div>
<div class="fold s o">
<div class="sourceCode" id="cb403"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb403-1" data-line-number="1">x &lt;-<span class="st"> </span><span class="kw">dmy_hms</span>(<span class="st">&quot;19.7.1996. 16:15:27&quot;</span>)</a>
<a class="sourceLine" id="cb403-2" data-line-number="2"></a>
<a class="sourceLine" id="cb403-3" data-line-number="3"><span class="co"># iz gornje vremenske oznake izvucite i ispišite sate te potom minute</span></a>
<a class="sourceLine" id="cb403-4" data-line-number="4"><span class="kw">hour</span>(x)</a>
<a class="sourceLine" id="cb403-5" data-line-number="5"><span class="kw">minute</span>(x)</a>
<a class="sourceLine" id="cb403-6" data-line-number="6"></a>
<a class="sourceLine" id="cb403-7" data-line-number="7"><span class="co"># postavite godinu gornje vremenske oznake na 2011., a mjesec na lipanj</span></a>
<a class="sourceLine" id="cb403-8" data-line-number="8"><span class="kw">year</span>(x) &lt;-<span class="st"> </span><span class="dv">2011</span></a>
<a class="sourceLine" id="cb403-9" data-line-number="9"><span class="kw">month</span>(x) &lt;-<span class="st"> </span><span class="dv">6</span></a>
<a class="sourceLine" id="cb403-10" data-line-number="10"></a>
<a class="sourceLine" id="cb403-11" data-line-number="11"><span class="co"># ispišite `x`</span></a>
<a class="sourceLine" id="cb403-12" data-line-number="12">x</a></code></pre></div>
<pre><code>## [1] 16
## [1] 15
## [1] &quot;2011-06-19 16:15:27 UTC&quot;</code></pre>
</div>
<hr />
<p>Za potpuni popis funkcija pogledajte dokumentaciju paketa <code>lubridate</code>.</p>
<p>Za trenutni datum i vrijeme <code>lubridate</code> nudi alternative funkcijama <code>Sys.Date()</code> i <code>Sys.time()</code> koje se jednostavno zovu <code>today()</code> i <code>now()</code>.</p>
<hr />
<p><strong>Zadatak 10.12 - funkcije <code>today</code> i <code>now</code></strong></p>
<div class="sourceCode" id="cb405"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb405-1" data-line-number="1"><span class="co"># ispišite sutrašnji datum</span></a>
<a class="sourceLine" id="cb405-2" data-line-number="2"></a>
<a class="sourceLine" id="cb405-3" data-line-number="3"><span class="co"># ispišite koliko je bilo sati, minuta i sekundi prije točno sat vremena</span></a></code></pre></div>
<div class="fold s o">
<div class="sourceCode" id="cb406"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb406-1" data-line-number="1"><span class="co"># ispišite sutrašnji datum</span></a>
<a class="sourceLine" id="cb406-2" data-line-number="2"><span class="kw">today</span>() <span class="op">+</span><span class="st"> </span><span class="dv">1</span></a>
<a class="sourceLine" id="cb406-3" data-line-number="3"></a>
<a class="sourceLine" id="cb406-4" data-line-number="4"><span class="co"># ispišite koliko je bilo sati, minuta i sekundi prije točno sat vremena</span></a>
<a class="sourceLine" id="cb406-5" data-line-number="5"><span class="kw">now</span>() <span class="op">-</span><span class="st"> </span><span class="dv">60</span><span class="op">*</span><span class="dv">60</span></a></code></pre></div>
<pre><code>## [1] &quot;2018-12-12&quot;
## [1] &quot;2018-12-11 10:08:05 CET&quot;</code></pre>
</div>
<hr />
<p>Već smo rekli da upravljanje vremenskom komponentom u podacima može postati vrlo kompleksno, pogotovo ako uzmemo u obzir da vremenski intervali mogu biti zadani generički (npr. “2 godine”) ili konkretno (raspon između dva datuma) te da se matematički i kalendarski način računanja vremena često ne poklapaju (npr. “za godinu dana” može značiti točan matematički izračun sekundi u 365 dana, ili kalendarski “isti datum iduće godine”).</p>
<p>Paket <code>lubridate</code> definira četiri mogućnosti kod definiranja vremena i vremenskih intervala:</p>
<ul>
<li>trenutak (<em>instant</em>) - vremenska oznaka zaokružena na sekundu</li>
<li>trajanje (<em>duration</em>) - “generički” definiran interval u sekundama</li>
<li>period - slično trajanju, ali omogućuje definiranje trajanja koja matematički ne traju uvijek isto (npr. “3 mjeseca”)</li>
<li>interval - vrijeme omeđeno između dva točno određena trenutka</li>
</ul>
<p>Trenutke smo već upoznali, to su vremenske oznake koje smo do sada stvarali. Za stvaranje trajanja i perioda imamo intuitivno definirane funkcije koje se nazivaju po engleskim nazivima za vremenske jedinice, pri čemu trajanja imaju dodano slovo d kao prefiks (od <em>duration</em>). Tako imamo funkcije <code>minutes</code> i <code>dminutes</code>, <code>hours</code> i <code>dhours</code>, <code>weeks</code> i <code>dweeks</code> i sl. (uočite da ne postoji funkcija <code>dmonths</code>, budući da “mjesec dana” ne možemo jednoznačno pretvoriti u sekunde!).</p>
<hr />
<p><strong>Zadatak 10.13 - trajanja i periodi</strong></p>
<div class="sourceCode" id="cb408"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb408-1" data-line-number="1"><span class="co"># ispišite objekte koji predstavljaju trajanje i period od 3 tjedna</span></a>
<a class="sourceLine" id="cb408-2" data-line-number="2"></a>
<a class="sourceLine" id="cb408-3" data-line-number="3"><span class="co"># u varijablu `v` upišite period od 5 godina, 3 mjeseca i 2 dana</span></a>
<a class="sourceLine" id="cb408-4" data-line-number="4"></a>
<a class="sourceLine" id="cb408-5" data-line-number="5"><span class="co"># dodajte gornji period današnjem datumu</span></a></code></pre></div>
<div class="fold s o">
<div class="sourceCode" id="cb409"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb409-1" data-line-number="1"><span class="co"># ispišite objekte koji predstavljaju trajanje i period od 3 tjedna</span></a>
<a class="sourceLine" id="cb409-2" data-line-number="2"><span class="kw">weeks</span>(<span class="dv">3</span>)</a>
<a class="sourceLine" id="cb409-3" data-line-number="3"><span class="kw">dweeks</span>(<span class="dv">3</span>)</a>
<a class="sourceLine" id="cb409-4" data-line-number="4"></a>
<a class="sourceLine" id="cb409-5" data-line-number="5"><span class="co"># u varijablu `v` upišite period od 5 godina, 3 mjeseca i 2 dana</span></a>
<a class="sourceLine" id="cb409-6" data-line-number="6">v &lt;-<span class="st"> </span><span class="kw">years</span>(<span class="dv">5</span>) <span class="op">+</span><span class="st"> </span><span class="kw">months</span>(<span class="dv">3</span>) <span class="op">+</span><span class="st"> </span><span class="kw">days</span>(<span class="dv">2</span>)</a>
<a class="sourceLine" id="cb409-7" data-line-number="7"></a>
<a class="sourceLine" id="cb409-8" data-line-number="8"><span class="co"># dodajte gornji period današnjem datumu</span></a>
<a class="sourceLine" id="cb409-9" data-line-number="9"><span class="kw">today</span>() <span class="op">+</span><span class="st"> </span>v</a></code></pre></div>
<pre><code>## [1] &quot;21d 0H 0M 0S&quot;
## [1] &quot;1814400s (~3 weeks)&quot;
## [1] &quot;2024-03-13&quot;</code></pre>
</div>
<hr />
<p>Uočite da gornji izraz nismo lako mogli dobiti “matematički”.</p>
<p>Konačno, interval stvaramo uz pomoć funkcije <code>interval</code> kojoj dajemo početni i konačni trenutak, ili uz pomoć funkcije <code>as.interval</code> kojoj dajemo trajanje/period i početni trenutak. Možemo također koristiti i operator <code>%--%</code> sa dvije vremenske oznake (tj. trenutka) kao operandima.</p>
<hr />
<p><strong>Zadatak 10.14 - intervali</strong></p>
<div class="sourceCode" id="cb411"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb411-1" data-line-number="1"><span class="co"># stvorite varijablu `interval1` koja će pohraniti interval </span></a>
<a class="sourceLine" id="cb411-2" data-line-number="2"><span class="co"># od 6 mjeseci prije današnjeg dana</span></a>
<a class="sourceLine" id="cb411-3" data-line-number="3"><span class="co"># do 6 mjeseci iza današnjeg dana</span></a>
<a class="sourceLine" id="cb411-4" data-line-number="4"></a>
<a class="sourceLine" id="cb411-5" data-line-number="5"><span class="co"># stvorite varijablu `interval2` koja će pohraniti interval od današnjeg dana</span></a>
<a class="sourceLine" id="cb411-6" data-line-number="6"><span class="co"># do datuma koji će se dogoditi za 6 mjeseci, 3 tjedna i 2 dana</span></a>
<a class="sourceLine" id="cb411-7" data-line-number="7"></a>
<a class="sourceLine" id="cb411-8" data-line-number="8"><span class="co"># stvorite varijablu `interval3` koja će pohraniti interval </span></a>
<a class="sourceLine" id="cb411-9" data-line-number="9"><span class="co"># od 1.5.2002. do 1.7.2002.</span></a>
<a class="sourceLine" id="cb411-10" data-line-number="10"></a>
<a class="sourceLine" id="cb411-11" data-line-number="11"><span class="co"># ispišite sva tri intervala</span></a></code></pre></div>
<div class="fold s o">
<div class="sourceCode" id="cb412"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb412-1" data-line-number="1"><span class="co"># stvorite varijablu `interval1` koja će pohraniti interval </span></a>
<a class="sourceLine" id="cb412-2" data-line-number="2"><span class="co"># od 6 mjeseci prije današnjeg dana</span></a>
<a class="sourceLine" id="cb412-3" data-line-number="3"><span class="co"># do 6 mjeseci iza današnjeg dana</span></a>
<a class="sourceLine" id="cb412-4" data-line-number="4">interval1 &lt;-<span class="st"> </span><span class="kw">interval</span>(<span class="kw">today</span>() <span class="op">-</span><span class="st"> </span><span class="kw">months</span>(<span class="dv">3</span>), <span class="kw">today</span>() <span class="op">+</span><span class="st"> </span><span class="kw">months</span>(<span class="dv">3</span>))</a>
<a class="sourceLine" id="cb412-5" data-line-number="5"></a>
<a class="sourceLine" id="cb412-6" data-line-number="6"><span class="co"># stvorite varijablu `interval2` koja će pohraniti interval od današnjeg dana</span></a>
<a class="sourceLine" id="cb412-7" data-line-number="7"><span class="co"># do datuma koji će se dogoditi za 6 mjeseci, 3 tjedna i 2 dana</span></a>
<a class="sourceLine" id="cb412-8" data-line-number="8">interval2 &lt;-<span class="st"> </span><span class="kw">as.interval</span>(<span class="kw">months</span>(<span class="dv">4</span>) <span class="op">+</span><span class="st"> </span><span class="kw">weeks</span>(<span class="dv">3</span>) <span class="op">+</span><span class="st"> </span><span class="kw">days</span>(<span class="dv">2</span>), <span class="kw">today</span>())</a>
<a class="sourceLine" id="cb412-9" data-line-number="9"></a>
<a class="sourceLine" id="cb412-10" data-line-number="10"><span class="co"># stvorite varijablu `interval3` koja će pohraniti interval </span></a>
<a class="sourceLine" id="cb412-11" data-line-number="11"><span class="co"># od 1.5.2002. do 1.7.2002.</span></a>
<a class="sourceLine" id="cb412-12" data-line-number="12">interval3 &lt;-<span class="st"> </span><span class="kw">dmy</span>(<span class="st">&quot;1.5.2002.&quot;</span>) <span class="op">%--%</span><span class="st"> </span><span class="kw">dmy</span>(<span class="st">&quot;1.7.2002.&quot;</span>)</a>
<a class="sourceLine" id="cb412-13" data-line-number="13"></a>
<a class="sourceLine" id="cb412-14" data-line-number="14"><span class="co"># ispišite sva tri intervala</span></a>
<a class="sourceLine" id="cb412-15" data-line-number="15">interval1</a>
<a class="sourceLine" id="cb412-16" data-line-number="16">interval2</a>
<a class="sourceLine" id="cb412-17" data-line-number="17">interval3</a></code></pre></div>
<pre><code>## [1] 2018-09-11 UTC--2019-03-11 UTC
## [1] 2018-12-11 UTC--2019-05-04 UTC
## [1] 2002-05-01 UTC--2002-07-01 UTC</code></pre>
</div>
<hr />
<p>Kod intervala je zgodno što između ostalog možemo:</p>
<ul>
<li>provjeriti da li se neki trenutak nalazi unutar nekog intervala uz pomoć operatora <code>%within%</code></li>
<li>provjeriti da li se intervali preklapaju uz pomoć funkcije <code>int_overlaps()</code></li>
<li>lako dohvatiti početak i kraj intervala uz pomoć funkcija <code>int_start()</code> i <code>int_end</code></li>
<li>“spojiti” dva intervala uz pomoć funkcije <code>union</code> ili naći presjek uz pomoć funkcije <code>intersect</code></li>
<li>brojne druge mogućnosti koje možemo naučiti gledajući dokumentaciju</li>
</ul>
<hr />
<p><strong>Zadatak 10.15 - pomoćne funkcije za rad sa intervalima</strong></p>
<div class="sourceCode" id="cb414"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb414-1" data-line-number="1"><span class="co"># provjerite da li je današnji dan unutar intervala definiranog varijablom `interval1`</span></a>
<a class="sourceLine" id="cb414-2" data-line-number="2"></a>
<a class="sourceLine" id="cb414-3" data-line-number="3"><span class="co"># ukoliko se `interval1` i `interval2` preklapaju</span></a>
<a class="sourceLine" id="cb414-4" data-line-number="4"><span class="co"># ispišite njihov presjek</span></a></code></pre></div>
<div class="fold s o">
<div class="sourceCode" id="cb415"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb415-1" data-line-number="1"><span class="co"># provjerite da li je današnji dan unutar intervala definiranog varijablom `interval1`</span></a>
<a class="sourceLine" id="cb415-2" data-line-number="2"><span class="kw">today</span>() <span class="op">%within%</span><span class="st"> </span>interval1</a>
<a class="sourceLine" id="cb415-3" data-line-number="3"></a>
<a class="sourceLine" id="cb415-4" data-line-number="4"></a>
<a class="sourceLine" id="cb415-5" data-line-number="5"><span class="co"># ukoliko se `interval1` i `interval2` preklapaju</span></a>
<a class="sourceLine" id="cb415-6" data-line-number="6"><span class="co"># ispišite njihov presjek</span></a>
<a class="sourceLine" id="cb415-7" data-line-number="7"><span class="cf">if</span> (<span class="kw">int_overlaps</span>(interval1, interval1)) <span class="kw">intersect</span>(interval1, interval2)</a></code></pre></div>
<pre><code>## [1] TRUE
## [1] 2018-12-11 UTC--2019-03-11 UTC</code></pre>
</div>
<hr />
<p>U ovom dijelu upoznali smo se sa jednim dijelom funkcionalnosti koje nude klase za upravljanje datumima i vremenskim oznakama jezika R te paket <code>lubridate</code>. Za dodatne informacije pogledajte službenu dokumentaciju jezika R i paketa <code>lubridate</code>, a dobar izvor je i članak <em>“Dates and Times Made Easy with lubridate”</em> kojeg je napisao sam autor paketa Hadley Wickham a koji je dostupan na <a href = "https://www.jstatsoft.org/article/view/v040i03/v40i03.pdf">ovoj poveznici</a>.</p>
</div>
</div>
<div id="rad-sa-znakovnim-nizovima" class="section level2">
<h2><span class="header-section-number">10.2</span> Rad sa znakovnim nizovima</h2>
<p><em>R</em> ima jako dobru podršku za rad sa znakovnim nizovima, no funkcije koje nudi osnovni R nisu intuitivne niti konzistentne ako ih uspoređujemo sa sličnim funkcijama u drugim programskim jezicima.</p>
<p>Upravo iz ovih razloga pojavio se paket <code>stringr</code> koji nudi vrlo učinkovitu alternativu postojećim funkcijama vezanih uz znakovne nizove te predstavlja jedan od najpopularnijih “dodatnih” R paketa. No prije upoznavanja sa funkcijama koje nudi ovaj paket potrebno je kratko se osvrnuti na općenitu problematiku upravljanja znakovnim nizovima u analizi podataka te na tehnologiju bez koje je provedba analize znakovnih nizova gotovo nezamisliva - tzv. regularni izrazi.</p>
<div id="analiza-teksta-i-regularni-izrazi" class="section level3">
<h3><span class="header-section-number">10.2.1</span> Analiza teksta i regularni izrazi</h3>
<p>Analiza teksta neizbježan je element kod analize podatkovnih skupova. Bilo da se radi o jednostavnoj identifikaciji kategorija, traženju podnizova ili nečem daleko složenijem kao što su specijalizirane metode rudarenja teksta (engl. <em>text mining</em>), teško je zamisliti bilo kakvu smislenu analizu podataka koja prije ili kasnije ne zahtijeva poznavanje barem osnovnih metoda analize znakovnih nizova.</p>
<p>Neovisno o razini složenosti analize znakovnih nizova koju želimo provesti, jedna tehnologija je sveprisutna i univerzalno primjenjiva - <strong>regularni izrazi</strong>. Ovdje se radi o posebnom jeziku uz pomoć kojeg definiramo “uzorke” (<em>patterns</em>) na osnovu kojih pretražujemo neki tekst, radimo izmjene i sl.</p>
<p>Detaljni pregled tehnologije regularnih izraza izlazi iz okvira ovog udžbenika. U nastavku ćemo navesti samo kratke informacije u svrhu brzog pregleda ili podsjetnika. Ukoliko se do sada uopće niste susretali s ovom tehnologijom, snažno preporučujemo ulaganje truda i svladavanje barem osnovnih koncepata, npr. uz pomoć nekog od dostupnih internetskih. Jedan od vrlo kratkih ali učinkovitih mini-tečajeva regularnih izraza možete naći <a href = "https://regexone.com/">ovdje</a> .</p>
<p>Regularni izraz jednostavno je niz znakova koji predstavlja uzorak kojeg tražimo unutar nekog teksta. Npr. regularni izraz <code>gram</code> se nalazi u znakovnom nizu <code>Programski jezik R</code> ali se ne nalazi u znakovnom nizu <code>Analiza teksta</code>. Kažemo da smo pronašli “slaganje” (<em>match</em>) regularnog izraza sa prvim nizom ali ne i sa drugim.</p>
<p>Ovakav regularni izraz nije previše fleksibilan - prava moć regularnih izraza krije se u mogućnosti slaganja posebnih izraza koji će se uz pomoć posebnog opisa moći slagati sa “općenitijim” oblicima znakovnih nizova. Tipičan primjer je adresa elektroničke pošte - konkretnije, provjera da li je korisnik unio adresu koja odgovara “općenitom” obliku adrese elektroničke pošte. Jedno od mogućnosti je jednostavno izraz <code>@</code> kojim zapravo samo provjeravamo postojanje tog znaka u danom znakovnom nizu. Time smo osigurali određenu razinu kontrole, ali isto tako smo dopustili “adrese” tipa <code>@@@</code> i <code>@23456</code>. Uz malo “rada” na izrazu mogli bi doći do malo boljeg rješenja, koje npr. može izgledati ovako:</p>
<div class="sourceCode" id="cb417"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb417-1" data-line-number="1">\w<span class="op">+</span><span class="er">@</span>\w<span class="op">+</span>\.\w<span class="op">+</span></a></code></pre></div>
<p>Iako izgleda kao niz nasumičnih znakova, osnovnim poznavanjem regularnih izraza možemo relativno lako interpretirati gornji izraz. Znak <code>\w</code> označava “slovo ili znamenku”, znak <code>+</code> znači “1 ili više” i sl. Ako bi htjeli “prepričati” gornji regularni izraz govornim jezikom, to bi bilo “jedno ili više slova ili znamenki, potom znak <code>@</code>, pa jedno ili više slova ili znamenki, zatim točka i onda konačno opet jedno ili više slova ili znamenki”. Iako ovo nije pretjerano sofisticirani izraz, on je ipak kvalitetniji od prvog pokušaja. Daljnje proširenje je itekako moguće i iako naknadnim dodavanjima sve više gubimo neposrednu čitljivost, isto tako postižemo sve višu i višu razinu kontrole koja se približava formalnim odrednicama kako adresa elektroničke pošte mora izgledati (za ovakve specifične uporabe često se isplati i provjeriti javno dostupne repozitorije regularnih izraza gdje možemo naći složene ali kvalitetne i pomno testirane izraze koje je dovoljno jednostavno prekopirati u naš programski kod).</p>
<p>Važno je napomenuti da nema jednog jedinstvenog standarda za regularne izraze. Postoji tzv. <em>“POSIX standard”</em> u dvije inačice - <em>BRE</em> i <em>ERE</em> (<em>Basic Regular Expressions</em> i <em>Extended Regular Expressions</em>) koje su zapravo gotovo iste, osim što <em>BRE</em> zahtjeva malo intenzivniju uporabu znaka <code>\</code>. Još jedan popularni standard je tzv. <em>“Perl standard”</em> koji predstavlja inačicu regularnih izraza implementiranih u jeziku <em>Perl</em>. Budući da je <em>Perl</em> jedan od vodećih jezika za upravljanje tekstom tako je i ovaj standard postao jedan od najšire prihvaćenih načina korištenja regularnih izraza.</p>
<p>U općenitom slučaju, gotovo svi popularniji programski jezici imaju podršku za regularne izraze, bilo već ugrađene u jezik, bilo uz pomoć dodatnih paketa. <em>R</em> je jedan od jezika koji već sadrži podršku za regularne izraze u svojem osnovnom paketu. Štoviše, <em>R</em> ima ugrađenu paralelnu podršku za tri najraširenija standarda - <em>POSIX ERE</em>, <em>POSIX BRE</em> i <em>Perl</em>. <em>POSIX ERE</em> je zadana postavka, a određenim parametrima možemo se lako “prebaciti” na <em>BRE</em> (<code>extended = FALSE</code>) ili <em>Perl</em> (<code>perl = TRUE</code>). U daljnjim poglavljima držati ćemo se <em>ERE</em> standarda, ali bitno je znati i za prethodno navedene postavke želimo li koristiti već gotove izraze koji su razvijeni u nekom drugom standardu (a ne želimo se zamarati sa prebacivanjem iz jednog standarda u drugi).</p>
<p>Sljedeća tablica daje kratki pregled nekih češće korištenih elemenata regularnih izraza u jeziku <em>R</em>:</p>
<table>
<thead>
<tr class="header">
<th>Element</th>
<th>Značenje</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>abcd</code></td>
<td>niz slova “abcd”</td>
</tr>
<tr class="even">
<td><code>1234</code></td>
<td>niz znamenki “1234”</td>
</tr>
<tr class="odd">
<td><code>\\d</code> ili <code>[:digit:]</code></td>
<td>ili <code>[0-9]</code> bilo koja znamenka</td>
</tr>
<tr class="even">
<td><code>\\D</code> ili <code>[:alpha:]</code></td>
<td>ili <code>[A-Za-z]</code> bilo koje slovo</td>
</tr>
<tr class="odd">
<td><code>[:alnum:]</code></td>
<td>bilo koje slovo ili znamenka</td>
</tr>
<tr class="even">
<td><code>.</code></td>
<td>bilo koji znak</td>
</tr>
<tr class="odd">
<td><code>\\.</code></td>
<td>točka</td>
</tr>
<tr class="even">
<td><code>[abc]</code></td>
<td>samo navedeni znakovi</td>
</tr>
<tr class="odd">
<td><code>[^abc]</code></td>
<td>svi znakovi osim navedenih</td>
</tr>
<tr class="even">
<td><code>*</code></td>
<td>nula ili više ponavljanja</td>
</tr>
<tr class="odd">
<td><code>+</code></td>
<td>jedno ili više ponavljanja</td>
</tr>
<tr class="even">
<td><code>{n}</code></td>
<td>točno n ponavljanja</td>
</tr>
<tr class="odd">
<td><code>{m, n}</code></td>
<td>najmanje m, najviše n ponavljanja</td>
</tr>
<tr class="even">
<td><code>?</code></td>
<td>opcionalni znak</td>
</tr>
<tr class="odd">
<td><code>[:space:]</code> ili <code>\\s</code></td>
<td>bilo kakva praznina</td>
</tr>
<tr class="even">
<td><code>[:punct:]</code></td>
<td>znakovi interpunkcije</td>
</tr>
<tr class="odd">
<td><code>^...$</code></td>
<td>oznaka za početak i kraj</td>
</tr>
<tr class="even">
<td><code>(ab|cd)</code></td>
<td>niz “ab” ili niz “cd”</td>
</tr>
</tbody>
</table>
<p>Uočite da kod korištenja specijalnog znaka <code>\</code> zapravo moramo koristiti “dvostruki znak” <code>\\</code> (prvi put da naznačimo <em>R</em>-u da se radi o specijalnom znaku, drugi put da ga doslovno upotrijebimo kao dio regularnog izraza).</p>
<p>Osnovne funkcije jezika <em>R</em> za rad sa znakovnim nizovima (a time i regularnim izrazima) su između ostalog <code>grep</code>, <code>grepl</code>, <code>regexrp</code>, <code>gregexrp</code>, <code>regmatches</code>, <code>sub</code>, <code>gsub</code> itd. No budući da paket <code>stringr</code> nudi skup alternativnih funkcija sa gotovo istim funkcionalnostima ali uz daleko intuitivnija imena i konzistentnije potpise, mi ćemo se usredotočiti na upravo te funkcije a učenje osnovnih ostavljamo čitateljima koji žele upotpuniti svoje znanje učenjem svih dostupnih alata koje nudi jezik <em>R</em>.</p>
</div>
<div id="paket-stringr" class="section level3">
<h3><span class="header-section-number">10.2.2</span> Paket <code>stringr</code></h3>
<p>Već smo rekli da paket <code>stringr</code> zapravo u izvjesnoj mjeri reimplementira već postojeće funkcije jezika <em>R</em>, ali na intuitivniji i konzistentniji način. Ako želimo biti precizni, funkcije paketa <code>stringr</code> su zapravo funkcionalno nešto skromnije, no to je napravljeno s konkretnom namjerom - funkcionalnost je reducirana na poslove za koje se smatra da predstavljaju daleko najčešće korištene funkcionalnosti kod analize teksta. Funkcionalnost koja je “izbačena” tiče se specifičnih slučajeva za koje će programer morati potražiti alternativna rješenja (često u obliku osnovnih funkcija), no dobitak je u jednostavnijim, intuitivnijim funkcijama koje su lakše za učenje i učinkovito dugoročno korištenje.</p>
<p>Pored navedenih “popravljanja” paket <code>stringr</code> omogućuje i sljedeće:</p>
<ul>
<li>konzistentno tretiranje faktora kao znakovnih nizova</li>
<li>lakše korištenje izlaza funkcija za ulaz nastupajuće funkcije, što je pogotovo korisno uz operator <code>%&gt;%</code></li>
</ul>
<p>Možemo početi sa nekim jednostavnijim funkcijama za koje ne trebamo regularne izraze (navodimo pojednostavljene potpise funkcija, za potpune pogledajte dokumentaciju):</p>
<ul>
<li><code>str_c(string1, string2, ...)</code> - spajanje znakovnih nizova, alternativa funkciji paste0</li>
<li><code>str_length(string)</code> - vraća duljinu znakovnog niza</li>
<li><code>str_sub(string, start, end)</code> - vraća podniz</li>
<li><code>str_sub(string, start, end) &lt;- string2</code> - umetanje novog podniza (ne mora biti iste duljine kao izbačeni podniz!)</li>
<li><code>str_trim(string)</code> - uklanjanje praznina s početka i kraja niza</li>
</ul>
<hr />
<p><strong>Zadatak 10.16 - osnovne funkcije za rad sa znakovnim nizovima</strong></p>
<div class="sourceCode" id="cb418"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb418-1" data-line-number="1">niz1 &lt;-<span class="st"> &quot;        Ovo je primjer &quot;</span></a>
<a class="sourceLine" id="cb418-2" data-line-number="2">niz2 &lt;-<span class="st"> &quot;spajanja nizova!       &quot;</span></a>
<a class="sourceLine" id="cb418-3" data-line-number="3"></a>
<a class="sourceLine" id="cb418-4" data-line-number="4"><span class="co"># uz pomoć jedne naredbe spojite gornje nizove, potom</span></a>
<a class="sourceLine" id="cb418-5" data-line-number="5"><span class="co"># iz rezultata uklonite praznine s početka i kraja niza,</span></a>
<a class="sourceLine" id="cb418-6" data-line-number="6"><span class="co"># zatim izdvojite podniz od 8. do 23. znaka te konačni rezultat ispišite na zaslon</span></a>
<a class="sourceLine" id="cb418-7" data-line-number="7"></a>
<a class="sourceLine" id="cb418-8" data-line-number="8">niz &lt;-<span class="st"> &quot;R je pretjerano kompliciran i nimalo lagan jezik!&quot;</span></a>
<a class="sourceLine" id="cb418-9" data-line-number="9"></a>
<a class="sourceLine" id="cb418-10" data-line-number="10"><span class="co"># u gornjem nizu znakova zamjenite sve od 9. znaka (brojeno od početka)</span></a>
<a class="sourceLine" id="cb418-11" data-line-number="11"><span class="co"># do 13. (brojeno od kraja) sa praznim nizom </span></a>
<a class="sourceLine" id="cb418-12" data-line-number="12"></a>
<a class="sourceLine" id="cb418-13" data-line-number="13"><span class="co"># ispišite niz</span></a></code></pre></div>
<div class="fold s o">
<div class="sourceCode" id="cb419"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb419-1" data-line-number="1">niz1 &lt;-<span class="st"> &quot;        Ovo je primjer &quot;</span></a>
<a class="sourceLine" id="cb419-2" data-line-number="2">niz2 &lt;-<span class="st"> &quot;spajanja nizova!       &quot;</span></a>
<a class="sourceLine" id="cb419-3" data-line-number="3"></a>
<a class="sourceLine" id="cb419-4" data-line-number="4"></a>
<a class="sourceLine" id="cb419-5" data-line-number="5"><span class="co"># uz pomoć jedne naredbe spojite gornje nizove, potom</span></a>
<a class="sourceLine" id="cb419-6" data-line-number="6"><span class="co"># iz rezultata uklonite praznine s početka i kraja niza,</span></a>
<a class="sourceLine" id="cb419-7" data-line-number="7"><span class="co"># zatim izdvojite podniz od 8. do 23. znaka te konačni rezultat ispišite na zaslon</span></a>
<a class="sourceLine" id="cb419-8" data-line-number="8"><span class="kw">str_c</span>(niz1, niz2) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">str_trim</span>() <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">str_sub</span>(<span class="dv">8</span>, <span class="dv">23</span>)</a>
<a class="sourceLine" id="cb419-9" data-line-number="9"></a>
<a class="sourceLine" id="cb419-10" data-line-number="10">niz &lt;-<span class="st"> &quot;R je pretjerano kompliciran i nimalo lagan jezik!&quot;</span></a>
<a class="sourceLine" id="cb419-11" data-line-number="11"></a>
<a class="sourceLine" id="cb419-12" data-line-number="12"><span class="co"># u gornjem nizu znakova zamjenite sve od 9. znaka (brojeno od početka)</span></a>
<a class="sourceLine" id="cb419-13" data-line-number="13"><span class="co"># do 13. (brojeno od kraja) sa praznim nizom </span></a>
<a class="sourceLine" id="cb419-14" data-line-number="14"><span class="kw">str_sub</span>(niz, <span class="dv">9</span>, <span class="dv">-13</span>) &lt;-<span class="st"> &quot;&quot;</span></a>
<a class="sourceLine" id="cb419-15" data-line-number="15"></a>
<a class="sourceLine" id="cb419-16" data-line-number="16"><span class="co"># ispišite niz</span></a>
<a class="sourceLine" id="cb419-17" data-line-number="17">niz</a></code></pre></div>
<pre><code>## [1] &quot;primjer spajanja&quot;
## [1] &quot;R je prelagan jezik!&quot;</code></pre>
</div>
<hr />
<p>Funkcija <code>str_c</code> ima i parametar <code>sep</code> za dodavanje separatora, te parametar <code>collapse</code> za spajanje elemenata znakovnog vektora u jedinstveni niz uz vrijednost parametra kao separator.</p>
<hr />
<p><strong>Zadatak 10.17 - spajanje znakovnih nizova</strong></p>
<div class="sourceCode" id="cb421"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb421-1" data-line-number="1">niz1 &lt;-<span class="st"> &quot;Za spajanje&quot;</span></a>
<a class="sourceLine" id="cb421-2" data-line-number="2">niz2 &lt;-<span class="st"> &quot;ovih nizova&quot;</span></a>
<a class="sourceLine" id="cb421-3" data-line-number="3">niz3 &lt;-<span class="st"> &quot;potreban je razmak!&quot;</span></a>
<a class="sourceLine" id="cb421-4" data-line-number="4"></a>
<a class="sourceLine" id="cb421-5" data-line-number="5"><span class="co"># spojite gornje nizove u jedinstveni niz i ispišite rezultat</span></a>
<a class="sourceLine" id="cb421-6" data-line-number="6"></a>
<a class="sourceLine" id="cb421-7" data-line-number="7">nizovi &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;A&quot;</span>, <span class="st">&quot;ovi&quot;</span>, <span class="st">&quot;nizovi&quot;</span>, <span class="st">&quot;su&quot;</span>, <span class="st">&quot;elementi&quot;</span>, <span class="st">&quot;vektora...&quot;</span>)</a>
<a class="sourceLine" id="cb421-8" data-line-number="8"></a>
<a class="sourceLine" id="cb421-9" data-line-number="9"><span class="co"># spojite elemente gornjeg vektora u jedan niz i ispišite rezultat</span></a></code></pre></div>
<div class="fold s o">
<div class="sourceCode" id="cb422"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb422-1" data-line-number="1">niz1 &lt;-<span class="st"> &quot;Za spajanje&quot;</span></a>
<a class="sourceLine" id="cb422-2" data-line-number="2">niz2 &lt;-<span class="st"> &quot;ovih nizova&quot;</span></a>
<a class="sourceLine" id="cb422-3" data-line-number="3">niz3 &lt;-<span class="st"> &quot;potreban je razmak!&quot;</span></a>
<a class="sourceLine" id="cb422-4" data-line-number="4"></a>
<a class="sourceLine" id="cb422-5" data-line-number="5"><span class="co"># spojite gornje nizove u jedinstveni niz i ispišite rezultat</span></a>
<a class="sourceLine" id="cb422-6" data-line-number="6"><span class="kw">str_c</span>(niz1, niz2, niz3, <span class="dt">sep =</span> <span class="st">&quot; &quot;</span>)</a>
<a class="sourceLine" id="cb422-7" data-line-number="7"></a>
<a class="sourceLine" id="cb422-8" data-line-number="8">nizovi &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;A&quot;</span>, <span class="st">&quot;ovi&quot;</span>, <span class="st">&quot;nizovi&quot;</span>, <span class="st">&quot;su&quot;</span>, <span class="st">&quot;elementi&quot;</span>, <span class="st">&quot;vektora...&quot;</span>)</a>
<a class="sourceLine" id="cb422-9" data-line-number="9"></a>
<a class="sourceLine" id="cb422-10" data-line-number="10"><span class="co"># spojite elemente gornjeg vektora u jedan niz i ispišite rezultat</span></a>
<a class="sourceLine" id="cb422-11" data-line-number="11"><span class="kw">str_c</span>(nizovi, <span class="dt">collapse =</span> <span class="st">&quot; &quot;</span>)</a></code></pre></div>
<pre><code>## [1] &quot;Za spajanje ovih nizova potreban je razmak!&quot;
## [1] &quot;A ovi nizovi su elementi vektora...&quot;</code></pre>
</div>
<hr />
<p>Pogledajmo sada neke funkcije koje rade sa regularnim izrazima:</p>
<ul>
<li><code>str_detect(string, pattern)</code> - vraća <code>TRUE</code> ako niz sadrži uzorak, inače <code>FALSE</code></li>
<li><code>str_extract(string, pattern)</code> - vraća niz znakova koji odgovara prvoj pojavi uzorka</li>
<li><code>str_extract_all(string, pattern)</code> - vraća listu sa svim pojavama koje odgovaraju uzorku</li>
<li><code>str_replace(string, pattern, replacement)</code> - mijenja prvu pojavu uzorka sa zadanim novim nizom</li>
<li><code>str_replace_all(string, pattern, replacement)</code> - mijenja sve pojave uzorka sa zadanim novim nizom</li>
</ul>
<p>Sve ove funkcije su vektorizirane, tj. ponašaju se logično (tj. “paralelizirano”) kad im kao određeni parametar pošaljemo vektor - npr. ako funkciji <code>str_replace</code> pošaljemo vektor znakovnih nizova i vektor “zamjena”, svaka prva pojava uzorka biti će zamijenjena odgovarajućim elementom u poretku zamjena. Za detalje oko ovakvog proširenog korištenja uputno je pogledati dokumentaciju.</p>
<hr />
<p><strong>Zadatak 10.18 - funkcije i regularni izrazi</strong></p>
<div class="sourceCode" id="cb424"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb424-1" data-line-number="1">adrese &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;pero.peric@fer.hr&quot;</span>, <span class="st">&quot;iva.ivic@etfos.hr&quot;</span>, <span class="st">&quot;ppetrovic@gmail.com&quot;</span>, </a>
<a class="sourceLine" id="cb424-2" data-line-number="2">            <span class="st">&quot;branko1987@yahoo.com&quot;</span>, <span class="st">&quot;jaRULZ4EVR@gmail.nz&quot;</span>, <span class="st">&quot;dperkovic@efzg.hr&quot;</span>, </a>
<a class="sourceLine" id="cb424-3" data-line-number="3">            <span class="st">&quot;lalaic1998@gmail.co.uk&quot;</span>, <span class="st">&quot;perica.markic@fer.hr&quot;</span>)</a>
<a class="sourceLine" id="cb424-4" data-line-number="4"></a>
<a class="sourceLine" id="cb424-5" data-line-number="5"><span class="co"># prebrojite i ispišite koliko u gornjem popisu ima mail adresa iz domene `fer.hr`</span></a>
<a class="sourceLine" id="cb424-6" data-line-number="6"></a>
<a class="sourceLine" id="cb424-7" data-line-number="7"><span class="co"># ispišite sve adrese koje sadrže bar jednu znamenku</span></a>
<a class="sourceLine" id="cb424-8" data-line-number="8"></a>
<a class="sourceLine" id="cb424-9" data-line-number="9"><span class="co"># ispišite sve adrese koje na drugom mjestu imaju samoglasnik</span></a>
<a class="sourceLine" id="cb424-10" data-line-number="10"></a>
<a class="sourceLine" id="cb424-11" data-line-number="11"><span class="co"># ispišite sve jedinstvene domene adresa elektroničke pošte iz gornjeg niza adresa</span></a>
<a class="sourceLine" id="cb424-12" data-line-number="12"><span class="co"># (domenom smatramo dio adrese iza znaka `@`)</span></a>
<a class="sourceLine" id="cb424-13" data-line-number="13"></a>
<a class="sourceLine" id="cb424-14" data-line-number="14"><span class="co"># anonimizirajte gornje adrese: niz znakova ispred znaka &#39;@&#39;</span></a>
<a class="sourceLine" id="cb424-15" data-line-number="15"><span class="co"># zamijenite nasumičnim šesteroznamenkastim prirodnim brojem </span></a></code></pre></div>
<div class="fold s o">
<div class="sourceCode" id="cb425"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb425-1" data-line-number="1"><span class="co"># prebrojite i ispišite koliko u gornjem popisu ima mail adresa iz domene `fer.hr`</span></a>
<a class="sourceLine" id="cb425-2" data-line-number="2"><span class="kw">str_detect</span>(adrese, <span class="st">&quot;fer.hr&quot;</span>) <span class="op">%&gt;%</span><span class="st"> </span>sum</a>
<a class="sourceLine" id="cb425-3" data-line-number="3"></a>
<a class="sourceLine" id="cb425-4" data-line-number="4"><span class="co"># ispišite sve adrese koje sadrže bar jednu znamenku</span></a>
<a class="sourceLine" id="cb425-5" data-line-number="5">adrese[<span class="kw">str_detect</span>(adrese, <span class="st">&#39;[:digit:]&#39;</span>)]</a>
<a class="sourceLine" id="cb425-6" data-line-number="6"></a>
<a class="sourceLine" id="cb425-7" data-line-number="7"><span class="co"># ispišite sve adrese koje na drugom mjestu imaju samoglasnik</span></a>
<a class="sourceLine" id="cb425-8" data-line-number="8"><span class="kw">str_detect</span>(adrese, <span class="st">&quot;^.[aeiou]&quot;</span>) <span class="op">%&gt;%</span><span class="st"> </span>adrese[.]</a>
<a class="sourceLine" id="cb425-9" data-line-number="9"><span class="co"># moze i str_detect(adrese, &quot;^.(a|e|i|o|u)&quot;) %&gt;% adrese[.]</span></a>
<a class="sourceLine" id="cb425-10" data-line-number="10"></a>
<a class="sourceLine" id="cb425-11" data-line-number="11"><span class="co"># ispišite sve jedinstvene domene adresa elektroničke pošte iz gornjeg niza adresa</span></a>
<a class="sourceLine" id="cb425-12" data-line-number="12"><span class="co"># (domenom smatramo dio adrese iza znaka `@`)</span></a>
<a class="sourceLine" id="cb425-13" data-line-number="13"><span class="kw">str_extract</span>(adrese, <span class="st">&#39;@(.*)&#39;</span>) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">str_sub</span>(<span class="dv">2</span>) <span class="op">%&gt;%</span><span class="st"> </span>unique</a>
<a class="sourceLine" id="cb425-14" data-line-number="14"></a>
<a class="sourceLine" id="cb425-15" data-line-number="15"><span class="co"># anonimizirajte gornje adrese: niz znakova ispred znaka &#39;@&#39;</span></a>
<a class="sourceLine" id="cb425-16" data-line-number="16"><span class="co"># zamijenite nasumičnim šesteroznamenkastim prirodnim brojem </span></a>
<a class="sourceLine" id="cb425-17" data-line-number="17"><span class="kw">sample</span>(<span class="dv">100000</span><span class="op">:</span><span class="dv">999999</span>, <span class="kw">length</span>(adrese)) <span class="op">%&gt;%</span><span class="st"> </span>as.character <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">str_replace</span>(adrese, <span class="st">&#39;^[^@]*&#39;</span>, .)</a></code></pre></div>
<pre><code>## [1] 2
## [1] &quot;branko1987@yahoo.com&quot;   &quot;jaRULZ4EVR@gmail.nz&quot;   
## [3] &quot;lalaic1998@gmail.co.uk&quot;
## [1] &quot;pero.peric@fer.hr&quot;      &quot;jaRULZ4EVR@gmail.nz&quot;   
## [3] &quot;lalaic1998@gmail.co.uk&quot; &quot;perica.markic@fer.hr&quot;  
## [1] &quot;fer.hr&quot;      &quot;etfos.hr&quot;    &quot;gmail.com&quot;   &quot;yahoo.com&quot;   &quot;gmail.nz&quot;   
## [6] &quot;efzg.hr&quot;     &quot;gmail.co.uk&quot;
## [1] &quot;755066@fer.hr&quot;      &quot;477550@etfos.hr&quot;    &quot;521135@gmail.com&quot;  
## [4] &quot;733004@yahoo.com&quot;   &quot;812154@gmail.nz&quot;    &quot;609008@efzg.hr&quot;    
## [7] &quot;371161@gmail.co.uk&quot; &quot;736284@fer.hr&quot;</code></pre>
</div>
<hr />
<p>Konačno, naučimo jednu relativno korisnu funkciju nazvanu <code>str_split</code>. Ova funkcija rastavlja znakovni niz na vektor znakovnih nizova, ovisno o danom separatoru (koji može biti razmak, neki odabrani znak ali i regularni izraz), a često se koristi kao “primitivnija” alternativa funkcijama <code>read.csv</code> i <code>read.table</code> kada ulazne podatke želimo “ručno” rastaviti i parsirati, ili za analizu teksta kada paragrafe teksta “razbijamo” na pojedinačne riječi. Ova funkcija pretpostavlja da ćemo joj proslijediti niz znakovnih nizova za rastavljanje te nam kao rezultat vraća listu; ukoliko rastavljamo samo jedan niz, lako rezultat pretvaramo u vektor korištenjem funkcije <code>unlist</code>.</p>
<div class="sourceCode" id="cb427"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb427-1" data-line-number="1"><span class="kw">str_split</span>(<span class="st">&quot;Primjer funkcije str_split&quot;</span>, <span class="dt">pattern =</span> <span class="st">&quot;[:space:]&quot;</span>) <span class="op">%&gt;%</span><span class="st"> </span>unlist</a></code></pre></div>
<pre><code>## [1] &quot;Primjer&quot;   &quot;funkcije&quot;  &quot;str_split&quot;</code></pre>
<p>Pokažimo sada jedan vrlo jednostavni primjer analize teksta. Izračunati ćemo frekvenciju pojave različitih u riječi u sljedećem paragrafu teksta.</p>
<hr />
<p><strong>Zadatak 10.19 - jednostavna analiza teksta</strong></p>
<div class="sourceCode" id="cb429"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb429-1" data-line-number="1">tekst &lt;-<span class="st"> &quot;In a hole in the ground there lived a hobbit. Not a nasty, </span></a>
<a class="sourceLine" id="cb429-2" data-line-number="2"><span class="st">dirty, wet hole, filled with the ends of worms and an oozy smell, nor </span></a>
<a class="sourceLine" id="cb429-3" data-line-number="3"><span class="st">yet a dry, bare, sandy hole with nothing in it to sit down on or to eat; </span></a>
<a class="sourceLine" id="cb429-4" data-line-number="4"><span class="st">it was a hobbit-hole, and that means comfort.</span></a>
<a class="sourceLine" id="cb429-5" data-line-number="5"></a>
<a class="sourceLine" id="cb429-6" data-line-number="6"><span class="st">It had a perfectly round door like a porthole, painted green, with a shiny </span></a>
<a class="sourceLine" id="cb429-7" data-line-number="7"><span class="st">yellow brass knob in the exact middle. The door opened on to a tube-shaped hall </span></a>
<a class="sourceLine" id="cb429-8" data-line-number="8"><span class="st">like a tunnel: a very comfortable tunnel without smoke, with paneled walls, and </span></a>
<a class="sourceLine" id="cb429-9" data-line-number="9"><span class="st">floors tiled and carpeted, provided with polished chairs, and lots and lots </span></a>
<a class="sourceLine" id="cb429-10" data-line-number="10"><span class="st">of pegs for hats and coats – the hobbit was fond of visitors. The tunnel wound </span></a>
<a class="sourceLine" id="cb429-11" data-line-number="11"><span class="st">on and on, going fairly but not quite straight into the side of the hill – The </span></a>
<a class="sourceLine" id="cb429-12" data-line-number="12"><span class="st">Hill, as all the people for many miles round called it – and many little round </span></a>
<a class="sourceLine" id="cb429-13" data-line-number="13"><span class="st">doors opened out of it, first on one side and then on another. No going upstairs </span></a>
<a class="sourceLine" id="cb429-14" data-line-number="14"><span class="st">for the hobbit: bedrooms, bathrooms, cellars, pantries (lots of these), </span></a>
<a class="sourceLine" id="cb429-15" data-line-number="15"><span class="st">wardrobes (he had whole rooms devoted to clothes), kitchens, dining-rooms, </span></a>
<a class="sourceLine" id="cb429-16" data-line-number="16"><span class="st">all were on the same floor, and indeed on the same passage. The best rooms </span></a>
<a class="sourceLine" id="cb429-17" data-line-number="17"><span class="st">were all on the left-hand side (going in), for these were the only ones to have </span></a>
<a class="sourceLine" id="cb429-18" data-line-number="18"><span class="st">windows, deep-set round windows looking over his garden, and meadows beyond, </span></a>
<a class="sourceLine" id="cb429-19" data-line-number="19"><span class="st">sloping down to the river.&quot;</span></a>
<a class="sourceLine" id="cb429-20" data-line-number="20"></a>
<a class="sourceLine" id="cb429-21" data-line-number="21"></a>
<a class="sourceLine" id="cb429-22" data-line-number="22"><span class="co"># pronađite najčešće riječi u gornjem tekstu korištenjem sljedeće procedure</span></a>
<a class="sourceLine" id="cb429-23" data-line-number="23"><span class="co"># - uklonite interpunkcijske znakove iz teksta</span></a>
<a class="sourceLine" id="cb429-24" data-line-number="24"><span class="co"># - prebacite tekst u &quot;lowercase&quot; (funkcija `tolower`)</span></a>
<a class="sourceLine" id="cb429-25" data-line-number="25"><span class="co"># - rastavite tekst na riječi po praznimama</span></a>
<a class="sourceLine" id="cb429-26" data-line-number="26"><span class="co"># - izbacite riječi od samo jednog ili dva znaka</span></a>
<a class="sourceLine" id="cb429-27" data-line-number="27"><span class="co"># - izbacite &quot;stop-riječi&quot;:  &quot;the&quot;, &quot;and&quot;, &quot;with&quot; i &quot;for&quot;</span></a>
<a class="sourceLine" id="cb429-28" data-line-number="28"><span class="co"># - uz pomoć funkcije table izračunajte frekvenciju pojedinih riječi</span></a>
<a class="sourceLine" id="cb429-29" data-line-number="29"><span class="co"># - izbacite riječi koje se pojavljuju samo jedan put</span></a>
<a class="sourceLine" id="cb429-30" data-line-number="30"><span class="co"># - sortirajte rezultat uz pomoć funkcije `sort`</span></a>
<a class="sourceLine" id="cb429-31" data-line-number="31"><span class="co"># - ispišite konačni rezultat na zaslon</span></a></code></pre></div>
<div class="fold s o">
<div class="sourceCode" id="cb430"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb430-1" data-line-number="1"><span class="kw">str_replace_all</span>(tekst, <span class="st">&#39;[:punct:]&#39;</span>, <span class="st">&#39;&#39;</span>) <span class="op">%&gt;%</span><span class="st"> </span>tolower <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb430-2" data-line-number="2"><span class="st">       </span><span class="kw">str_split</span>(<span class="st">&#39;[:space:]&#39;</span>) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">unlist</span>() -&gt;<span class="st"> </span>rez</a>
<a class="sourceLine" id="cb430-3" data-line-number="3">rez &lt;-<span class="st"> </span>rez[<span class="kw">str_length</span>(rez) <span class="op">&gt;</span><span class="st"> </span><span class="dv">2</span>] </a>
<a class="sourceLine" id="cb430-4" data-line-number="4">rez &lt;-<span class="st"> </span>rez[<span class="op">!</span>(rez <span class="op">%in%</span><span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;the&quot;</span>, <span class="st">&quot;and&quot;</span>, <span class="st">&quot;with&quot;</span>, <span class="st">&quot;for&quot;</span>))]</a>
<a class="sourceLine" id="cb430-5" data-line-number="5">rez &lt;-<span class="st"> </span><span class="kw">table</span>(rez) </a>
<a class="sourceLine" id="cb430-6" data-line-number="6">rez &lt;-<span class="st"> </span>rez[rez <span class="op">&gt;</span><span class="st"> </span><span class="dv">1</span>]</a>
<a class="sourceLine" id="cb430-7" data-line-number="7"><span class="kw">sort</span>(rez, <span class="dt">decreasing =</span> T)</a></code></pre></div>
<pre><code>## rez
##   round     all   going  hobbit    hole    lots    side  tunnel    were 
##       4       3       3       3       3       3       3       3       3 
##    door    down     had    hill    like    many     not  opened   rooms 
##       2       2       2       2       2       2       2       2       2 
##    same   these     was windows 
##       2       2       2       2</code></pre>
</div>
<hr />
</div>
</div>
<div id="zadaci-za-vjezbu-8" class="section level2 unnumbered">
<h2>Zadaci za vježbu</h2>
<p>Sljedeći zadaci odnose se na podatkovni skup pohranjen u CSV datoteci <code>crimeSample.csv</code> a koji predstavlja uzorak iz evidencije kriminalnih incidenata u gradu Philadelphiji (originalni podatkovni skup može se naći na <a href = "https://www.opendataphilly.org/dataset/crime-incidents">ovoj poveznici</a>). Originalni skup stupaca je reduciran a iz skupa svih obzervacija slučajnim odabirom uzorkovano je 1000 incidenata.</p>
<p>Prije rješavanja zadataka učitajte podatke u podatkovni okvir crimes i upoznajte se s podatkovnim skupom (<code>str</code>, <code>head</code>, itd.)</p>
<ol style="list-style-type: decimal">
<li><p>Pretvorite stupac sa vremenskom oznakom iz znakovnog tipa u <code>POSIXct</code> tip.</p></li>
<li><p>Podatkovnom okviru dodajte sljedeće stupce: <code>Year</code>, <code>Month</code>, <code>Hour</code>. Stupce popunite odgovarajućim informacijama iz vremenske oznake. Odgovorite na pitanje: u kojem mjesecu se događa najviše zločina? Koji sat u danu je prema podacima “najopasniji”?</p></li>
<li><p>Odgovorite na pitanje: koliki je postotak incidenata gdje opis incidenta sadrži riječ <code>&quot;burglary&quot;</code> ili <code>&quot;robbery&quot;</code>? (savjet: pretvorite cijeli stupac sa opisom zločina u mala slova uz pomoć funkcije <code>tolower()</code>).</p></li>
<li><p>Ispišite na zaslon sve jedinstvene četveroznamenkaste brojeve koje možete naći u nazivima ulica u kojima je evidentiran kriminalni incident.</p></li>
</ol>
<hr />
<p><a rel="license" href="http://creativecommons.org/licenses/by-nc-nd/4.0/"><img alt="Creative Commons License" style="border-width:0" src="https://i.creativecommons.org/l/by-nc-nd/4.0/88x31.png" /></a><br /><span xmlns:dct="http://purl.org/dc/terms/" property="dct:title">Programirajmo u R-u</span> by <a xmlns:cc="http://creativecommons.org/ns#" href="https://www.fer.unizg.hr/en/damir.pintar" property="cc:attributionName" rel="cc:attributionURL">Damir Pintar</a> is licensed under a <a rel="license" href="http://creativecommons.org/licenses/by-nc-nd/4.0/">Creative Commons Attribution-NonCommercial-NoDerivatives 4.0 International License</a>.<br />Based on a work at <a xmlns:dct="http://purl.org/dc/terms/" href="https://ratnip.github.io/FER_OPJR/" rel="dct:source">https://ratnip.github.io/FER_OPJR/</a></p>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="cijev.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="prilagodba-podatkovnih-skupova-uz-paket-dplyr.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"google": false,
"linkedin": false,
"weibo": false,
"instapper": false,
"vk": false,
"all": ["facebook", "google", "twitter", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"download": null,
"toc": {
"collapse": "section",
"scroll_highlight": true
},
"toolbar": {
"position": "fixed",
"edit": null,
"download": null,
"search": true
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdn.bootcss.com/mathjax/2.7.1/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:" && /^https?:/.test(src))
      src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
