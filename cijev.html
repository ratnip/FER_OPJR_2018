<!DOCTYPE html>
<html >

<head>

  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>Programirajmo u R-u</title>
  <meta name="description" content="Udzbenik za vještinu ‘Osnove programskog jezika R’ na Fakultetu elektrotehnike i racunarstva, Sveuciliste u Zagrebu.">
  <meta name="generator" content="bookdown 0.7 and GitBook 2.6.7">

  <meta property="og:title" content="Programirajmo u R-u" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="Udzbenik za vještinu ‘Osnove programskog jezika R’ na Fakultetu elektrotehnike i racunarstva, Sveuciliste u Zagrebu." />
  <meta name="github-repo" content="rstudio/bookdown-demo" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Programirajmo u R-u" />
  
  <meta name="twitter:description" content="Udzbenik za vještinu ‘Osnove programskog jezika R’ na Fakultetu elektrotehnike i racunarstva, Sveuciliste u Zagrebu." />
  

<meta name="author" content="Damir Pintar">


<meta name="date" content="2018-12-18">

  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  
  
<link rel="prev" href="apply.html">
<link rel="next" href="datumi.html">
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />








<style type="text/css">
.showopt {
  background-color: #004c93;
  color: #FFFFFF; 
  width: 140px;
  height: 4	0px;
  text-align: center;
  vertical-align: middle !important;
  float: right;
  font-family: sans-serif;
  font-size:10 pt;
  border-radius: 8px;
}

.showopt:hover {
    background-color: #dfe4f2;
    color: #004c93;
}

pre.plot {
  background-color: white !important;
}
</style>

<script>
 $(document).ready(function() {

  $chunks = $('.fold');

  $chunks.each(function () {

    // add button to source code chunks
    if ( $(this).hasClass('s') ) {
      $('pre.r', this).prepend("<div class=\"showopt\">Prikaži rješenje</div><br style=\"line-height:22px;\"/>");
      $('pre.r', this).children('code').attr('class', 'folded');
    }

    // add button to output chunks
    if ( $(this).hasClass('o') ) {
      $('pre:not(.r)', this).has('code').prepend("<div class=\"showopt\">Prikaži ispis</div><br style=\"line-height:22px;\"/>");
      $('pre:not(.r)', this).children('code:not(r)').addClass('folded');

      // add button to plots
      $(this).find('img').wrap('<pre class=\"plot\"></pre>');
      $('pre.plot', this).prepend("<div class=\"showopt\">Prikaži sliku</div><br style=\"line-height:22px;\"/>");
      $('pre.plot', this).children('img').addClass('folded');

    }
  });

  // hide all chunks when document is loaded
  $('.folded').css('display', 'none')

  // function to toggle the visibility
  $('.showopt').click(function() {
    var label = $(this).html();
    if (label.indexOf("Prikaži") >= 0) {
      $(this).html(label.replace("Prikaži", "Sakrij"));
    } else {
      $(this).html(label.replace("Sakrij", "Prikaži"));
    }
    $(this).siblings('code, img').slideToggle('fast', 'swing');
  });
});
</script>


<style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; left: -4em; }
pre.numberSource a.sourceLine::before
  { content: attr(data-line-number);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>(Udžbenik za vještinu “Osnove programskog jezika R”)</a><ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#predgovor"><i class="fa fa-check"></i>Predgovor</a></li>
</ul></li>
<li class="part"><span><b>I Osnovni elementi jezika R</b></span></li>
<li class="chapter" data-level="1" data-path="uvod.html"><a href="uvod.html"><i class="fa fa-check"></i><b>1</b> Uvod</a><ul>
<li class="chapter" data-level="1.1" data-path="uvod.html"><a href="uvod.html#sto-je-programski-jezik-r"><i class="fa fa-check"></i><b>1.1</b> Što je programski jezik R?</a><ul>
<li class="chapter" data-level="1.1.1" data-path="uvod.html"><a href="uvod.html#opcenito-o-r-u"><i class="fa fa-check"></i><b>1.1.1</b> Općenito o R-u</a></li>
<li class="chapter" data-level="1.1.2" data-path="uvod.html"><a href="uvod.html#alternative-jeziku-r"><i class="fa fa-check"></i><b>1.1.2</b> Alternative jeziku R</a></li>
</ul></li>
<li class="chapter" data-level="1.2" data-path="uvod.html"><a href="uvod.html#instalacija-programske-podrske"><i class="fa fa-check"></i><b>1.2</b> Instalacija programske podrške</a></li>
<li class="chapter" data-level="1.3" data-path="uvod.html"><a href="uvod.html#pregled-razvojnog-sucelja-rstudio"><i class="fa fa-check"></i><b>1.3</b> Pregled razvojnog sučelja <em>RStudio</em></a><ul>
<li class="chapter" data-level="1.3.1" data-path="uvod.html"><a href="uvod.html#interaktivna-konzola"><i class="fa fa-check"></i><b>1.3.1</b> Interaktivna konzola</a></li>
<li class="chapter" data-level="1.3.2" data-path="uvod.html"><a href="uvod.html#pisanje-r-skripti"><i class="fa fa-check"></i><b>1.3.2</b> Pisanje R skripti</a></li>
<li class="chapter" data-level="1.3.3" data-path="uvod.html"><a href="uvod.html#r-markdown"><i class="fa fa-check"></i><b>1.3.3</b> <em>R Markdown</em></a></li>
</ul></li>
<li class="chapter" data-level="1.4" data-path="uvod.html"><a href="uvod.html#kako-koristiti-ovaj-udzbenik"><i class="fa fa-check"></i><b>1.4</b> Kako koristiti ovaj udžbenik?</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="tipovi.html"><a href="tipovi.html"><i class="fa fa-check"></i><b>2</b> Osnovni tipovi podataka i operatori</a><ul>
<li class="chapter" data-level="2.1" data-path="tipovi.html"><a href="tipovi.html#osnovni-tipovi-podataka"><i class="fa fa-check"></i><b>2.1</b> Osnovni tipovi podataka</a></li>
<li class="chapter" data-level="2.2" data-path="tipovi.html"><a href="tipovi.html#operatori"><i class="fa fa-check"></i><b>2.2</b> Operatori</a></li>
<li class="chapter" data-level="2.3" data-path="tipovi.html"><a href="tipovi.html#nedostajuce-nepoznate-i-nemoguce-vrijednosti"><i class="fa fa-check"></i><b>2.3</b> Nedostajuće, nepoznate i nemoguće vrijednosti</a></li>
<li class="chapter" data-level="" data-path="tipovi.html"><a href="tipovi.html#zadaci-za-vjezbu"><i class="fa fa-check"></i>Zadaci za vježbu</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="vektori.html"><a href="vektori.html"><i class="fa fa-check"></i><b>3</b> Vektori, matrice i liste</a><ul>
<li class="chapter" data-level="3.1" data-path="vektori.html"><a href="vektori.html#vektori-1"><i class="fa fa-check"></i><b>3.1</b> Vektori</a><ul>
<li class="chapter" data-level="3.1.1" data-path="vektori.html"><a href="vektori.html#stvaranje-vektora"><i class="fa fa-check"></i><b>3.1.1</b> Stvaranje vektora</a></li>
<li class="chapter" data-level="3.1.2" data-path="vektori.html"><a href="vektori.html#operator"><i class="fa fa-check"></i><b>3.1.2</b> Operator <code>[</code></a></li>
<li class="chapter" data-level="3.1.3" data-path="vektori.html"><a href="vektori.html#principi-vektorizacije-i-recikliranja"><i class="fa fa-check"></i><b>3.1.3</b> Principi vektorizacije i recikliranja</a></li>
</ul></li>
<li class="chapter" data-level="3.2" data-path="vektori.html"><a href="vektori.html#indeksni-vektori"><i class="fa fa-check"></i><b>3.2</b> Indeksni vektori</a><ul>
<li class="chapter" data-level="3.2.1" data-path="vektori.html"><a href="vektori.html#lokacijsko-referenciranje"><i class="fa fa-check"></i><b>3.2.1</b> Lokacijsko referenciranje</a></li>
<li class="chapter" data-level="3.2.2" data-path="vektori.html"><a href="vektori.html#uvjetno-referenciranje"><i class="fa fa-check"></i><b>3.2.2</b> Uvjetno referenciranje</a></li>
<li class="chapter" data-level="3.2.3" data-path="vektori.html"><a href="vektori.html#imensko-referenciranje"><i class="fa fa-check"></i><b>3.2.3</b> Imensko referenciranje</a></li>
</ul></li>
<li class="chapter" data-level="3.3" data-path="vektori.html"><a href="vektori.html#matrice-i-polja"><i class="fa fa-check"></i><b>3.3</b> Matrice i polja</a><ul>
<li class="chapter" data-level="3.3.1" data-path="vektori.html"><a href="vektori.html#rezanje-matrica"><i class="fa fa-check"></i><b>3.3.1</b> Rezanje matrica</a></li>
</ul></li>
<li class="chapter" data-level="3.4" data-path="vektori.html"><a href="vektori.html#liste"><i class="fa fa-check"></i><b>3.4</b> Liste</a></li>
<li class="chapter" data-level="" data-path="vektori.html"><a href="vektori.html#zadaci-za-vjezbu-1"><i class="fa fa-check"></i>Zadaci za vježbu</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="okviri.html"><a href="okviri.html"><i class="fa fa-check"></i><b>4</b> Podatkovni okviri i faktori</a><ul>
<li class="chapter" data-level="4.1" data-path="okviri.html"><a href="okviri.html#podatkovni-okviri"><i class="fa fa-check"></i><b>4.1</b> Podatkovni okviri</a></li>
<li class="chapter" data-level="4.2" data-path="okviri.html"><a href="okviri.html#odabir-redaka-i-stupaca-podatkovnih-okvira"><i class="fa fa-check"></i><b>4.2</b> Odabir redaka i stupaca podatkovnih okvira</a></li>
<li class="chapter" data-level="4.3" data-path="okviri.html"><a href="okviri.html#dodavanje-i-brisanje-redaka-i-stupaca"><i class="fa fa-check"></i><b>4.3</b> Dodavanje i brisanje redaka i stupaca</a></li>
<li class="chapter" data-level="4.4" data-path="okviri.html"><a href="okviri.html#faktori"><i class="fa fa-check"></i><b>4.4</b> Faktori</a></li>
<li class="chapter" data-level="" data-path="okviri.html"><a href="okviri.html#zadaci-za-vjezbu-2"><i class="fa fa-check"></i>Zadaci za vježbu</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="kontrola.html"><a href="kontrola.html"><i class="fa fa-check"></i><b>5</b> Kontrola toka i objekti</a><ul>
<li class="chapter" data-level="5.1" data-path="kontrola.html"><a href="kontrola.html#naredbe-kontrole-toka"><i class="fa fa-check"></i><b>5.1</b> Naredbe kontrole toka</a><ul>
<li class="chapter" data-level="5.1.1" data-path="kontrola.html"><a href="kontrola.html#uvjetno-izvoenje-naredbi"><i class="fa fa-check"></i><b>5.1.1</b> Uvjetno izvođenje naredbi</a></li>
<li class="chapter" data-level="5.1.2" data-path="kontrola.html"><a href="kontrola.html#programske-petlje"><i class="fa fa-check"></i><b>5.1.2</b> Programske petlje</a></li>
<li class="chapter" data-level="5.1.3" data-path="kontrola.html"><a href="kontrola.html#petlja-repeat"><i class="fa fa-check"></i><b>5.1.3</b> Petlja <code>repeat</code></a></li>
<li class="chapter" data-level="5.1.4" data-path="kontrola.html"><a href="kontrola.html#petlja-while"><i class="fa fa-check"></i><b>5.1.4</b> Petlja <code>while</code></a></li>
<li class="chapter" data-level="5.1.5" data-path="kontrola.html"><a href="kontrola.html#petlja-for"><i class="fa fa-check"></i><b>5.1.5</b> Petlja <code>for</code></a></li>
</ul></li>
<li class="chapter" data-level="5.2" data-path="kontrola.html"><a href="kontrola.html#objektni-modeli-u-jeziku-r"><i class="fa fa-check"></i><b>5.2</b> Objektni modeli u jeziku R</a><ul>
<li class="chapter" data-level="5.2.1" data-path="kontrola.html"><a href="kontrola.html#pregled-objektnog-modela-s3"><i class="fa fa-check"></i><b>5.2.1</b> Pregled objektnog modela S3</a></li>
<li class="chapter" data-level="5.2.2" data-path="kontrola.html"><a href="kontrola.html#genericke-funkcije"><i class="fa fa-check"></i><b>5.2.2</b> Generičke funkcije</a></li>
<li class="chapter" data-level="5.2.3" data-path="kontrola.html"><a href="kontrola.html#zakljucci-o-s3-objektima"><i class="fa fa-check"></i><b>5.2.3</b> Zaključci o S3 objektima</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="kontrola.html"><a href="kontrola.html#zadaci-za-vjezbu-3"><i class="fa fa-check"></i>Zadaci za vježbu</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="paketi.html"><a href="paketi.html"><i class="fa fa-check"></i><b>6</b> Paketi, ugrađene funkcije i okoline</a><ul>
<li class="chapter" data-level="6.1" data-path="paketi.html"><a href="paketi.html#rad-s-paketima"><i class="fa fa-check"></i><b>6.1</b> Rad s paketima</a></li>
<li class="chapter" data-level="6.2" data-path="paketi.html"><a href="paketi.html#ugraene-funkcije"><i class="fa fa-check"></i><b>6.2</b> Ugrađene funkcije</a></li>
<li class="chapter" data-level="6.3" data-path="paketi.html"><a href="paketi.html#okoline"><i class="fa fa-check"></i><b>6.3</b> Okoline</a></li>
<li class="chapter" data-level="" data-path="paketi.html"><a href="paketi.html#zadaci-za-vjezbu-4"><i class="fa fa-check"></i>Zadaci za vježbu</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="korisnik.html"><a href="korisnik.html"><i class="fa fa-check"></i><b>7</b> Korisnički definirane funkcije</a><ul>
<li class="chapter" data-level="7.1" data-path="korisnik.html"><a href="korisnik.html#kako-definirati-funkciju"><i class="fa fa-check"></i><b>7.1</b> Kako definirati funkciju</a><ul>
<li class="chapter" data-level="7.1.1" data-path="korisnik.html"><a href="korisnik.html#princip-kopiranja-kod-izmjene-copy-on-modify"><i class="fa fa-check"></i><b>7.1.1</b> Princip “kopiranja kod izmjene” (copy-on-modify)</a></li>
<li class="chapter" data-level="7.1.2" data-path="korisnik.html"><a href="korisnik.html#funkcija-kao-objekt"><i class="fa fa-check"></i><b>7.1.2</b> Funkcija kao objekt</a></li>
<li class="chapter" data-level="7.1.3" data-path="korisnik.html"><a href="korisnik.html#genericke-funkcije-1"><i class="fa fa-check"></i><b>7.1.3</b> Generičke funkcije</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="korisnik.html"><a href="korisnik.html#zadaci-za-vjezbu-5"><i class="fa fa-check"></i>Zadaci za vježbu</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="apply.html"><a href="apply.html"><i class="fa fa-check"></i><b>8</b> Porodica funkcija <code>apply</code></a><ul>
<li class="chapter" data-level="8.1" data-path="apply.html"><a href="apply.html#sto-su-apply-funkcije"><i class="fa fa-check"></i><b>8.1</b> Što su <code>apply</code> funkcije?</a></li>
<li class="chapter" data-level="8.2" data-path="apply.html"><a href="apply.html#funkcija-apply"><i class="fa fa-check"></i><b>8.2</b> Funkcija <code>apply</code></a></li>
<li class="chapter" data-level="8.3" data-path="apply.html"><a href="apply.html#funkcije-lapply-sapply-i-vapply"><i class="fa fa-check"></i><b>8.3</b> Funkcije <code>lapply</code>, <code>sapply</code> i <code>vapply</code></a></li>
<li class="chapter" data-level="8.4" data-path="apply.html"><a href="apply.html#ostale-funkcije-iz-porodice-apply-i-dostupne-alternative"><i class="fa fa-check"></i><b>8.4</b> Ostale funkcije iz porodice <code>apply</code> i dostupne alternative</a></li>
<li class="chapter" data-level="" data-path="apply.html"><a href="apply.html#zadaci-za-vjezbu-6"><i class="fa fa-check"></i>Zadaci za vježbu</a></li>
</ul></li>
<li class="part"><span><b>II Upravljanje podacima i vizualizacije</b></span></li>
<li class="chapter" data-level="9" data-path="cijev.html"><a href="cijev.html"><i class="fa fa-check"></i><b>9</b> Operator cjevovoda i uredni podaci</a><ul>
<li class="chapter" data-level="9.1" data-path="cijev.html"><a href="cijev.html#operator-cjevovoda"><i class="fa fa-check"></i><b>9.1</b> Operator cjevovoda</a></li>
<li class="chapter" data-level="9.2" data-path="cijev.html"><a href="cijev.html#uredni-podaci"><i class="fa fa-check"></i><b>9.2</b> Uredni podaci</a><ul>
<li class="chapter" data-level="9.2.1" data-path="cijev.html"><a href="cijev.html#funkcije-gather-i-spread"><i class="fa fa-check"></i><b>9.2.1</b> Funkcije <code>gather</code> i <code>spread</code></a></li>
<li class="chapter" data-level="9.2.2" data-path="cijev.html"><a href="cijev.html#funkcije-separate-i-unite"><i class="fa fa-check"></i><b>9.2.2</b> Funkcije <code>separate</code> i <code>unite</code></a></li>
</ul></li>
<li class="chapter" data-level="" data-path="cijev.html"><a href="cijev.html#zadaci-za-vjezbu-7"><i class="fa fa-check"></i>Zadaci za vježbu</a></li>
</ul></li>
<li class="chapter" data-level="10" data-path="datumi.html"><a href="datumi.html"><i class="fa fa-check"></i><b>10</b> Rad sa datumima i znakovnim nizovima</a><ul>
<li class="chapter" data-level="10.1" data-path="datumi.html"><a href="datumi.html#rad-sa-datumima"><i class="fa fa-check"></i><b>10.1</b> Rad sa datumima</a><ul>
<li class="chapter" data-level="10.1.1" data-path="datumi.html"><a href="datumi.html#klasa-date"><i class="fa fa-check"></i><b>10.1.1</b> Klasa <code>Date</code></a></li>
<li class="chapter" data-level="10.1.2" data-path="datumi.html"><a href="datumi.html#klase-posixct-i-posixlt"><i class="fa fa-check"></i><b>10.1.2</b> Klase <code>POSIXct</code> i <code>POSIXlt</code></a></li>
<li class="chapter" data-level="10.1.3" data-path="datumi.html"><a href="datumi.html#paket-lubridate"><i class="fa fa-check"></i><b>10.1.3</b> Paket <code>lubridate</code></a></li>
</ul></li>
<li class="chapter" data-level="10.2" data-path="datumi.html"><a href="datumi.html#rad-sa-znakovnim-nizovima"><i class="fa fa-check"></i><b>10.2</b> Rad sa znakovnim nizovima</a><ul>
<li class="chapter" data-level="10.2.1" data-path="datumi.html"><a href="datumi.html#analiza-teksta-i-regularni-izrazi"><i class="fa fa-check"></i><b>10.2.1</b> Analiza teksta i regularni izrazi</a></li>
<li class="chapter" data-level="10.2.2" data-path="datumi.html"><a href="datumi.html#paket-stringr"><i class="fa fa-check"></i><b>10.2.2</b> Paket <code>stringr</code></a></li>
</ul></li>
<li class="chapter" data-level="" data-path="datumi.html"><a href="datumi.html#zadaci-za-vjezbu-8"><i class="fa fa-check"></i>Zadaci za vježbu</a></li>
</ul></li>
<li class="chapter" data-level="11" data-path="prilagodba-podatkovnih-skupova-uz-paket-dplyr.html"><a href="prilagodba-podatkovnih-skupova-uz-paket-dplyr.html"><i class="fa fa-check"></i><b>11</b> Prilagodba podatkovnih skupova uz paket <code>dplyr</code></a><ul>
<li class="chapter" data-level="11.1" data-path="prilagodba-podatkovnih-skupova-uz-paket-dplyr.html"><a href="prilagodba-podatkovnih-skupova-uz-paket-dplyr.html#ogledni-podatkovni-skup-titanic"><i class="fa fa-check"></i><b>11.1</b> Ogledni podatkovni skup: <em>Titanic</em></a></li>
<li class="chapter" data-level="11.2" data-path="prilagodba-podatkovnih-skupova-uz-paket-dplyr.html"><a href="prilagodba-podatkovnih-skupova-uz-paket-dplyr.html#stvaranje-podskupa-obzervacija-uz-filter-i-slice"><i class="fa fa-check"></i><b>11.2</b> Stvaranje podskupa obzervacija uz <code>filter</code> i <code>slice</code></a></li>
<li class="chapter" data-level="11.3" data-path="prilagodba-podatkovnih-skupova-uz-paket-dplyr.html"><a href="prilagodba-podatkovnih-skupova-uz-paket-dplyr.html#stvaranje-podskupa-varijabli-uz-select"><i class="fa fa-check"></i><b>11.3</b> Stvaranje podskupa varijabli uz <code>select</code></a></li>
<li class="chapter" data-level="11.4" data-path="prilagodba-podatkovnih-skupova-uz-paket-dplyr.html"><a href="prilagodba-podatkovnih-skupova-uz-paket-dplyr.html#stvaranje-novih-stupaca-uz-mutate"><i class="fa fa-check"></i><b>11.4</b> Stvaranje novih stupaca uz <code>mutate</code></a></li>
<li class="chapter" data-level="11.5" data-path="prilagodba-podatkovnih-skupova-uz-paket-dplyr.html"><a href="prilagodba-podatkovnih-skupova-uz-paket-dplyr.html#ogledni-podatkovni-skup-houston-flights"><i class="fa fa-check"></i><b>11.5</b> Ogledni podatkovni skup: <em>Houston flights</em></a></li>
<li class="chapter" data-level="11.6" data-path="prilagodba-podatkovnih-skupova-uz-paket-dplyr.html"><a href="prilagodba-podatkovnih-skupova-uz-paket-dplyr.html#grupiranje-i-agregacija-uz-group_by-i-summarise"><i class="fa fa-check"></i><b>11.6</b> Grupiranje i agregacija uz <code>group_by</code> i <code>summarise</code></a></li>
<li class="chapter" data-level="11.7" data-path="prilagodba-podatkovnih-skupova-uz-paket-dplyr.html"><a href="prilagodba-podatkovnih-skupova-uz-paket-dplyr.html#spajanje-podatkovnih-okvira-uz-join-funkcije"><i class="fa fa-check"></i><b>11.7</b> Spajanje podatkovnih okvira uz join funkcije</a></li>
<li class="chapter" data-level="11.8" data-path="prilagodba-podatkovnih-skupova-uz-paket-dplyr.html"><a href="prilagodba-podatkovnih-skupova-uz-paket-dplyr.html#integracija-sa-relacijskim-bazama-podataka"><i class="fa fa-check"></i><b>11.8</b> Integracija sa relacijskim bazama podataka</a></li>
<li class="chapter" data-level="" data-path="prilagodba-podatkovnih-skupova-uz-paket-dplyr.html"><a href="prilagodba-podatkovnih-skupova-uz-paket-dplyr.html#zadaci-za-vjezbu-9"><i class="fa fa-check"></i>Zadaci za vježbu</a></li>
</ul></li>
<li class="chapter" data-level="12" data-path="ggplot2.html"><a href="ggplot2.html"><i class="fa fa-check"></i><b>12</b> Vizualizacija podataka uz paket <code>ggplot2</code></a><ul>
<li class="chapter" data-level="12.1" data-path="ggplot2.html"><a href="ggplot2.html#eksploratorna-analiza-podataka"><i class="fa fa-check"></i><b>12.1</b> Eksploratorna analiza podataka</a></li>
<li class="chapter" data-level="12.2" data-path="ggplot2.html"><a href="ggplot2.html#vizualizacija-podataka-uz-pomoc-jezika-r"><i class="fa fa-check"></i><b>12.2</b> Vizualizacija podataka uz pomoć jezika R</a></li>
<li class="chapter" data-level="12.3" data-path="ggplot2.html"><a href="ggplot2.html#graficka-gramatika-i-paket-ggplot2"><i class="fa fa-check"></i><b>12.3</b> Grafička gramatika i paket <code>ggplot2</code></a><ul>
<li class="chapter" data-level="12.3.1" data-path="ggplot2.html"><a href="ggplot2.html#aspekti-podataka-estetike-i-geometrije"><i class="fa fa-check"></i><b>12.3.1</b> Aspekti podataka, estetike i geometrije</a></li>
<li class="chapter" data-level="12.3.2" data-path="ggplot2.html"><a href="ggplot2.html#fiksni-parametri-geometrije"><i class="fa fa-check"></i><b>12.3.2</b> Fiksni parametri geometrije</a></li>
<li class="chapter" data-level="12.3.3" data-path="ggplot2.html"><a href="ggplot2.html#aspekti-statistike-i-pozicije"><i class="fa fa-check"></i><b>12.3.3</b> Aspekti statistike i pozicije</a></li>
<li class="chapter" data-level="12.3.4" data-path="ggplot2.html"><a href="ggplot2.html#povezanost-geometrije-i-statistike"><i class="fa fa-check"></i><b>12.3.4</b> Povezanost geometrije i statistike</a></li>
<li class="chapter" data-level="12.3.5" data-path="ggplot2.html"><a href="ggplot2.html#aspekti-skale-koordinatnog-sustava-i-teme"><i class="fa fa-check"></i><b>12.3.5</b> Aspekti skale, koordinatnog sustava i teme</a></li>
<li class="chapter" data-level="12.3.6" data-path="ggplot2.html"><a href="ggplot2.html#uvjetni-facetirani-grafovi"><i class="fa fa-check"></i><b>12.3.6</b> Uvjetni (facetirani) grafovi</a></li>
</ul></li>
<li class="chapter" data-level="12.4" data-path="ggplot2.html"><a href="ggplot2.html#grafovi-u-eksploratornoj-analizi-i-izvjestavanju"><i class="fa fa-check"></i><b>12.4</b> Grafovi u eksploratornoj analizi i izvještavanju</a></li>
<li class="chapter" data-level="" data-path="ggplot2.html"><a href="ggplot2.html#zadaci-za-vjezbu-10"><i class="fa fa-check"></i>Zadaci za vježbu</a></li>
</ul></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Programirajmo u R-u</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="cijev" class="section level1">
<h1><span class="header-section-number">9</span> Operator cjevovoda i uredni podaci</h1>
<hr />
<div id="operator-cjevovoda" class="section level2">
<h2><span class="header-section-number">9.1</span> Operator cjevovoda</h2>
<p>Pogledajmo sljedeći primjer: zamislimo da u jeziku R želimo stvoriti 100 nasumičnih realnih varijabli u rasponu [0,100], zaokružiti ih na dvije decimale, iz ovog skupa odabrati uzorak od 10 varijabli, izračunati aritmetičku sredinu uzorka i ispisati ga na zaslon. Jedno od mogućih programskih rješenja moglo bi biti sljedeće:</p>
<div class="sourceCode" id="cb309"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb309-1" data-line-number="1"><span class="kw">set.seed</span>(<span class="dv">1234</span>)  <span class="co"># (zbog ponovljivosti)</span></a>
<a class="sourceLine" id="cb309-2" data-line-number="2"></a>
<a class="sourceLine" id="cb309-3" data-line-number="3"><span class="co"># rješenje gornjeg primjera</span></a>
<a class="sourceLine" id="cb309-4" data-line-number="4">rez &lt;-<span class="st"> </span><span class="kw">runif</span>(<span class="dv">100</span>, <span class="dv">0</span>, <span class="dv">100</span>) <span class="co"># 100 nasumičnih varijabli iz uniformne razdiobe od 0 do 100</span></a>
<a class="sourceLine" id="cb309-5" data-line-number="5">rez &lt;-<span class="st"> </span><span class="kw">round</span>(rez,<span class="dv">2</span>)</a>
<a class="sourceLine" id="cb309-6" data-line-number="6">rez &lt;-<span class="st"> </span><span class="kw">sample</span>(rez, <span class="dv">10</span>)</a>
<a class="sourceLine" id="cb309-7" data-line-number="7">rez &lt;-<span class="st"> </span><span class="kw">mean</span>(rez)</a>
<a class="sourceLine" id="cb309-8" data-line-number="8">rez</a></code></pre></div>
<pre><code>## [1] 51.123</code></pre>
<p>Ovakav kod ima dosta nepotrebnog ponavljanja - u svakom retku koristimo varijablu <code>rez</code> koja čuva međurezultate i operator pridruživanja pomoću kojeg pridružujemo nove rezultate varijabli <code>rez</code>. Alternativno, mogli smo sve obaviti u jednom retku.</p>
<hr />
<p><strong>Zadatak 9.1 - učahurene funkcije</strong></p>
<div class="sourceCode" id="cb311"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb311-1" data-line-number="1"><span class="kw">set.seed</span>(<span class="dv">1234</span>)</a>
<a class="sourceLine" id="cb311-2" data-line-number="2"></a>
<a class="sourceLine" id="cb311-3" data-line-number="3"><span class="co"># ponovite gornji primjer, ali uz pomoć samo jednog retka programskog koda</span></a></code></pre></div>
<div class="fold s o">
<div class="sourceCode" id="cb312"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb312-1" data-line-number="1"><span class="kw">mean</span>(<span class="kw">sample</span>(<span class="kw">round</span>(<span class="kw">runif</span>(<span class="dv">100</span>, <span class="dv">0</span>, <span class="dv">100</span>), <span class="dv">2</span>), <span class="dv">10</span>))</a></code></pre></div>
<pre><code>## [1] 51.123</code></pre>
</div>
<hr />
<p>Ovdje vidimo jedan tipičan primjer “kodnog sendviča” koji nije problem samo u R-u, već se pojavljuje u većini programskih jezika - rezultat jedne funkcije postaje ulaz u drugu te ukoliko želimo sve obaviti bez eksplicitnog čuvanja međurezultata kao rezultat ćemo dobiti programski kod koji je podložan greškama kod pisanja te je vrlo teško čitljiv.</p>
<p>Prirodan način interpretacije ovakvog primjera bio bi “slijeva na desno”; kad obavimo jedan posao, rezultat postaje ulaz u drugi posao i tako sve do završetka procesa. Ako bi postojao način kada bi mogli ovakvu intuitivnu interpretaciju predočiti programskim kodom, pojednostavili bismo si ne samo pisanje koda, već bi takav kod postao daleko čitljiviji i lakši za održavanje i eventualnu naknadnu prilagodbu. Upravo ovo bila je motivacija za razvoj tzv. “<em>pipeline</em>” operatora kojeg nudi paket <code>magrittr</code> <span class="citation">(Bache and Wickham <a href="#ref-R-magrittr">2014</a>)</span>.</p>
<p>Paket čudnog imena zapravo je inspiriran imenom apstraktnog slikara Renea Magrittea, točnije njegovom slavnom slikom “<em>La trahison des images</em>” koja prikazuje lulu ispod koje su riječi “<em>Ceci n’est pas une pipe</em>”. Na isti način paket <code>magrittr</code> donosi “<em>pipeline</em>” ili “<em>pipe</em>” operator <code>%&gt;%</code> koji “nije lula”. Štogod mislili o navedenom slikarskom djelu ili igri riječi koja je inspirirala ovaj paket, ono što je neporecivo jest činjenica da “<em>pipeline</em>” operator programski kod čini daleko čitljivijim te da je postao izrazito omiljen u R zajednici, pogotovo kod procedura koje uključuju intenzivno “ulančavanje” funkcija.</p>
<p>Kako radi <code>%&gt;%</code> operator? Vrlo jednostavno - postavimo ga nakon poziva neke funkcije i iza njega navedemo poziv druge funkcije u kojem mjesto rezultata prve naznačimo točkom. Ovo možemo raditi koliko god puta želimo, tj. ovisno koliko poziva “ulančavamo”.</p>
<div class="sourceCode" id="cb314"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb314-1" data-line-number="1"><span class="kw">h</span>(<span class="kw">g</span>(<span class="kw">f</span>(x), y), z, w)                      <span class="co"># kod bez %&gt;% operatora</span></a>
<a class="sourceLine" id="cb314-2" data-line-number="2"></a>
<a class="sourceLine" id="cb314-3" data-line-number="3"><span class="kw">f</span>(x) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">g</span>(., y) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">h</span>(., z, w)          <span class="co"># kod sa %&gt;% operatorom</span></a></code></pre></div>
<p>Ako je rezultat prethodne funkcije na prvom mjestu sljedeće funkcije, onda se točka (štoviše, cijeli taj argument) može izbaciti, tako da je sintaksa još kraća:</p>
<div class="sourceCode" id="cb315"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb315-1" data-line-number="1"><span class="kw">f</span>(x) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">g</span>(y) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">h</span>(z,w)                 <span class="co"># kod sa %&gt;% bez korištenja točke</span></a></code></pre></div>
<p>Ukoliko ne želimo koristiti točku, moramo samo voditi računa da su pozivi funkcija u lancu zapravo formalno nepravilni, jer imaju “nevidljivi” prvi argument. Usprkos tome, mnogi R programeri vole ovakvu sintaksu jer zahtijeva manje tipkanja i nešto je preglednija, a spomenuta nepravilnost ne smeta dok god je programer upoznat sa postojanjem “nevidljivog” argumenta.</p>
<p>Probajmo sada preoblikovati naš prvi primjer uz pomoć <code>%&gt;%</code> operatora.</p>
<hr />
<p><strong>Zadatak 9.2 - operator <code>%&gt;%</code></strong></p>
<div class="sourceCode" id="cb316"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb316-1" data-line-number="1"><span class="kw">set.seed</span>(<span class="dv">1234</span>)</a>
<a class="sourceLine" id="cb316-2" data-line-number="2"></a>
<a class="sourceLine" id="cb316-3" data-line-number="3"><span class="co"># ponovo rješite prvi primjer uz pomoć %&gt;% operatora</span></a></code></pre></div>
<div class="fold s o">
<div class="sourceCode" id="cb317"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb317-1" data-line-number="1"><span class="kw">set.seed</span>(<span class="dv">1234</span>)</a>
<a class="sourceLine" id="cb317-2" data-line-number="2"></a>
<a class="sourceLine" id="cb317-3" data-line-number="3"><span class="kw">runif</span>(<span class="dv">100</span>, <span class="dv">0</span>, <span class="dv">100</span>) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">round</span>(<span class="dv">2</span>) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">sample</span>(<span class="dv">10</span>) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">mean</span>() <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">print</span>()</a></code></pre></div>
<pre><code>## [1] 51.123</code></pre>
</div>
<hr />
<p>Uočite kako čitanjem gornjeg programskog koda vrlo lagano interpretiramo smisao te linije programskog koda, pogotovo u usporedbi sa istom naredbom napisanom u obliku “sendviča”.</p>
<p>Krajnji rezultat našeg “lanca” funkcija možemo pohraniti uobičajenim načinom:</p>
<div class="sourceCode" id="cb319"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb319-1" data-line-number="1">suma &lt;-<span class="st"> </span><span class="dv">1</span><span class="op">:</span><span class="dv">10</span> <span class="op">%&gt;%</span><span class="st"> </span>sum   <span class="co"># rezultat se pohranjuje u varijablu &#39;suma&#39;</span></a></code></pre></div>
<p>ali je možda vizualno konzistentnije koristiti “obrnuti” operator pridruživanja: <code>-&gt;</code>.</p>
<div class="sourceCode" id="cb320"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb320-1" data-line-number="1"><span class="dv">1</span><span class="op">:</span><span class="dv">10</span> <span class="op">%&gt;%</span><span class="st"> </span>sum -&gt;<span class="st"> </span>suma   <span class="co"># radi istovjetno gornjem primjeru</span></a></code></pre></div>
<p>Uočite da u situacijama kada je rezultat prethodne funkcije jedini parametar sljedeće možemo izbaciti zagrade u potpunosti (dakle u gornjim primjerima <code>sum</code>, <code>sum()</code> ili <code>sum(.)</code> bi svi radili jednako).</p>
<p>Pokušajmo sada kombinirati <code>%&gt;%</code> operator i <code>lapply</code> na primjeru već viđenom u poglavlju o funkcijama iz porodice <code>apply</code>.</p>
<hr />
<p><strong>Zadatak 9.3 - funkcija <code>lapply</code> i operator <code>%&gt;%</code></strong></p>
<div class="sourceCode" id="cb321"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb321-1" data-line-number="1">l &lt;-<span class="st"> </span><span class="kw">list</span>(<span class="dt">a =</span> <span class="dv">1</span><span class="op">:</span><span class="dv">10</span>, <span class="dt">b =</span> <span class="dv">10</span><span class="op">:</span><span class="dv">20</span>, <span class="dt">c =</span> <span class="dv">100</span><span class="op">:</span><span class="dv">200</span>)</a>
<a class="sourceLine" id="cb321-2" data-line-number="2"></a>
<a class="sourceLine" id="cb321-3" data-line-number="3"><span class="co"># stvorite matricu koja će sadržavati prvi i zadnji element svakog elementa liste</span></a>
<a class="sourceLine" id="cb321-4" data-line-number="4"><span class="co"># elementi moraju biti poredani po retcima</span></a>
<a class="sourceLine" id="cb321-5" data-line-number="5"><span class="co"># koristite funkcije lapply, unlist i matrix te %&gt;% operator</span></a>
<a class="sourceLine" id="cb321-6" data-line-number="6"><span class="co"># rezultat spremite u varijablu `rez`</span></a>
<a class="sourceLine" id="cb321-7" data-line-number="7"></a>
<a class="sourceLine" id="cb321-8" data-line-number="8">    </a>
<a class="sourceLine" id="cb321-9" data-line-number="9"><span class="co"># ispišite `rez`</span></a></code></pre></div>
<div class="fold s o">
<div class="sourceCode" id="cb322"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb322-1" data-line-number="1">l &lt;-<span class="st"> </span><span class="kw">list</span>(<span class="dt">a =</span> <span class="dv">1</span><span class="op">:</span><span class="dv">10</span>, <span class="dt">b =</span> <span class="dv">10</span><span class="op">:</span><span class="dv">20</span>, <span class="dt">c =</span> <span class="dv">100</span><span class="op">:</span><span class="dv">200</span>)</a>
<a class="sourceLine" id="cb322-2" data-line-number="2"></a>
<a class="sourceLine" id="cb322-3" data-line-number="3">l <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">lapply</span>(<span class="cf">function</span>(x) <span class="kw">c</span>(x[<span class="dv">1</span>], x[<span class="kw">length</span>(x)])) <span class="op">%&gt;%</span><span class="st"> </span>unlist <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">matrix</span>(<span class="dt">ncol =</span> <span class="dv">2</span>, <span class="dt">byrow =</span> T) -&gt;<span class="st"> </span>rez</a>
<a class="sourceLine" id="cb322-4" data-line-number="4">    </a>
<a class="sourceLine" id="cb322-5" data-line-number="5">rez</a></code></pre></div>
<pre><code>##      [,1] [,2]
## [1,]    1   10
## [2,]   10   20
## [3,]  100  200</code></pre>
</div>
<hr />
<p>Operator cjevovoda vrlo je pogodan u sprezi s “klasičnim” funkcijama, no možemo naići na problem kada ga želimo kombinirati s drugim operatorima. Uzrok problema jest sintaksa - operator cjevovoda svoju učinkovitost postiže upravo nametanjem nove, “slijedne” sintakse, koja nije kompatibilna sa sintaksom koju nameću drugi operatori, kao npr. <code>+</code>, <code>%%</code> ili <code>[</code>.</p>
<p>Ukoliko nam je zaista bitno da u našem programskom kodu imamo “neprekinuti” lanac poziva funkcija koji će sadržavati ne samo funkcije, nego i druge operatore, onda je jedno od rješenja koristiti operatore kao “obične” funkcije. Naime, svaki operator je zapravo funkcija koja dijeli ime s operatorom (uz korištenje <em>backtick</em> navodnika kako bi se mogli koristiti simbolima), tako da su sljedeći parovi izraza zapravo ekvivalentni:</p>
<hr />
<p><strong>Primjer - operatori kao funkcije</strong></p>
<div class="sourceCode" id="cb324"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb324-1" data-line-number="1"><span class="co"># svaki par naredbi jest ekvivalentan</span></a>
<a class="sourceLine" id="cb324-2" data-line-number="2"><span class="dv">2</span> <span class="op">+</span><span class="st"> </span><span class="dv">3</span></a>
<a class="sourceLine" id="cb324-3" data-line-number="3"><span class="st">`</span><span class="dt">+</span><span class="st">`</span>(<span class="dv">2</span>, <span class="dv">3</span>)</a>
<a class="sourceLine" id="cb324-4" data-line-number="4"></a>
<a class="sourceLine" id="cb324-5" data-line-number="5"><span class="dv">1</span> <span class="op">:</span><span class="st"> </span><span class="dv">5</span></a>
<a class="sourceLine" id="cb324-6" data-line-number="6"><span class="st">`</span><span class="dt">:</span><span class="st">`</span>(<span class="dv">1</span>, <span class="dv">5</span>)</a>
<a class="sourceLine" id="cb324-7" data-line-number="7"></a>
<a class="sourceLine" id="cb324-8" data-line-number="8">x &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>)</a>
<a class="sourceLine" id="cb324-9" data-line-number="9"><span class="st">`</span><span class="dt">&lt;-</span><span class="st">`</span>(<span class="st">&quot;x&quot;</span>, <span class="kw">c</span>(<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>))</a>
<a class="sourceLine" id="cb324-10" data-line-number="10"></a>
<a class="sourceLine" id="cb324-11" data-line-number="11">x[<span class="dv">1</span>]</a>
<a class="sourceLine" id="cb324-12" data-line-number="12"><span class="st">`</span><span class="dt">[</span><span class="st">`</span>(x, <span class="dv">1</span>)</a></code></pre></div>
<pre><code>## [1] 5
## [1] 5
## [1] 1 2 3 4 5
## [1] 1 2 3 4 5
## [1] 1
## [1] 1</code></pre>
<hr />
<p>Pokušajmo ovaj princip iskoristiti u sljedećoj vježbi.</p>
<hr />
<p><strong>Zadatak 9.4 - složenija uporaba operatora cjevovoda</strong></p>
<div class="sourceCode" id="cb326"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb326-1" data-line-number="1"><span class="kw">set.seed</span>(<span class="dv">1234</span>)</a>
<a class="sourceLine" id="cb326-2" data-line-number="2"></a>
<a class="sourceLine" id="cb326-3" data-line-number="3"><span class="co"># &quot;uredite&quot; sljedeću naredbu uz pomoć operatora cjevovoda </span></a>
<a class="sourceLine" id="cb326-4" data-line-number="4"><span class="kw">matrix</span>(<span class="kw">table</span>(<span class="kw">sample</span>(<span class="kw">round</span>(<span class="kw">sqrt</span>(<span class="kw">sample</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">10000</span>, <span class="dv">10000</span>, <span class="dt">replace =</span> T))), <span class="dv">100</span>))[<span class="dv">1</span><span class="op">:</span><span class="dv">9</span>], <span class="dv">3</span>, <span class="dv">3</span>)</a></code></pre></div>
<div class="fold s o">
<div class="sourceCode" id="cb327"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb327-1" data-line-number="1"><span class="kw">set.seed</span>(<span class="dv">1234</span>)</a>
<a class="sourceLine" id="cb327-2" data-line-number="2"><span class="co"># &quot;uredite&quot; sljedeću naredbu uz pomoć operatora cjevovoda </span></a>
<a class="sourceLine" id="cb327-3" data-line-number="3"><span class="dv">1</span><span class="op">:</span><span class="dv">10000</span> <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">sample</span>(<span class="dv">10000</span>, <span class="dt">replace =</span> T) <span class="op">%&gt;%</span><span class="st"> </span>sqrt <span class="op">%&gt;%</span><span class="st"> </span>round <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb327-4" data-line-number="4"><span class="st">  </span><span class="kw">sample</span>(<span class="dv">100</span>) <span class="op">%&gt;%</span><span class="st"> </span>table <span class="op">%&gt;%</span><span class="st"> `</span><span class="dt">[</span><span class="st">`</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">9</span>) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">matrix</span>(<span class="dv">3</span>, <span class="dv">3</span>)</a></code></pre></div>
<pre><code>##      [,1] [,2] [,3]
## [1,]    1    2    1
## [2,]    1    3    1
## [3,]    1    1    2</code></pre>
</div>
<p><code>%&gt;%</code> operator je posebno pogodan za upravljanje podatkovnim skupovima, pogotovo u scenarijima kada imamo definiranu proceduru transformacije podataka (npr. filtriramo neke retke, potom odaberemo stupce, zatim grupiramo podatke ovisno o nekoj kategorijskoj varijabli). Uz pomoć ovog operatora dobivamo preglednu reprezentaciju našeg procesa prilagodbe podataka koju kasnije lako prilagođavamo i po potrebi proširujemo. Primjeri u nastavku će često prema potrebi koristiti ovaj operator, te preporučujemo njegovo svladavanje prije nastavka sa lekcijama koje slijede.</p>
<hr />
</div>
<div id="uredni-podaci" class="section level2">
<h2><span class="header-section-number">9.2</span> Uredni podaci</h2>
<p>U literaturi možemo naći činjenicu kako je u procesu analize priprema podataka često vremenski najzahtjevniji segment procesa - u knjizi <a href = "https://books.google.hr/books/about/Exploratory_Data_Mining_and_Data_Cleanin.html?id=2OWJVkevamQC&redir_esc=y&hl=en">“Exploratory Data Mining and Data Cleaning”</a> spominje se da se na pripremu često troši od 50% do 80% ukupnog vremena. Isto tako, kako navodi Hadley Wickham u svojem članku <a href = "http://vita.had.co.nz/papers/tidy-data.pdf">“Tidy Data”</a>, priprema podataka često nije samo prvi korak već je proces koji se ponavlja kako se otkrivaju nova saznanja ili prikupljaju novi podaci.</p>
<p>Hadley Wickham je uveo termin “urednih podataka” koji se odnosi na organizaciju podatkovnog skupa na način da u što većoj mjeri olakša njihovu daljnju obradu i analizu. Činjenica je da ulazni podaci često nisu originalno namijenjeni za potrebe analize te kao takvi nisu organizirani na način koji bi omogućio njihovo lako korištenje u analitičkom procesu. “Uredni podaci” zapravo predstavljaju princip kako - prema potrebi - “presložiti” podatke tako da njihova struktura odgovara standardnom, očekivanom metapredlošku.</p>
<p>Principi urednih podataka imaju sličnosti sa relacijskim modelom podataka no definirani su na način koji više odgovara statističarima i programerima. Ugrubo te principe možemo popisati na sljedeći način:</p>
<ul>
<li>podaci su organizirani u tablicu</li>
<li>svaki redak predstavlja obzervaciju</li>
<li>svaki stupac predstavlja svojstvo ili varijablu te obzervacije</li>
</ul>
<p>Budući da ovo možda zvuči previše trivijalno, pogledajmo koja svojstva Hadley navodi kao tipična za “neuredne” podatke:</p>
<ul>
<li>imena stupaca nisu nazivi varijabli, već njihove vrijednosti</li>
<li>više različitih varijabli spremljeno je u isti stupac</li>
<li>varijable su spremljene u retke</li>
<li>više tipova različitih obzervacija spremljeno je u istu tablicu</li>
<li>jedan tip obzervacije spremljen je u više tablica</li>
</ul>
<p>U nastavku ćemo dati nekoliko primjera tablica koje ne odgovaraju u potpunosti definiciji urednih podataka te prikazati kako ih na jednostavan način preoblikovati, tj. “urediti”. Za taj posao koristiti ćemo metode paketa <code>tidyr</code>.</p>
<hr />
<div id="funkcije-gather-i-spread" class="section level3">
<h3><span class="header-section-number">9.2.1</span> Funkcije <code>gather</code> i <code>spread</code></h3>
<p>U radnoj mapi trebala bi se nalaziti datoteka <code>studenti.csv</code>. Učitajmo ju u radnu okolinu. Budući da je datoteka pohranjena uz pomoć UTF-8 kodiranja (budući da sadrži hrvatska slova), naredbi <code>read.csv</code> možete dodati i parametar <code>fileEncoding = &quot;UTF-8&quot;</code> kako bi dobili korektni ispis posebnih znakova.</p>
<hr />
<p><strong>Zadatak 9.5 - podatkovni skup <code>studenti</code></strong></p>
<div class="sourceCode" id="cb329"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb329-1" data-line-number="1"><span class="co"># učitajte podatke iz datoteke `studenti.csv` u varijablu `studenti`</span></a>
<a class="sourceLine" id="cb329-2" data-line-number="2"><span class="co"># ne zaboravite na parametar `stringsAsFactors`!</span></a>
<a class="sourceLine" id="cb329-3" data-line-number="3"></a>
<a class="sourceLine" id="cb329-4" data-line-number="4"><span class="co"># upoznajte se sa podacima uz pomoć standardnih funkcija za tu svrhu</span></a>
<a class="sourceLine" id="cb329-5" data-line-number="5"><span class="co"># (names, sapply - class, str, head, summary ...)</span></a>
<a class="sourceLine" id="cb329-6" data-line-number="6"><span class="co"># u daljnim primjerima za ovaj postupak koristiti ćemo se izrazom &quot;proučite okvir..&quot;</span></a></code></pre></div>
<div class="fold s o">
<div class="sourceCode" id="cb330"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb330-1" data-line-number="1">studenti &lt;-<span class="st"> </span><span class="kw">read.csv</span>(<span class="st">&quot;studenti.csv&quot;</span>, <span class="dt">fileEncoding=</span><span class="st">&quot;UTF-8&quot;</span>, <span class="dt">stringsAsFactors =</span> F)</a>
<a class="sourceLine" id="cb330-2" data-line-number="2"></a>
<a class="sourceLine" id="cb330-3" data-line-number="3"><span class="kw">str</span>(studenti)</a>
<a class="sourceLine" id="cb330-4" data-line-number="4"><span class="kw">head</span>(studenti)</a></code></pre></div>
<pre><code>## &#39;data.frame&#39;:    27 obs. of  10 variables:
##  $ JMBAG                : int  1341 1342 1343 1344 1345 1346 1347 1348 1349 1350 ...
##  $ Prezime              : chr  &quot;Anic&quot; &quot;Babic&quot; &quot;Crnoja&quot; &quot;Crnjac&quot; ...
##  $ Ime                  : chr  &quot;Iva&quot; &quot;Josip&quot; &quot;Petra&quot; &quot;Lucija&quot; ...
##  $ Matematika.1         : chr  &quot;2&quot; &quot;5&quot; &quot;4&quot; &quot;2&quot; ...
##  $ Fizika.1             : chr  &quot;2&quot; &quot;3&quot; &quot;3&quot; &quot;5&quot; ...
##  $ Programiranje        : chr  &quot;NULL&quot; &quot;4&quot; &quot;4&quot; &quot;2&quot; ...
##  $ Osnove.elektrotehnike: chr  &quot;NULL&quot; &quot;3&quot; &quot;2&quot; &quot;2&quot; ...
##  $ Digitalna.logika     : chr  &quot;4&quot; &quot;NULL&quot; &quot;3&quot; &quot;3&quot; ...
##  $ Matematika.2         : chr  &quot;2&quot; &quot;5&quot; &quot;4&quot; &quot;3&quot; ...
##  $ Algoritmi.1          : chr  &quot;2&quot; &quot;5&quot; &quot;3&quot; &quot;4&quot; ...
##   JMBAG Prezime    Ime Matematika.1 Fizika.1 Programiranje
## 1  1341    Anic    Iva            2        2          NULL
## 2  1342   Babic  Josip            5        3             4
## 3  1343  Crnoja  Petra            4        3             4
## 4  1344  Crnjac Lucija            2        5             2
## 5  1345   Dizla  Stipe         NULL        4             3
## 6  1346   Ermic   Igor         NULL        3          NULL
##   Osnove.elektrotehnike Digitalna.logika Matematika.2 Algoritmi.1
## 1                  NULL                4            2           2
## 2                     3             NULL            5           5
## 3                     2                3            4           3
## 4                     2                3            3           4
## 5                     5                2            2           2
## 6                     5                5            5           5</code></pre>
</div>
<hr />
<p>Uočite da ovaj podatkovni skup ima dosta nedostajućih vrijednosti koje su zapisane kao <code>NULL</code>. Budući da R ne prepoznaje ovo kao nedostajuću vrijednost on je podatke učitao kao znakovne nizove (ili kao faktore, ako smo zaboravili na parametar <code>stringsAsFactors</code>). Budući da su stupci koji se odnose na ocjene očito numerički, možemo ih lako pretvoriti u takve uz pomoć naredbe <code>as.numeric()</code> (ili <code>as.numeric(as.character())</code> ako su faktori!). No, postoji jednostavniji način - ako znamo na koji način je nedostajuća vrijednost reprezentirana u podatkovnom skupu, možemo to direktno ugraditi u naredbu <code>read.csv</code> uz pomoć parametra <code>na.strings</code>.</p>
<hr />
<p><strong>Zadatak 9.6 - prilagodba parametara učitavanja podatkovnog skupa</strong></p>
<div class="sourceCode" id="cb332"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb332-1" data-line-number="1"><span class="co"># ponovo učitajte podatke iz datoteke `studenti.csv` u varijablu `studenti`</span></a>
<a class="sourceLine" id="cb332-2" data-line-number="2"><span class="co"># naredbi `read.csv` dodajte parametar `na.strings` sa znakovnim nizom koji predstavlja NA</span></a>
<a class="sourceLine" id="cb332-3" data-line-number="3"></a>
<a class="sourceLine" id="cb332-4" data-line-number="4"></a>
<a class="sourceLine" id="cb332-5" data-line-number="5"><span class="co"># proučite okvir `studenti`</span></a></code></pre></div>
<div class="fold s o">
<div class="sourceCode" id="cb333"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb333-1" data-line-number="1">studenti &lt;-<span class="st"> </span><span class="kw">read.csv</span>(<span class="st">&quot;studenti.csv&quot;</span>, <span class="dt">fileEncoding=</span><span class="st">&quot;UTF-8&quot;</span>, <span class="dt">stringsAsFactors =</span> F, <span class="dt">na.strings =</span> <span class="st">&quot;NULL&quot;</span>)</a>
<a class="sourceLine" id="cb333-2" data-line-number="2"></a>
<a class="sourceLine" id="cb333-3" data-line-number="3"></a>
<a class="sourceLine" id="cb333-4" data-line-number="4"><span class="kw">str</span>(studenti)</a>
<a class="sourceLine" id="cb333-5" data-line-number="5"><span class="kw">head</span>(studenti)</a></code></pre></div>
<pre><code>## &#39;data.frame&#39;:    27 obs. of  10 variables:
##  $ JMBAG                : int  1341 1342 1343 1344 1345 1346 1347 1348 1349 1350 ...
##  $ Prezime              : chr  &quot;Anic&quot; &quot;Babic&quot; &quot;Crnoja&quot; &quot;Crnjac&quot; ...
##  $ Ime                  : chr  &quot;Iva&quot; &quot;Josip&quot; &quot;Petra&quot; &quot;Lucija&quot; ...
##  $ Matematika.1         : int  2 5 4 2 NA NA NA 3 3 4 ...
##  $ Fizika.1             : int  2 3 3 5 4 3 3 4 2 2 ...
##  $ Programiranje        : int  NA 4 4 2 3 NA 3 3 3 4 ...
##  $ Osnove.elektrotehnike: int  NA 3 2 2 5 5 3 4 2 2 ...
##  $ Digitalna.logika     : int  4 NA 3 3 2 5 2 4 3 5 ...
##  $ Matematika.2         : int  2 5 4 3 2 5 2 5 NA 4 ...
##  $ Algoritmi.1          : int  2 5 3 4 2 5 5 4 3 2 ...
##   JMBAG Prezime    Ime Matematika.1 Fizika.1 Programiranje
## 1  1341    Anic    Iva            2        2            NA
## 2  1342   Babic  Josip            5        3             4
## 3  1343  Crnoja  Petra            4        3             4
## 4  1344  Crnjac Lucija            2        5             2
## 5  1345   Dizla  Stipe           NA        4             3
## 6  1346   Ermic   Igor           NA        3            NA
##   Osnove.elektrotehnike Digitalna.logika Matematika.2 Algoritmi.1
## 1                    NA                4            2           2
## 2                     3               NA            5           5
## 3                     2                3            4           3
## 4                     2                3            3           4
## 5                     5                2            2           2
## 6                     5                5            5           5</code></pre>
</div>
<hr />
<p>Vidimo da podaci sada imaju odgovarajući tip - no očito ne odgovaraju u potpunosti definiciji “urednih podataka”. Imena stupaca su zapravo kategorije varijable <code>Predmet</code> a “obzervacija” u ovoj tablici reprezentirana je studentom. Dodavanje nove ocjene iz nekog predmeta moguće je jedino dodavanjem novog stupca, pri čemu bismo morali voditi računa da se na taj način dodaju ocjene za <em>sve</em> student, tj. da bi tablica morala imati puno <code>NA</code> vrijednosti za sve kombinacije studenata i predmeta koje su neprimjenjive jer ocjene trenutno nema (i možda je neće ni biti ukoliko student niti ne sluša taj predmet).</p>
<p>Budući da su podaci u tablici zapravo skup ocjena, bilo bi pogodno preoblikovati tablicu tako da svaki redak upravo bude “ocjena koju je dobio neki student na nekom predmetu”. Razmislite koje korake bi trebalo poduzeti da stvorimo takvu tablicu. Trebamo:</p>
<ul>
<li>stvoriti kategorijsku varijablu <code>Predmet</code> koja bi kao razine imala nazive predmeta koji su trenutno stupci</li>
<li>stvoriti sve pripadne kombinacije student-predmet</li>
<li>popuniti kombinacije pripadajućom vrijednosti ocjene</li>
</ul>
<p>Ovaj postupak nije nemoguć ali zahtjeva dosta truda oko preoblikovanja podatkovnog okvira. Kako bi se ovaj postupak pojednostavio, možemo koristiti funkciju <code>gather</code> iz paketa <code>tidyr</code> koja obavlja upravo gore opisani postupak: ona “prikuplja” stupce u jedinstvenu varijablu i onda popunjava vrijednosti te varijable uz pomoć postojećih kombinacija naziv stupca / redak. Potpis funkcije izgleda ovako:</p>
<div class="sourceCode" id="cb335"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb335-1" data-line-number="1"><span class="kw">gather</span>(data, key, value, ..., <span class="dt">na.rm =</span> <span class="ot">FALSE</span>, <span class="dt">convert =</span> <span class="ot">FALSE</span>, <span class="dt">factor_key =</span> <span class="ot">FALSE</span>)</a></code></pre></div>
<p>Detaljni opis funkcije možete dobiti pozivom naredbe <code>?gather</code>, a ovdje ćemo samo ukratko objasniti parametre:</p>
<ul>
<li><code>data</code> očito predstavlja naš podatkovni okvir</li>
<li><code>key</code> predstavlja naziv novog stupca - kategorijske varijable kojeg stvaramo a (u našem slučaju <code>Predmet</code>); kako bi se olakšao posao programeru, ova funkcija ne zahtijeva da naziv stupca stavljamo u navodnike</li>
<li><code>value</code> predstavlja naziv novog stupca - varijable sa vrijednostima (u našem slučaju <code>Ocjena</code>)</li>
<li><code>...</code> predstavlja skup stupaca koje prikupljamo; možemo navesti samo nazive stupaca odvojene zarezima (navodnici također nisu potrebni) ili se koristiti skraćenom sintaksom <code>prvi_stupac:zadnji_stupac</code> (možemo i naznačiti samo “izbačene” stupce sa predznakom <code>-</code>)</li>
<li><code>na.rm</code> opisuje da li želimo izostaviti stupce sa <code>NA</code></li>
<li><code>convert</code> će obaviti konverziju podataka ukoliko to smatramo potrebnim</li>
<li><code>factor_key</code> nas pita želimo li faktorizirati novu varijablu koju stvaramo</li>
</ul>
<p>Obavimo ovu funkciju nad našim podatkovnim okvirom.</p>
<hr />
<p><strong>Zadatak 9.7 - funkcija <code>gather</code></strong></p>
<div class="sourceCode" id="cb336"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb336-1" data-line-number="1"><span class="co"># stvorite podatkovni okvir `ocjene` uz pomoć funkcije `gather` i okvira `studenti`</span></a>
<a class="sourceLine" id="cb336-2" data-line-number="2"></a>
<a class="sourceLine" id="cb336-3" data-line-number="3"></a>
<a class="sourceLine" id="cb336-4" data-line-number="4"><span class="co"># proučite okvir `ocjene`</span></a></code></pre></div>
<div class="fold s o">
<div class="sourceCode" id="cb337"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb337-1" data-line-number="1">ocjene &lt;-<span class="st"> </span><span class="kw">gather</span>(studenti, Predmet, Ocjena, Matematika<span class="fl">.1</span><span class="op">:</span>Algoritmi<span class="fl">.1</span>, <span class="dt">na.rm =</span> T, <span class="dt">factor_key =</span> T )</a>
<a class="sourceLine" id="cb337-2" data-line-number="2"></a>
<a class="sourceLine" id="cb337-3" data-line-number="3"><span class="kw">str</span>(ocjene)</a>
<a class="sourceLine" id="cb337-4" data-line-number="4"><span class="kw">head</span>(ocjene)</a></code></pre></div>
<pre><code>## &#39;data.frame&#39;:    168 obs. of  5 variables:
##  $ JMBAG  : int  1341 1342 1343 1344 1348 1349 1350 1351 1352 1353 ...
##  $ Prezime: chr  &quot;Anic&quot; &quot;Babic&quot; &quot;Crnoja&quot; &quot;Crnjac&quot; ...
##  $ Ime    : chr  &quot;Iva&quot; &quot;Josip&quot; &quot;Petra&quot; &quot;Lucija&quot; ...
##  $ Predmet: Factor w/ 7 levels &quot;Matematika.1&quot;,..: 1 1 1 1 1 1 1 1 1 1 ...
##  $ Ocjena : int  2 5 4 2 3 3 4 2 4 5 ...
##   JMBAG Prezime    Ime      Predmet Ocjena
## 1  1341    Anic    Iva Matematika.1      2
## 2  1342   Babic  Josip Matematika.1      5
## 3  1343  Crnoja  Petra Matematika.1      4
## 4  1344  Crnjac Lucija Matematika.1      2
## 8  1348 Grubiša   Ivan Matematika.1      3
## 9  1349   Gobac  Davor Matematika.1      3</code></pre>
</div>
<hr />
<p>Funkcija koja radi inverzan posao od <code>gather</code> jest funkcija <code>spread</code>. Ona će podatke iz kombinacije kategorijskog stupca i vrijednosti “raširiti” tako da kategorije postaju nazivi stupaca a vrijednosti se “raspršuju” po odgovarajućim stupcima.</p>
<p>Potpis funkcije izgleda ovako:</p>
<div class="sourceCode" id="cb339"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb339-1" data-line-number="1"><span class="kw">spread</span>(data, key, value, <span class="dt">fill =</span> <span class="ot">NA</span>, <span class="dt">convert =</span> <span class="ot">FALSE</span>, <span class="dt">drop =</span> <span class="ot">TRUE</span>, <span class="dt">sep =</span> <span class="ot">NULL</span>)</a></code></pre></div>
<p>Dokumentaciju ove funkcije lako dohvaćamo naredbom <code>?spread</code> a neke elemente već možemo lako prepoznati korištenjem znanja kako radi funkcija <code>gather</code>. Parametri koje možda treba dodatno pojasniti su:</p>
<ul>
<li><code>fill</code> koji opisuje koju vrijednost staviti kod “nepostojećih” kombinacija nakon “širenja”</li>
<li><code>drop</code> koji opisuje da li treba raditi stupce za nepostojeće kategorije ako je stupac kojeg širimo faktoriziran</li>
<li><code>sep</code> koji nam omogućuje da naziv stupca ne bude samo vrijednost kategorije već kombinacija naziva postojećeg kategorijskog stupca i vrijednosti (uz definirani separator)</li>
</ul>
<p>Pokušajmo uz pomoć ove naredbe “rekonstruirati” originalni podatkovni okvir <code>studenti</code>.</p>
<hr />
<p><strong>Zadatak 9.8 - funkcija <code>spread</code></strong></p>
<div class="sourceCode" id="cb340"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb340-1" data-line-number="1"><span class="co"># &quot;raširite&quot; podatkovni okvir `ocjene` uz pomoć naredbe `spread`</span></a>
<a class="sourceLine" id="cb340-2" data-line-number="2"><span class="co"># rezultat pohranite u okvir `studenti2`</span></a>
<a class="sourceLine" id="cb340-3" data-line-number="3"></a>
<a class="sourceLine" id="cb340-4" data-line-number="4"><span class="co"># proučite okvire `studenti` i `studenti2`</span></a></code></pre></div>
<div class="fold s o">
<div class="sourceCode" id="cb341"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb341-1" data-line-number="1">studenti2 &lt;-<span class="st"> </span><span class="kw">spread</span>(ocjene, Predmet, Ocjena)</a>
<a class="sourceLine" id="cb341-2" data-line-number="2"></a>
<a class="sourceLine" id="cb341-3" data-line-number="3"><span class="kw">head</span>(studenti)</a>
<a class="sourceLine" id="cb341-4" data-line-number="4"><span class="kw">head</span>(studenti2)</a>
<a class="sourceLine" id="cb341-5" data-line-number="5"><span class="kw">str</span>(studenti)</a>
<a class="sourceLine" id="cb341-6" data-line-number="6"><span class="kw">str</span>(studenti2)</a></code></pre></div>
<pre><code>##   JMBAG Prezime    Ime Matematika.1 Fizika.1 Programiranje
## 1  1341    Anic    Iva            2        2            NA
## 2  1342   Babic  Josip            5        3             4
## 3  1343  Crnoja  Petra            4        3             4
## 4  1344  Crnjac Lucija            2        5             2
## 5  1345   Dizla  Stipe           NA        4             3
## 6  1346   Ermic   Igor           NA        3            NA
##   Osnove.elektrotehnike Digitalna.logika Matematika.2 Algoritmi.1
## 1                    NA                4            2           2
## 2                     3               NA            5           5
## 3                     2                3            4           3
## 4                     2                3            3           4
## 5                     5                2            2           2
## 6                     5                5            5           5
##   JMBAG Prezime    Ime Matematika.1 Fizika.1 Programiranje
## 1  1341    Anic    Iva            2        2            NA
## 2  1342   Babic  Josip            5        3             4
## 3  1343  Crnoja  Petra            4        3             4
## 4  1344  Crnjac Lucija            2        5             2
## 5  1345   Dizla  Stipe           NA        4             3
## 6  1346   Ermic   Igor           NA        3            NA
##   Osnove.elektrotehnike Digitalna.logika Matematika.2 Algoritmi.1
## 1                    NA                4            2           2
## 2                     3               NA            5           5
## 3                     2                3            4           3
## 4                     2                3            3           4
## 5                     5                2            2           2
## 6                     5                5            5           5
## &#39;data.frame&#39;:    27 obs. of  10 variables:
##  $ JMBAG                : int  1341 1342 1343 1344 1345 1346 1347 1348 1349 1350 ...
##  $ Prezime              : chr  &quot;Anic&quot; &quot;Babic&quot; &quot;Crnoja&quot; &quot;Crnjac&quot; ...
##  $ Ime                  : chr  &quot;Iva&quot; &quot;Josip&quot; &quot;Petra&quot; &quot;Lucija&quot; ...
##  $ Matematika.1         : int  2 5 4 2 NA NA NA 3 3 4 ...
##  $ Fizika.1             : int  2 3 3 5 4 3 3 4 2 2 ...
##  $ Programiranje        : int  NA 4 4 2 3 NA 3 3 3 4 ...
##  $ Osnove.elektrotehnike: int  NA 3 2 2 5 5 3 4 2 2 ...
##  $ Digitalna.logika     : int  4 NA 3 3 2 5 2 4 3 5 ...
##  $ Matematika.2         : int  2 5 4 3 2 5 2 5 NA 4 ...
##  $ Algoritmi.1          : int  2 5 3 4 2 5 5 4 3 2 ...
## &#39;data.frame&#39;:    27 obs. of  10 variables:
##  $ JMBAG                : int  1341 1342 1343 1344 1345 1346 1347 1348 1349 1350 ...
##  $ Prezime              : chr  &quot;Anic&quot; &quot;Babic&quot; &quot;Crnoja&quot; &quot;Crnjac&quot; ...
##  $ Ime                  : chr  &quot;Iva&quot; &quot;Josip&quot; &quot;Petra&quot; &quot;Lucija&quot; ...
##  $ Matematika.1         : int  2 5 4 2 NA NA NA 3 3 4 ...
##  $ Fizika.1             : int  2 3 3 5 4 3 3 4 2 2 ...
##  $ Programiranje        : int  NA 4 4 2 3 NA 3 3 3 4 ...
##  $ Osnove.elektrotehnike: int  NA 3 2 2 5 5 3 4 2 2 ...
##  $ Digitalna.logika     : int  4 NA 3 3 2 5 2 4 3 5 ...
##  $ Matematika.2         : int  2 5 4 3 2 5 2 5 NA 4 ...
##  $ Algoritmi.1          : int  2 5 3 4 2 5 5 4 3 2 ...</code></pre>
</div>
<hr />
<p>U prethodnom primjeru demonstrirali smo inverznu funkcionalnost funkcija <code>gather</code> i <code>spread</code> ali narednom <code>spread</code> nismo postigli uredne podatke, samo smo se vratili na originalni okvir. Pogledajmo sada primjer gdje upravo naredbom <code>spread</code> “sređujemo” podatke.</p>
<p>Učitajmo podatke iz datoteke <code>auti.csv</code> koja pohranjuje tehničke karakteristike određenih automobila.</p>
<hr />
<p><strong>Zadatak 9.9 - podatkovni skup <code>auti</code></strong></p>
<div class="sourceCode" id="cb343"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb343-1" data-line-number="1"><span class="co"># učitajte datoteku `auti.csv` u podatkovni okvir naziva `auti`</span></a>
<a class="sourceLine" id="cb343-2" data-line-number="2"></a>
<a class="sourceLine" id="cb343-3" data-line-number="3"><span class="co"># proučite okvir `auti`</span></a></code></pre></div>
<div class="fold s o">
<div class="sourceCode" id="cb344"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb344-1" data-line-number="1">auti &lt;-<span class="st"> </span><span class="kw">read.csv</span>(<span class="st">&quot;auti.csv&quot;</span>, <span class="dt">fileEncoding=</span><span class="st">&quot;UTF-8&quot;</span>, <span class="dt">stringsAsFactors =</span> F)</a>
<a class="sourceLine" id="cb344-2" data-line-number="2"></a>
<a class="sourceLine" id="cb344-3" data-line-number="3"><span class="kw">str</span>(auti)</a>
<a class="sourceLine" id="cb344-4" data-line-number="4"><span class="kw">head</span>(auti)</a></code></pre></div>
<pre><code>## &#39;data.frame&#39;:    18 obs. of  3 variables:
##  $ Model.auta             : chr  &quot;Opel Astra&quot; &quot;Opel Astra&quot; &quot;Opel Astra&quot; &quot;Opel Astra&quot; ...
##  $ Tehnicka.karakteristika: chr  &quot;Cilindara&quot; &quot;KS&quot; &quot;Dužina m&quot; &quot;Masa kg&quot; ...
##  $ Vrijednost             : num  4 125 4.27 1285 4 ...
##   Model.auta Tehnicka.karakteristika Vrijednost
## 1 Opel Astra               Cilindara      4.000
## 2 Opel Astra                      KS    125.000
## 3 Opel Astra                Dužina m      4.267
## 4 Opel Astra                 Masa kg   1285.000
## 5    Audi A4               Cilindara      4.000
## 6    Audi A4                      KS    136.000</code></pre>
</div>
<hr />
<p>U ovoj tablici očito je narušen princip urednih podataka da u jedan stupac treba biti pohranjen samo jedan tip varijable - tehničke karakteristike automobila smještene su u jedinstveni stupac naziva <code>Tehnicka.karakteristika</code> a u stupcu <code>Vrijednost</code> nalaze se vrijednosti vrlo različitih tipova (masa u kg, dužina u m i sl.).</p>
<p>Pokušajte urediti ovaj okvir uz pomoć naredbe <code>spread</code>.</p>
<hr />
<p><strong>Zadatak 9.10 - funkcija <code>spread</code> (2)</strong></p>
<div class="sourceCode" id="cb346"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb346-1" data-line-number="1"><span class="co"># stvorite okvir `auti2` koji će biti uređena inačica okvira `auti`</span></a>
<a class="sourceLine" id="cb346-2" data-line-number="2"></a>
<a class="sourceLine" id="cb346-3" data-line-number="3"><span class="co"># proučite okvir `auti2`</span></a></code></pre></div>
<div class="fold s o">
<div class="sourceCode" id="cb347"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb347-1" data-line-number="1">auti2 &lt;-<span class="st"> </span><span class="kw">spread</span>(auti, Tehnička.karakteristika, Vrijednost)</a>
<a class="sourceLine" id="cb347-2" data-line-number="2"></a>
<a class="sourceLine" id="cb347-3" data-line-number="3"><span class="kw">str</span>(auti2)</a>
<a class="sourceLine" id="cb347-4" data-line-number="4"><span class="kw">head</span>(auti2)</a></code></pre></div>
<pre><code>## &#39;data.frame&#39;:    5 obs. of  6 variables:
##  $ Model.auta: chr  &quot;Audi A4&quot; &quot;Citroen C6&quot; &quot;Fiat 500L&quot; &quot;Opel Astra&quot; ...
##  $ Cilindara : num  4 6 2 4 4
##  $ Dužina m  : num  4.7 NA NA 4.27 4.56
##  $ KS        : num  136 215 103 125 110
##  $ Masa kg   : num  1470 1816 1260 1285 NA
##  $ Ventila   : num  NA NA NA NA 16
##             Model.auta Cilindara Dužina m  KS Masa kg Ventila
## 1              Audi A4         4    4.703 136    1470      NA
## 2           Citroen C6         6       NA 215    1816      NA
## 3            Fiat 500L         2       NA 103    1260      NA
## 4           Opel Astra         4    4.267 125    1285      NA
## 5 Renault Grand Scenic         4    4.560 110      NA      16</code></pre>
</div>
<hr />
<p>Naredbe <code>gather</code> i <code>spread</code> ne koriste se samo za “neuredne” podatke. One mogu biti vrlo korisne kod pretvorbe tzv. “širokih” podatka (<em>wide data</em>) u “dugačke” (<em>long data</em>). Prikažimo ovo na primjeru tzv. podataka o potrošačkim košaricama.</p>
<p>Potrošačka košarica predstavlja zapis artikala koje je kupac kupio tijekom jednog dolaska u trgovinu (bilo da se radi o virtualnoj trgovini ili stvarnom prodajnom mjestu). Ako podatke o potrošačkoj košarici zapisujemo u “širokom” formatu, onda podatke organiziramo tako da stupci predstavljaju pojedine artikle a retci jednu kupnju (ili račun). Vrijednost <code>1</code> znači da se artikl našao u košarici, <code>0</code> da nije bio prisutan. Ovakav prikaz pogodan je za različite tipove analiza, ali nije ekonomičan - podaci će često imati jako puno “nula”. S druge strane, “dugački” format jednostavno u svaki redak stavlja kombinaciju identifikatora košarice (ili broja računa) i naziv (ili šifru) kupljenog artikla. Ovakav zapis imati će znatno više redaka, ali je znatno pogodniji u slučajevima kada je broj artikala u asortimanu daleko veći od broja artikala u prosječnoj košarici.</p>
<hr />
<p><strong>Zadatak 9.11 - podatkovni skup <code>potrosackaKosarica</code></strong></p>
<div class="sourceCode" id="cb349"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb349-1" data-line-number="1"><span class="co"># učitajte podatke iz datoteke `potrosackaKosarica.csv` u podatkovni okvir imena `racuni`</span></a>
<a class="sourceLine" id="cb349-2" data-line-number="2"></a>
<a class="sourceLine" id="cb349-3" data-line-number="3"><span class="co"># proučite okvir `racuni`</span></a></code></pre></div>
<div class="fold s o">
<div class="sourceCode" id="cb350"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb350-1" data-line-number="1">racuni &lt;-<span class="st"> </span><span class="kw">read.csv</span>(<span class="st">&quot;potrosackaKosarica.csv&quot;</span>, <span class="dt">stringsAsFactors =</span> F, <span class="dt">encoding =</span> <span class="st">&quot;UTF-8&quot;</span>)</a>
<a class="sourceLine" id="cb350-2" data-line-number="2"></a>
<a class="sourceLine" id="cb350-3" data-line-number="3"><span class="kw">str</span>(racuni)</a>
<a class="sourceLine" id="cb350-4" data-line-number="4"><span class="kw">head</span>(racuni)</a></code></pre></div>
<pre><code>## &#39;data.frame&#39;:    104 obs. of  21 variables:
##  $ racunID        : int  15671 15672 15673 15674 15675 15676 15677 15678 15679 15680 ...
##  $ Coca.cola.2l   : int  0 1 1 0 1 0 0 0 0 0 ...
##  $ Cipi.Cips      : int  0 0 1 0 0 0 0 1 0 0 ...
##  $ Nutella.400.g  : int  0 1 0 0 1 0 0 0 0 0 ...
##  $ Karlovacko.pivo: int  0 1 0 0 0 0 0 0 0 1 ...
##  $ Ožujsko.pivo   : int  1 0 0 1 0 0 0 0 0 1 ...
##  $ Omekšivac.1.5l : int  0 0 0 0 0 0 0 1 0 1 ...
##  $ Voda.2l        : int  0 0 1 0 0 0 0 0 1 1 ...
##  $ Narance        : int  0 0 0 1 1 0 0 0 1 1 ...
##  $ Jabuke         : int  1 0 0 1 0 0 0 0 0 0 ...
##  $ Mandarine      : int  0 0 1 0 0 0 0 1 1 1 ...
##  $ Salvete        : int  0 0 0 0 1 1 0 0 0 0 ...
##  $ Ajvar          : int  0 0 1 1 0 0 0 0 0 1 ...
##  $ Ketchup        : int  1 0 0 1 0 0 0 0 0 1 ...
##  $ Senf           : int  1 0 0 0 0 0 0 1 0 0 ...
##  $ Mlijeko.0.5l   : int  0 1 0 1 1 0 0 0 0 0 ...
##  $ Kiselo.vrhnje  : int  0 1 0 0 0 0 1 0 0 1 ...
##  $ Feta.sir       : int  0 0 0 1 0 0 0 0 0 0 ...
##  $ Sardine        : int  0 0 0 0 0 0 0 0 0 1 ...
##  $ Tuna.pašteta   : int  1 1 1 0 0 1 0 0 0 0 ...
##  $ Nescaffe       : int  0 0 1 0 0 0 0 0 1 0 ...
##   racunID Coca.cola.2l Cipi.Cips Nutella.400.g Karlovacko.pivo
## 1   15671            0         0             0               0
## 2   15672            1         0             1               1
## 3   15673            1         1             0               0
## 4   15674            0         0             0               0
## 5   15675            1         0             1               0
## 6   15676            0         0             0               0
##   Ožujsko.pivo Omekšivac.1.5l Voda.2l Narance Jabuke Mandarine Salvete
## 1            1              0       0       0      1         0       0
## 2            0              0       0       0      0         0       0
## 3            0              0       1       0      0         1       0
## 4            1              0       0       1      1         0       0
## 5            0              0       0       1      0         0       1
## 6            0              0       0       0      0         0       1
##   Ajvar Ketchup Senf Mlijeko.0.5l Kiselo.vrhnje Feta.sir Sardine
## 1     0       1    1            0             0        0       0
## 2     0       0    0            1             1        0       0
## 3     1       0    0            0             0        0       0
## 4     1       1    0            1             0        1       0
## 5     0       0    0            1             0        0       0
## 6     0       0    0            0             0        0       0
##   Tuna.pašteta Nescaffe
## 1            1        0
## 2            1        0
## 3            1        1
## 4            0        0
## 5            0        0
## 6            1        0</code></pre>
</div>
<hr />
<p><strong>Zadatak 9.12 - pretvorba okvira u ‘dugi’ format</strong></p>
<div class="sourceCode" id="cb352"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb352-1" data-line-number="1"><span class="co"># pretvorite podatke okvira `racuni` iz &quot;širokog&quot; formata u &quot;dugi&quot;</span></a>
<a class="sourceLine" id="cb352-2" data-line-number="2"></a>
<a class="sourceLine" id="cb352-3" data-line-number="3"><span class="co"># novi okvir nazovite `racuniDugi`</span></a></code></pre></div>
<div class="fold s o">
<div class="sourceCode" id="cb353"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb353-1" data-line-number="1">racuni &lt;-<span class="st"> </span><span class="kw">read.csv</span>(<span class="st">&quot;potrosackaKosarica.csv&quot;</span>, <span class="dt">encoding =</span> <span class="st">&quot;UTF-8&quot;</span>)</a>
<a class="sourceLine" id="cb353-2" data-line-number="2"><span class="kw">head</span>(racuni)</a>
<a class="sourceLine" id="cb353-3" data-line-number="3"></a>
<a class="sourceLine" id="cb353-4" data-line-number="4">racuniDugi &lt;-<span class="st"> </span><span class="kw">gather</span>(racuni, artikl, vrijednost, <span class="op">-</span>racunID)</a>
<a class="sourceLine" id="cb353-5" data-line-number="5">racuniDugi &lt;-<span class="st"> </span>racuniDugi [racuniDugi<span class="op">$</span>vrijednost <span class="op">!=</span><span class="st"> </span><span class="dv">0</span>, <span class="dv">1</span><span class="op">:</span><span class="dv">2</span>]</a>
<a class="sourceLine" id="cb353-6" data-line-number="6">racuniDugi &lt;-<span class="st"> </span>racuniDugi[<span class="kw">order</span>(racuniDugi<span class="op">$</span>racunID), ]</a>
<a class="sourceLine" id="cb353-7" data-line-number="7"><span class="kw">head</span>(racuniDugi)</a>
<a class="sourceLine" id="cb353-8" data-line-number="8"><span class="kw">write.csv</span>(racuniDugi, <span class="dt">file =</span> <span class="st">&#39;potrosackaKosaricaDugiFormat.csv&#39;</span>, <span class="dt">row.names =</span> F)</a></code></pre></div>
<pre><code>##   racunID Coca.cola.2l Cipi.Cips Nutella.400.g Karlovacko.pivo
## 1   15671            0         0             0               0
## 2   15672            1         0             1               1
## 3   15673            1         1             0               0
## 4   15674            0         0             0               0
## 5   15675            1         0             1               0
## 6   15676            0         0             0               0
##   Ožujsko.pivo Omekšivac.1.5l Voda.2l Narance Jabuke Mandarine Salvete
## 1            1              0       0       0      1         0       0
## 2            0              0       0       0      0         0       0
## 3            0              0       1       0      0         1       0
## 4            1              0       0       1      1         0       0
## 5            0              0       0       1      0         0       1
## 6            0              0       0       0      0         0       1
##   Ajvar Ketchup Senf Mlijeko.0.5l Kiselo.vrhnje Feta.sir Sardine
## 1     0       1    1            0             0        0       0
## 2     0       0    0            1             1        0       0
## 3     1       0    0            0             0        0       0
## 4     1       1    0            1             0        1       0
## 5     0       0    0            1             0        0       0
## 6     0       0    0            0             0        0       0
##   Tuna.pašteta Nescaffe
## 1            1        0
## 2            1        0
## 3            1        1
## 4            0        0
## 5            0        0
## 6            1        0
##      racunID       artikl
## 417    15671 Ožujsko.pivo
## 833    15671       Jabuke
## 1249   15671      Ketchup
## 1353   15671         Senf
## 1873   15671 Tuna.pašteta
## 2      15672 Coca.cola.2l</code></pre>
</div>
<hr />
<p><strong>Zadatak 9.13 - pretvorba okvira u ‘široki’ format</strong></p>
<div class="sourceCode" id="cb355"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb355-1" data-line-number="1"><span class="co"># pokušajte &quot;dugi&quot; format oblikovati natrag u &quot;široki&quot;</span></a>
<a class="sourceLine" id="cb355-2" data-line-number="2"><span class="co"># pohranite rezultat u datoteku `potrosackaKosaricaSirokiFormat.csv`</span></a></code></pre></div>
<div class="fold s o">
<div class="sourceCode" id="cb356"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb356-1" data-line-number="1">racuniSiroki &lt;-<span class="st"> </span>racuniDugi</a>
<a class="sourceLine" id="cb356-2" data-line-number="2">racuniSiroki<span class="op">$</span>Vrijednost &lt;-<span class="st"> </span><span class="dv">1</span></a>
<a class="sourceLine" id="cb356-3" data-line-number="3">racuniSiroki &lt;-<span class="st"> </span><span class="kw">spread</span>(racuniSiroki, artikl, Vrijednost, <span class="dt">fill =</span> <span class="dv">0</span>)</a>
<a class="sourceLine" id="cb356-4" data-line-number="4"><span class="kw">head</span>(racuniSiroki)</a>
<a class="sourceLine" id="cb356-5" data-line-number="5"><span class="kw">write.csv</span>(racuniSiroki, <span class="dt">file =</span> <span class="st">&#39;potrosackaKosaricaSirokiFormat.csv&#39;</span>, <span class="dt">row.names =</span> F)</a></code></pre></div>
<pre><code>##   racunID Ajvar Cipi.Cips Coca.cola.2l Feta.sir Jabuke Karlovacko.pivo
## 1   15671     0         0            0        0      1               0
## 2   15672     0         0            1        0      0               1
## 3   15673     1         1            1        0      0               0
## 4   15674     1         0            0        1      1               0
## 5   15675     0         0            1        0      0               0
## 6   15676     0         0            0        0      0               0
##   Ketchup Kiselo.vrhnje Mandarine Mlijeko.0.5l Narance Nescaffe
## 1       1             0         0            0       0        0
## 2       0             1         0            1       0        0
## 3       0             0         1            0       0        1
## 4       1             0         0            1       1        0
## 5       0             0         0            1       1        0
## 6       0             0         0            0       0        0
##   Nutella.400.g Omekšivac.1.5l Ožujsko.pivo Salvete Sardine Senf
## 1             0              0            1       0       0    1
## 2             1              0            0       0       0    0
## 3             0              0            0       0       0    0
## 4             0              0            1       0       0    0
## 5             1              0            0       1       0    0
## 6             0              0            0       1       0    0
##   Tuna.pašteta Voda.2l
## 1            1       0
## 2            1       0
## 3            1       1
## 4            0       0
## 5            0       0
## 6            1       0</code></pre>
</div>
<hr />
</div>
<div id="funkcije-separate-i-unite" class="section level3">
<h3><span class="header-section-number">9.2.2</span> Funkcije <code>separate</code> i <code>unite</code></h3>
<hr />
<p>Paket <code>tidyr</code> ima još niz korisnih funkcija namijenjenih “uređivanju” podataka a mi ćemo ovdje obratiti još dvije koje se relativno često koriste - <code>separate</code> i <code>unite</code>.</p>
<p>Funkcija <code>separate</code> je korisna kada neki stupac ima “složene” vrijednosti koje želimo rastaviti u dva ili više stupaca.</p>
<p><strong>Zadatak 9.14 - podatkovni skup <code>odjeli</code></strong></p>
<div class="sourceCode" id="cb358"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb358-1" data-line-number="1"><span class="co"># čitajte podatke iz datoteke `odjeli.csv` u varijablu `odjeli`</span></a>
<a class="sourceLine" id="cb358-2" data-line-number="2"></a>
<a class="sourceLine" id="cb358-3" data-line-number="3"><span class="co"># proučite okvir `odjeli`</span></a></code></pre></div>
<div class="fold s o">
<div class="sourceCode" id="cb359"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb359-1" data-line-number="1">odjeli &lt;-<span class="st"> </span><span class="kw">read.csv</span>(<span class="st">&quot;odjeli.csv&quot;</span>, <span class="dt">stringsAsFactors =</span> F)</a>
<a class="sourceLine" id="cb359-2" data-line-number="2"></a>
<a class="sourceLine" id="cb359-3" data-line-number="3"><span class="kw">str</span>(odjeli)</a>
<a class="sourceLine" id="cb359-4" data-line-number="4"><span class="kw">head</span>(odjeli)</a></code></pre></div>
<pre><code>## &#39;data.frame&#39;:    28 obs. of  4 variables:
##  $ Odjel   : chr  &quot;A&quot; &quot;A&quot; &quot;A&quot; &quot;A&quot; ...
##  $ Kvartal : chr  &quot;Q1-2015&quot; &quot;Q2-2015&quot; &quot;Q3-2015&quot; &quot;Q4-2015&quot; ...
##  $ PrihodKn: num  12416 224290 10644 191229 258697 ...
##  $ RashodKn: num  23101 63886 35468 12249 61515 ...
##   Odjel Kvartal PrihodKn RashodKn
## 1     A Q1-2015  12416.2  23100.5
## 2     A Q2-2015 224290.1  63886.1
## 3     A Q3-2015  10643.7  35467.8
## 4     A Q4-2015 191229.3  12249.1
## 5     A Q1-2016 258697.4  61514.6
## 6     A Q2-2016 121865.3  46092.6</code></pre>
</div>
<hr />
<p>Ova tablica prikazuje prihode i rashode odjela neke tvrtke po kvartalima. Kvartali su trenutno pohranjeni u složenu varijablu <code>Kvartal</code> koja se sastoji od identifikatora godišnjeg kvartala (Q1, Q2, Q3 ili Q4) i godine. Za potrebe analize vjerojatno bi bilo zgodno ovo rastaviti u dva stupca - <code>Kvartal</code> (koji bi pohranjivao samo identifikator kvartala) i <code>Godina</code>.</p>
<p>Paket <code>tidyr</code> za ovakve potrebe nudi funkciju <code>separate</code> sa sljedećim potpisom:</p>
<div class="sourceCode" id="cb361"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb361-1" data-line-number="1"><span class="kw">separate</span>(data, col, into, <span class="dt">sep =</span> <span class="st">&quot;[^[:alnum:]]+&quot;</span>, <span class="dt">remove =</span> <span class="ot">TRUE</span>,</a>
<a class="sourceLine" id="cb361-2" data-line-number="2">  <span class="dt">convert =</span> <span class="ot">FALSE</span>, <span class="dt">extra =</span> <span class="st">&quot;warn&quot;</span>, <span class="dt">fill =</span> <span class="st">&quot;warn&quot;</span>, ...)</a></code></pre></div>
<p>Potpunu dokumentaciju funkcije možemo pogledati naredbom <code>?separate</code> a ovdje ćemo navesti objašnjenje nekih važnijih parametara:</p>
<ul>
<li><code>col</code> - stupac kojeg rastavljamo (ne moramo koristiti navodnike)</li>
<li><code>into</code> - imena novih stupaca (preporučuje se koristiti znakovni vektor)</li>
<li><code>sep</code> - separator vrijednosti u originalnom stupcu, <em>default</em>-na vrijednost je zapravo regularni izraz za “nešto što nije alfanumerički znak”</li>
<li><code>remove</code> - opisuje da li je potrebno ukloniti originalni stupac ili ne</li>
</ul>
<p>Pokušajmo primijeniti ovu funkciju na tablicu <code>odjeli</code>. Ponovimo usput princip korištenja <em>pipeline</em> operatora.</p>
<hr />
<p><strong>Zadatak 9.15 - funkcija <code>separate</code></strong></p>
<div class="sourceCode" id="cb362"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb362-1" data-line-number="1"><span class="co"># razdvojite stupac `Kvartal` u stupce `Kvartal` i `Godina` uz uklanjanje originalnog stupca</span></a>
<a class="sourceLine" id="cb362-2" data-line-number="2"><span class="co"># rezultat pohranite u varijablu `odjeli2`</span></a>
<a class="sourceLine" id="cb362-3" data-line-number="3"><span class="co"># sve učinite u sklopu jedne naredbe uz pomoć `%&gt;%` operatora</span></a>
<a class="sourceLine" id="cb362-4" data-line-number="4"></a>
<a class="sourceLine" id="cb362-5" data-line-number="5"></a>
<a class="sourceLine" id="cb362-6" data-line-number="6"><span class="co"># proučite okvir `odjeli2`</span></a></code></pre></div>
<div class="fold s o">
<div class="sourceCode" id="cb363"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb363-1" data-line-number="1">odjeli <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">separate</span>(Kvartal, <span class="kw">c</span>(<span class="st">&quot;Kvartal&quot;</span>, <span class="st">&quot;Godina&quot;</span>), <span class="st">&quot;-&quot;</span>) -&gt;<span class="st"> </span>odjeli2</a>
<a class="sourceLine" id="cb363-2" data-line-number="2"></a>
<a class="sourceLine" id="cb363-3" data-line-number="3"><span class="kw">str</span>(odjeli2)</a>
<a class="sourceLine" id="cb363-4" data-line-number="4"><span class="kw">head</span>(odjeli2)</a></code></pre></div>
<pre><code>## &#39;data.frame&#39;:    28 obs. of  5 variables:
##  $ Odjel   : chr  &quot;A&quot; &quot;A&quot; &quot;A&quot; &quot;A&quot; ...
##  $ Kvartal : chr  &quot;Q1&quot; &quot;Q2&quot; &quot;Q3&quot; &quot;Q4&quot; ...
##  $ Godina  : chr  &quot;2015&quot; &quot;2015&quot; &quot;2015&quot; &quot;2015&quot; ...
##  $ PrihodKn: num  12416 224290 10644 191229 258697 ...
##  $ RashodKn: num  23101 63886 35468 12249 61515 ...
##   Odjel Kvartal Godina PrihodKn RashodKn
## 1     A      Q1   2015  12416.2  23100.5
## 2     A      Q2   2015 224290.1  63886.1
## 3     A      Q3   2015  10643.7  35467.8
## 4     A      Q4   2015 191229.3  12249.1
## 5     A      Q1   2016 258697.4  61514.6
## 6     A      Q2   2016 121865.3  46092.6</code></pre>
</div>
<hr />
<p>Uočite da su stupci <code>Kvartal</code> i <code>Godina</code> zapravo kategorijske varijable i da bi ih bilo dobro faktorizirati. Faktoriziranje stupaca je nešto teže izvesti uz pomoć <em>pipeline</em> operatora (iako je izvedivo!) no u narednim poglavljima naučiti ćemo kako to puno lakše napraviti uz pomoć funkcija iz paketa <code>dplyr</code>.</p>
<p>Funkcija <code>separate</code> se često koristi za rastavljanje datuma (npr. <code>2016-10-28</code> u godinu, mjesec i dan) no u takvim situacijama preporuka je koristiti paket <code>lubridate</code> koji je stvoren upravo za lakše upravljanje datumima. Ovaj paket upoznati ćemo u jednom od sljedećih poglavlja.</p>
<hr />
<p>Za kraj naučimo još funkciju <code>unite</code> koja se nešto rijeđe koristi a zapravo je inverz funkcije <code>separate</code>. Potpis funkcije <code>unite</code> je:</p>
<div class="sourceCode" id="cb365"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb365-1" data-line-number="1"><span class="kw">unite</span>(data, col, ..., <span class="dt">sep =</span> <span class="st">&quot;_&quot;</span>, <span class="dt">remove =</span> <span class="ot">TRUE</span>)</a></code></pre></div>
<p>I u ovom slučaju dokumentaciju lako dohvaćamo sa <code>?unite</code>, a ovdje dajemo opis parametara koji potencijalno zahtijevaju dodatno objašnjenje:</p>
<ul>
<li><code>col</code> - ime novog stupca (nije nužno koristiti navodnike)</li>
<li><code>...</code> - imena stupaca koje spajamo - ne moramo koristiti navodnike, a ukoliko ima puno stupaca možemo se koristiti sličnom sintaksom za odabir kao i kod funkcije <code>gather</code></li>
</ul>
<p>Isprobajmo naredbu na okviru <code>odjeli2</code>.</p>
<hr />
<p><strong>Zadatak 9.16 - funkcija <code>unite</code></strong></p>
<div class="sourceCode" id="cb366"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb366-1" data-line-number="1"><span class="co"># spojite stupce `Kvartal` i `Godina` iz tablice `odjeli2` u jedinstven stupac `Kvartal`</span></a>
<a class="sourceLine" id="cb366-2" data-line-number="2"><span class="co"># uklonite stupce `Kvartal` i `Godina`</span></a>
<a class="sourceLine" id="cb366-3" data-line-number="3"><span class="co"># koristite `-` kao separator</span></a>
<a class="sourceLine" id="cb366-4" data-line-number="4"><span class="co"># spremite rezultat u varijablu `odjeli3`</span></a>
<a class="sourceLine" id="cb366-5" data-line-number="5"><span class="co"># sve ovo izvedite u sklopu jedne naredbe uz pomoć `%&gt;%` operatora</span></a>
<a class="sourceLine" id="cb366-6" data-line-number="6"></a>
<a class="sourceLine" id="cb366-7" data-line-number="7"></a>
<a class="sourceLine" id="cb366-8" data-line-number="8"><span class="co"># proučite okvire `odjeli` i `odjeli3`</span></a></code></pre></div>
<div class="fold s o">
<div class="sourceCode" id="cb367"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb367-1" data-line-number="1">odjeli2 <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">unite</span>(Kvartal, Kvartal, Godina, <span class="dt">sep =</span> <span class="st">&quot;-&quot;</span>) -&gt;<span class="st"> </span>odjeli3</a>
<a class="sourceLine" id="cb367-2" data-line-number="2"></a>
<a class="sourceLine" id="cb367-3" data-line-number="3"><span class="kw">str</span>(odjeli)</a>
<a class="sourceLine" id="cb367-4" data-line-number="4"><span class="kw">str</span>(odjeli3)</a>
<a class="sourceLine" id="cb367-5" data-line-number="5"><span class="kw">head</span>(odjeli)</a>
<a class="sourceLine" id="cb367-6" data-line-number="6"><span class="kw">head</span>(odjeli3)</a></code></pre></div>
<pre><code>## &#39;data.frame&#39;:    28 obs. of  4 variables:
##  $ Odjel   : chr  &quot;A&quot; &quot;A&quot; &quot;A&quot; &quot;A&quot; ...
##  $ Kvartal : chr  &quot;Q1-2015&quot; &quot;Q2-2015&quot; &quot;Q3-2015&quot; &quot;Q4-2015&quot; ...
##  $ PrihodKn: num  12416 224290 10644 191229 258697 ...
##  $ RashodKn: num  23101 63886 35468 12249 61515 ...
## &#39;data.frame&#39;:    28 obs. of  4 variables:
##  $ Odjel   : chr  &quot;A&quot; &quot;A&quot; &quot;A&quot; &quot;A&quot; ...
##  $ Kvartal : chr  &quot;Q1-2015&quot; &quot;Q2-2015&quot; &quot;Q3-2015&quot; &quot;Q4-2015&quot; ...
##  $ PrihodKn: num  12416 224290 10644 191229 258697 ...
##  $ RashodKn: num  23101 63886 35468 12249 61515 ...
##   Odjel Kvartal PrihodKn RashodKn
## 1     A Q1-2015  12416.2  23100.5
## 2     A Q2-2015 224290.1  63886.1
## 3     A Q3-2015  10643.7  35467.8
## 4     A Q4-2015 191229.3  12249.1
## 5     A Q1-2016 258697.4  61514.6
## 6     A Q2-2016 121865.3  46092.6
##   Odjel Kvartal PrihodKn RashodKn
## 1     A Q1-2015  12416.2  23100.5
## 2     A Q2-2015 224290.1  63886.1
## 3     A Q3-2015  10643.7  35467.8
## 4     A Q4-2015 191229.3  12249.1
## 5     A Q1-2016 258697.4  61514.6
## 6     A Q2-2016 121865.3  46092.6</code></pre>
</div>
<hr />
</div>
</div>
<div id="zadaci-za-vjezbu-7" class="section level2 unnumbered">
<h2>Zadaci za vježbu</h2>
<ol style="list-style-type: decimal">
<li>Inicijalizirajte generator slučajnih brojeva uz pomoć naredbe <code>set.seed(1234)</code>. Potom uz pomoć jedne naredbe i <code>%&gt;%</code> operatora izvedite sljedeće:</li>
</ol>
<ul>
<li>stvorite 100000 nasumičnih brojeva izvučenih iz normalne razdiobe za aritmetičkom sredinom 10000 i standardnom devijacijom 1000</li>
<li>zaokružite brojeve na prvi veći cijeli broj</li>
<li>izbacite duplikate iz skupa</li>
<li>poredajte skup po veličini</li>
<li>slučajnim odabirom iz skupa izvucite 100 elemenata</li>
<li>organizirajte tih 100 elemenata u matricu 10 x 10, složenu po retcima</li>
<li>izračunajte sume redaka matrice</li>
<li>ispišite prosjek suma redaka na zaslon.</li>
</ul>
<ol start="2" style="list-style-type: decimal">
<li>U datoteci <code>weather.csv</code> nalaze se podaci o izmjerenim vremenskim uvjetima od strane meteorološke stanice koja svaki sat vremena mjeri temperaturu, tlak, vlažnost i brzinu vjetra (podaci su preuzeti i prilagođeni iz podatkovnog skupa paketa <code>weatherData</code> dostupnog na CRAN-u). Izvedite sljedeće:</li>
</ol>
<ul>
<li>učitajte datoteku u podatkovni okvir i proučite učitane podatke (<code>names</code>, <code>str</code>, <code>summary</code>, <code>head</code>…)</li>
<li>odgovorite: da li se radi o urednim podacima? Zašto?</li>
<li>poduzmite odgovarajuće korake kako bi dobili podatkovni okvir koji odgovara principu urednih podataka</li>
<li>spremite “uređeni” u okvir u datoteku <code>weatherClean.csv</code></li>
</ul>
<hr />
<p><a rel="license" href="http://creativecommons.org/licenses/by-nc-nd/4.0/"><img alt="Creative Commons License" style="border-width:0" src="https://i.creativecommons.org/l/by-nc-nd/4.0/88x31.png" /></a><br /><span xmlns:dct="http://purl.org/dc/terms/" property="dct:title">Programirajmo u R-u</span> by <a xmlns:cc="http://creativecommons.org/ns#" href="https://www.fer.unizg.hr/en/damir.pintar" property="cc:attributionName" rel="cc:attributionURL">Damir Pintar</a> is licensed under a <a rel="license" href="http://creativecommons.org/licenses/by-nc-nd/4.0/">Creative Commons Attribution-NonCommercial-NoDerivatives 4.0 International License</a>.<br />Based on a work at <a xmlns:dct="http://purl.org/dc/terms/" href="https://ratnip.github.io/FER_OPJR/" rel="dct:source">https://ratnip.github.io/FER_OPJR/</a></p>

</div>
</div>
<h3>References</h3>
<div id="refs" class="references">
<div id="ref-R-magrittr">
<p>Bache, Stefan Milton, and Hadley Wickham. 2014. <em>Magrittr: A Forward-Pipe Operator for R</em>. <a href="https://CRAN.R-project.org/package=magrittr">https://CRAN.R-project.org/package=magrittr</a>.</p>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="apply.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="datumi.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"google": false,
"linkedin": false,
"weibo": false,
"instapper": false,
"vk": false,
"all": ["facebook", "google", "twitter", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"download": null,
"toc": {
"collapse": "section",
"scroll_highlight": true
},
"toolbar": {
"position": "fixed",
"edit": null,
"download": null,
"search": true
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdn.bootcss.com/mathjax/2.7.1/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:" && /^https?:/.test(src))
      src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
