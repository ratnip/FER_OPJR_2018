<!DOCTYPE html>
<html >

<head>

  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>Programirajmo u R-u</title>
  <meta name="description" content="Udzbenik za vještinu ‘Osnove programskog jezika R’ na Fakultetu elektrotehnike i racunarstva, Sveuciliste u Zagrebu.">
  <meta name="generator" content="bookdown 0.7 and GitBook 2.6.7">

  <meta property="og:title" content="Programirajmo u R-u" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="Udzbenik za vještinu ‘Osnove programskog jezika R’ na Fakultetu elektrotehnike i racunarstva, Sveuciliste u Zagrebu." />
  <meta name="github-repo" content="rstudio/bookdown-demo" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Programirajmo u R-u" />
  
  <meta name="twitter:description" content="Udzbenik za vještinu ‘Osnove programskog jezika R’ na Fakultetu elektrotehnike i racunarstva, Sveuciliste u Zagrebu." />
  

<meta name="author" content="Damir Pintar">


<meta name="date" content="2018-10-30">

  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  
  
<link rel="prev" href="vektori.html">
<link rel="next" href="kontrola.html">
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />








<style type="text/css">
.showopt {
  background-color: #004c93;
  color: #FFFFFF; 
  width: 140px;
  height: 4	0px;
  text-align: center;
  vertical-align: middle !important;
  float: right;
  font-family: sans-serif;
  font-size:10 pt;
  border-radius: 8px;
}

.showopt:hover {
    background-color: #dfe4f2;
    color: #004c93;
}

pre.plot {
  background-color: white !important;
}
</style>

<script>
 $(document).ready(function() {

  $chunks = $('.fold');

  $chunks.each(function () {

    // add button to source code chunks
    if ( $(this).hasClass('s') ) {
      $('pre.r', this).prepend("<div class=\"showopt\">Prikaži rješenje</div><br style=\"line-height:22px;\"/>");
      $('pre.r', this).children('code').attr('class', 'folded');
    }

    // add button to output chunks
    if ( $(this).hasClass('o') ) {
      $('pre:not(.r)', this).has('code').prepend("<div class=\"showopt\">Prikaži ispis</div><br style=\"line-height:22px;\"/>");
      $('pre:not(.r)', this).children('code:not(r)').addClass('folded');

      // add button to plots
      $(this).find('img').wrap('<pre class=\"plot\"></pre>');
      $('pre.plot', this).prepend("<div class=\"showopt\">Prikaži sliku</div><br style=\"line-height:22px;\"/>");
      $('pre.plot', this).children('img').addClass('folded');

    }
  });

  // hide all chunks when document is loaded
  $('.folded').css('display', 'none')

  // function to toggle the visibility
  $('.showopt').click(function() {
    var label = $(this).html();
    if (label.indexOf("Prikaži") >= 0) {
      $(this).html(label.replace("Prikaži", "Sakrij"));
    } else {
      $(this).html(label.replace("Sakrij", "Prikaži"));
    }
    $(this).siblings('code, img').slideToggle('fast', 'swing');
  });
});
</script>


<style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; left: -4em; }
pre.numberSource a.sourceLine::before
  { content: attr(data-line-number);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>(Udžbenik za vještinu “Osnove programskog jezika R”)</a><ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#predgovor"><i class="fa fa-check"></i>Predgovor</a></li>
</ul></li>
<li class="part"><span><b>I Osnovni elementi jezika R</b></span></li>
<li class="chapter" data-level="1" data-path="uvod.html"><a href="uvod.html"><i class="fa fa-check"></i><b>1</b> Uvod</a><ul>
<li class="chapter" data-level="1.1" data-path="uvod.html"><a href="uvod.html#sto-je-programski-jezik-r"><i class="fa fa-check"></i><b>1.1</b> Što je programski jezik R?</a><ul>
<li class="chapter" data-level="1.1.1" data-path="uvod.html"><a href="uvod.html#opcenito-o-r-u"><i class="fa fa-check"></i><b>1.1.1</b> Općenito o R-u</a></li>
<li class="chapter" data-level="1.1.2" data-path="uvod.html"><a href="uvod.html#alternative-jeziku-r"><i class="fa fa-check"></i><b>1.1.2</b> Alternative jeziku R</a></li>
</ul></li>
<li class="chapter" data-level="1.2" data-path="uvod.html"><a href="uvod.html#instalacija-programske-podrske"><i class="fa fa-check"></i><b>1.2</b> Instalacija programske podrške</a></li>
<li class="chapter" data-level="1.3" data-path="uvod.html"><a href="uvod.html#pregled-razvojnog-sucelja-rstudio"><i class="fa fa-check"></i><b>1.3</b> Pregled razvojnog sučelja <em>RStudio</em></a><ul>
<li class="chapter" data-level="1.3.1" data-path="uvod.html"><a href="uvod.html#interaktivna-konzola"><i class="fa fa-check"></i><b>1.3.1</b> Interaktivna konzola</a></li>
<li class="chapter" data-level="1.3.2" data-path="uvod.html"><a href="uvod.html#pisanje-r-skripti"><i class="fa fa-check"></i><b>1.3.2</b> Pisanje R skripti</a></li>
<li class="chapter" data-level="1.3.3" data-path="uvod.html"><a href="uvod.html#r-markdown"><i class="fa fa-check"></i><b>1.3.3</b> <em>R Markdown</em></a></li>
</ul></li>
<li class="chapter" data-level="1.4" data-path="uvod.html"><a href="uvod.html#kako-koristiti-ovaj-udzbenik"><i class="fa fa-check"></i><b>1.4</b> Kako koristiti ovaj udžbenik?</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="tipovi.html"><a href="tipovi.html"><i class="fa fa-check"></i><b>2</b> Osnovni tipovi podataka i operatori</a><ul>
<li class="chapter" data-level="2.1" data-path="tipovi.html"><a href="tipovi.html#osnovni-tipovi-podataka"><i class="fa fa-check"></i><b>2.1</b> Osnovni tipovi podataka</a></li>
<li class="chapter" data-level="2.2" data-path="tipovi.html"><a href="tipovi.html#operatori"><i class="fa fa-check"></i><b>2.2</b> Operatori</a></li>
<li class="chapter" data-level="2.3" data-path="tipovi.html"><a href="tipovi.html#nedostajuce-nepoznate-i-nemoguce-vrijednosti"><i class="fa fa-check"></i><b>2.3</b> Nedostajuće, nepoznate i nemoguće vrijednosti</a></li>
<li class="chapter" data-level="" data-path="tipovi.html"><a href="tipovi.html#zadaci-za-vjezbu"><i class="fa fa-check"></i>Zadaci za vježbu</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="vektori.html"><a href="vektori.html"><i class="fa fa-check"></i><b>3</b> Vektori, matrice i liste</a><ul>
<li class="chapter" data-level="3.1" data-path="vektori.html"><a href="vektori.html#vektori-1"><i class="fa fa-check"></i><b>3.1</b> Vektori</a><ul>
<li class="chapter" data-level="3.1.1" data-path="vektori.html"><a href="vektori.html#stvaranje-vektora"><i class="fa fa-check"></i><b>3.1.1</b> Stvaranje vektora</a></li>
<li class="chapter" data-level="3.1.2" data-path="vektori.html"><a href="vektori.html#operator"><i class="fa fa-check"></i><b>3.1.2</b> Operator <code>[</code></a></li>
<li class="chapter" data-level="3.1.3" data-path="vektori.html"><a href="vektori.html#principi-vektorizacije-i-recikliranja"><i class="fa fa-check"></i><b>3.1.3</b> Principi vektorizacije i recikliranja</a></li>
</ul></li>
<li class="chapter" data-level="3.2" data-path="vektori.html"><a href="vektori.html#indeksni-vektori"><i class="fa fa-check"></i><b>3.2</b> Indeksni vektori</a><ul>
<li class="chapter" data-level="3.2.1" data-path="vektori.html"><a href="vektori.html#lokacijsko-referenciranje"><i class="fa fa-check"></i><b>3.2.1</b> Lokacijsko referenciranje</a></li>
<li class="chapter" data-level="3.2.2" data-path="vektori.html"><a href="vektori.html#uvjetno-referenciranje"><i class="fa fa-check"></i><b>3.2.2</b> Uvjetno referenciranje</a></li>
<li class="chapter" data-level="3.2.3" data-path="vektori.html"><a href="vektori.html#imensko-referenciranje"><i class="fa fa-check"></i><b>3.2.3</b> Imensko referenciranje</a></li>
</ul></li>
<li class="chapter" data-level="3.3" data-path="vektori.html"><a href="vektori.html#matrice-i-polja"><i class="fa fa-check"></i><b>3.3</b> Matrice i polja</a><ul>
<li class="chapter" data-level="3.3.1" data-path="vektori.html"><a href="vektori.html#rezanje-matrica"><i class="fa fa-check"></i><b>3.3.1</b> Rezanje matrica</a></li>
</ul></li>
<li class="chapter" data-level="3.4" data-path="vektori.html"><a href="vektori.html#liste"><i class="fa fa-check"></i><b>3.4</b> Liste</a></li>
<li class="chapter" data-level="" data-path="vektori.html"><a href="vektori.html#zadaci-za-vjezbu-1"><i class="fa fa-check"></i>Zadaci za vježbu</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="okviri.html"><a href="okviri.html"><i class="fa fa-check"></i><b>4</b> Podatkovni okviri i faktori</a><ul>
<li class="chapter" data-level="4.1" data-path="okviri.html"><a href="okviri.html#podatkovni-okviri"><i class="fa fa-check"></i><b>4.1</b> Podatkovni okviri</a></li>
<li class="chapter" data-level="4.2" data-path="okviri.html"><a href="okviri.html#odabir-redaka-i-stupaca-podatkovnih-okvira"><i class="fa fa-check"></i><b>4.2</b> Odabir redaka i stupaca podatkovnih okvira</a></li>
<li class="chapter" data-level="4.3" data-path="okviri.html"><a href="okviri.html#dodavanje-i-brisanje-redaka-i-stupaca"><i class="fa fa-check"></i><b>4.3</b> Dodavanje i brisanje redaka i stupaca</a></li>
<li class="chapter" data-level="4.4" data-path="okviri.html"><a href="okviri.html#faktori"><i class="fa fa-check"></i><b>4.4</b> Faktori</a></li>
<li class="chapter" data-level="" data-path="okviri.html"><a href="okviri.html#zadaci-za-vjezbu-2"><i class="fa fa-check"></i>Zadaci za vježbu</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="kontrola.html"><a href="kontrola.html"><i class="fa fa-check"></i><b>5</b> Kontrola toka i objekti</a><ul>
<li class="chapter" data-level="5.1" data-path="kontrola.html"><a href="kontrola.html#naredbe-kontrole-toka"><i class="fa fa-check"></i><b>5.1</b> Naredbe kontrole toka</a><ul>
<li class="chapter" data-level="5.1.1" data-path="kontrola.html"><a href="kontrola.html#uvjetno-izvoenje-naredbi"><i class="fa fa-check"></i><b>5.1.1</b> Uvjetno izvođenje naredbi</a></li>
<li class="chapter" data-level="5.1.2" data-path="kontrola.html"><a href="kontrola.html#programske-petlje"><i class="fa fa-check"></i><b>5.1.2</b> Programske petlje</a></li>
<li class="chapter" data-level="5.1.3" data-path="kontrola.html"><a href="kontrola.html#petlja-repeat"><i class="fa fa-check"></i><b>5.1.3</b> Petlja <code>repeat</code></a></li>
<li class="chapter" data-level="5.1.4" data-path="kontrola.html"><a href="kontrola.html#petlja-while"><i class="fa fa-check"></i><b>5.1.4</b> Petlja <code>while</code></a></li>
<li class="chapter" data-level="5.1.5" data-path="kontrola.html"><a href="kontrola.html#petlja-for"><i class="fa fa-check"></i><b>5.1.5</b> Petlja <code>for</code></a></li>
</ul></li>
<li class="chapter" data-level="5.2" data-path="kontrola.html"><a href="kontrola.html#objektni-modeli-u-jeziku-r"><i class="fa fa-check"></i><b>5.2</b> Objektni modeli u jeziku R</a><ul>
<li class="chapter" data-level="5.2.1" data-path="kontrola.html"><a href="kontrola.html#pregled-objektnog-modela-s3"><i class="fa fa-check"></i><b>5.2.1</b> Pregled objektnog modela S3</a></li>
<li class="chapter" data-level="5.2.2" data-path="kontrola.html"><a href="kontrola.html#genericke-funkcije"><i class="fa fa-check"></i><b>5.2.2</b> Generičke funkcije</a></li>
<li class="chapter" data-level="5.2.3" data-path="kontrola.html"><a href="kontrola.html#zakljucci-o-s3-objektima"><i class="fa fa-check"></i><b>5.2.3</b> Zaključci o S3 objektima</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="kontrola.html"><a href="kontrola.html#zadaci-za-vjezbu-3"><i class="fa fa-check"></i>Zadaci za vježbu</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="paketi.html"><a href="paketi.html"><i class="fa fa-check"></i><b>6</b> Paketi, ugrađene funkcije i okoline</a><ul>
<li class="chapter" data-level="6.1" data-path="paketi.html"><a href="paketi.html#rad-s-paketima"><i class="fa fa-check"></i><b>6.1</b> Rad s paketima</a></li>
<li class="chapter" data-level="6.2" data-path="paketi.html"><a href="paketi.html#ugraene-funkcije"><i class="fa fa-check"></i><b>6.2</b> Ugrađene funkcije</a></li>
<li class="chapter" data-level="6.3" data-path="paketi.html"><a href="paketi.html#okoline"><i class="fa fa-check"></i><b>6.3</b> Okoline</a></li>
<li class="chapter" data-level="" data-path="paketi.html"><a href="paketi.html#zadaci-za-vjezbu-4"><i class="fa fa-check"></i>Zadaci za vježbu</a></li>
</ul></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Programirajmo u R-u</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="okviri" class="section level1">
<h1><span class="header-section-number">4</span> Podatkovni okviri i faktori</h1>
<hr />
<div id="podatkovni-okviri" class="section level2">
<h2><span class="header-section-number">4.1</span> Podatkovni okviri</h2>
<p>Kao što je već rečeno, podatkovni okvir je daleko najpopularniji element programskog jezika R. Jezik R predviđen je primarno analizi podataka, a podatkovni okvir zapravo predstavlja objektnu reprezentaciju podatkovnog skupa kojeg namjeravamo analizirati. Drugim riječima, podatkovni okvir je objekt slične funkcije kao tablica u <em>Microsoft Excel</em>-u ili relacijskoj bazi podataka. Gotovo svaka “sesija” u R-u svodi se na manipuliranje podatkovnim okvirima - no dok u <em>Excel</em>-u tablicom upravljamo uz pomoć grafičkog sučelja, a u bazi uz pomoć upitnog jezika <em>SQL</em>, u R-u podatkovnim okvirima upravljamo gotovo isključivo programski.</p>
<p>Uzmimo za primjer sljedeću tablicu:</p>
<table>
<thead>
<tr class="header">
<th>pbr</th>
<th>nazivMjesta</th>
<th>prosjPlacaKn</th>
<th>brojStanovnika</th>
<th>prirez</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>10000</td>
<td>Zagreb</td>
<td>6359.00</td>
<td>790017</td>
<td>18</td>
</tr>
<tr class="even">
<td>51000</td>
<td>Rijeka</td>
<td>5418.00</td>
<td>128384</td>
<td>15</td>
</tr>
<tr class="odd">
<td>21000</td>
<td>Split</td>
<td>5170.00</td>
<td>167121</td>
<td>10</td>
</tr>
<tr class="even">
<td>31000</td>
<td>Osijek</td>
<td>4892.00</td>
<td>84104</td>
<td>13</td>
</tr>
<tr class="odd">
<td>20000</td>
<td>Dubrovnik</td>
<td>5348.00</td>
<td>28434</td>
<td>10</td>
</tr>
</tbody>
</table>
<p>Ovdje se radi o podatkovnom skupu koji sadržava određene parametre vezane uz gradove u Republici Hrvatskoj (navedene vrijednosti ne odgovaraju nužno trenutnom stanju već ih koristimo samo za demonstraciju). Lako možemo zamisliti kako ove podatke zapisujemo u <em>Excel</em> ili stvaramo relacijsku tablicu naziva npr. MJESTO u koju onda pohranjujemo navedene podatke. Pokažimo sada kako bi sa istim podacima manipulirati u sklopu jezika R, tj. pokušajmo stvoriti podatkovni okvir koji će sadržavati ove podatke.</p>
<hr />
<p>U prošloj lekciji smo napomenuli da je lista kao složeni tip zapravo svojevrsni “predložak” uz pomoć kojeg možemo raditi nove objekte. Podatkovni okvir tako zapravo nije ništa drugo nego lista – tj. “spremnik” koji može sadržavati u sebi druge spremnike podataka različitog tipa. No dok je “lista“ zapravo <em>univerzalni</em> spremnik, tj. nemamo ograničenja što”trpamo&quot; u nju, podatkovni okvir ima određene restrikcije.</p>
<p>Najvažnije ograničenje koje podatkovni okvir nameće jest da <strong>svaki element unutar podatkovnog okvira mora imati isti broj elemenata</strong>. Zašto je tome tako? Zamislimo listu u kojoj svaki element ima isti broj podelemenata. Ako svaki element skiciramo vertikalno, sa podelementima napisanim jedan ispod drugog, onda će ti podelementi biti “poravnati” po retcima čime smo postigli klasičnu organizaciju podataka u stupce (elemente liste) i retke (poravnati podelementi). Dakle, ova restrikcija zapravo direktno nameće “tabličnu” ili “matričnu” strukturu liste sa jasno definiranim retcima i stupcima, što nam zapravo omogućuje da podatkovnim okvirom upravljamo i uz pomoć metoda vezanih uz liste, ali i uz pomoć metoda primarno namijenjenih matricama.</p>
<hr />
<p>Postoji više načina stvaranja podatkovnih okvira, a mi ćemo prikazati dva u praksi najčešće susretana scenarija:</p>
<ul>
<li>programsko stvaranje uz pomoć funkcije <code>data.frame</code></li>
<li>učitavanje podataka iz vanjskog izvora uz pomoć funkcije <code>read.csv</code></li>
</ul>
<p>Prikažimo oba slučaja. Prvo ćemo stvoriti podatkovni okvir programski.</p>
<hr />
<p><strong>Zadatak 4.1 - programsko stvaranje podatkovnog okvira</strong></p>
<div class="sourceCode" id="cb129"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb129-1" data-line-number="1">pbr =<span class="st"> </span><span class="kw">c</span>(<span class="dv">10000</span>, <span class="dv">51000</span>, <span class="dv">21000</span>, <span class="dv">31000</span>, <span class="dv">2000</span>)</a>
<a class="sourceLine" id="cb129-2" data-line-number="2">nazivMjesta =<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;Zagreb&quot;</span>, <span class="st">&quot;Rijeka&quot;</span>, <span class="st">&quot;Split&quot;</span>, <span class="st">&quot;Osijek&quot;</span>, <span class="st">&quot;Dubrovnik&quot;</span>)</a>
<a class="sourceLine" id="cb129-3" data-line-number="3">prosjPlacaKn =<span class="st"> </span><span class="kw">c</span>(<span class="fl">6359.</span>, <span class="fl">5418.</span>, <span class="fl">5170.</span>, <span class="fl">4892.</span>, <span class="fl">5348.</span>)</a>
<a class="sourceLine" id="cb129-4" data-line-number="4">brojStanovnika =<span class="st"> </span><span class="kw">c</span>(<span class="dv">790017</span>, <span class="dv">128384</span>, <span class="dv">167121</span>, <span class="dv">84104</span>, <span class="dv">28434</span>)</a>
<a class="sourceLine" id="cb129-5" data-line-number="5">prirez =<span class="st"> </span><span class="kw">c</span>(<span class="dv">18</span>, <span class="dv">15</span>, <span class="dv">10</span>, <span class="dv">13</span>, <span class="dv">10</span>)</a>
<a class="sourceLine" id="cb129-6" data-line-number="6"></a>
<a class="sourceLine" id="cb129-7" data-line-number="7"><span class="co"># uz pomoć funkcije `data.frame` i gornjih vektora stvorite podatkovni okvir `mjesto`</span></a>
<a class="sourceLine" id="cb129-8" data-line-number="8"><span class="co"># koristite istu sintaksu kao kod stvaranja liste</span></a>
<a class="sourceLine" id="cb129-9" data-line-number="9"><span class="co"># elemente liste nazovite imenima varijabli</span></a>
<a class="sourceLine" id="cb129-10" data-line-number="10"></a>
<a class="sourceLine" id="cb129-11" data-line-number="11"></a>
<a class="sourceLine" id="cb129-12" data-line-number="12"><span class="co"># ispišite podatkovni okvir `mjesto`</span></a></code></pre></div>
<div class="fold s o">
<div class="sourceCode" id="cb130"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb130-1" data-line-number="1">pbr =<span class="st"> </span><span class="kw">c</span>(<span class="dv">10000</span>, <span class="dv">51000</span>, <span class="dv">21000</span>, <span class="dv">31000</span>, <span class="dv">2000</span>)</a>
<a class="sourceLine" id="cb130-2" data-line-number="2">nazivMjesta =<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;Zagreb&quot;</span>, <span class="st">&quot;Rijeka&quot;</span>, <span class="st">&quot;Split&quot;</span>, <span class="st">&quot;Osijek&quot;</span>, <span class="st">&quot;Dubrovnik&quot;</span>)</a>
<a class="sourceLine" id="cb130-3" data-line-number="3">prosjPlacaKn =<span class="st"> </span><span class="kw">c</span>(<span class="fl">6359.</span>, <span class="fl">5418.</span>, <span class="fl">5170.</span>, <span class="fl">4892.</span>, <span class="fl">5348.</span>)</a>
<a class="sourceLine" id="cb130-4" data-line-number="4">brojStanovnika =<span class="st"> </span><span class="kw">c</span>(<span class="dv">790017</span>, <span class="dv">128384</span>, <span class="dv">167121</span>, <span class="dv">84104</span>, <span class="dv">28434</span>)</a>
<a class="sourceLine" id="cb130-5" data-line-number="5">prirez =<span class="st"> </span><span class="kw">c</span>(<span class="dv">18</span>, <span class="dv">15</span>, <span class="dv">10</span>, <span class="dv">13</span>, <span class="dv">10</span>)</a>
<a class="sourceLine" id="cb130-6" data-line-number="6"></a>
<a class="sourceLine" id="cb130-7" data-line-number="7"><span class="co"># uz pomoć funkcije `data.frame` i gornjih vektora stvorite podatkovni okvir `mjesto`</span></a>
<a class="sourceLine" id="cb130-8" data-line-number="8"><span class="co"># koristite istu sintaksu kao kod stvaranja liste</span></a>
<a class="sourceLine" id="cb130-9" data-line-number="9"><span class="co"># elemente liste nazovite imenima varijabli</span></a>
<a class="sourceLine" id="cb130-10" data-line-number="10"></a>
<a class="sourceLine" id="cb130-11" data-line-number="11">mjesto &lt;-<span class="st"> </span><span class="kw">data.frame</span>( <span class="dt">pbr =</span> pbr,</a>
<a class="sourceLine" id="cb130-12" data-line-number="12">                      <span class="dt">nazivMjesta =</span> nazivMjesta,</a>
<a class="sourceLine" id="cb130-13" data-line-number="13">                      <span class="dt">prosjPlacaKn =</span> prosjPlacaKn,</a>
<a class="sourceLine" id="cb130-14" data-line-number="14">                      <span class="dt">brojStanovnika =</span> brojStanovnika,</a>
<a class="sourceLine" id="cb130-15" data-line-number="15">                      <span class="dt">prirez =</span> prirez)</a>
<a class="sourceLine" id="cb130-16" data-line-number="16"></a>
<a class="sourceLine" id="cb130-17" data-line-number="17"><span class="co"># ispišite podatkovni okvir `mjesto`</span></a>
<a class="sourceLine" id="cb130-18" data-line-number="18">mjesto</a></code></pre></div>
<pre><code>##     pbr nazivMjesta prosjPlacaKn brojStanovnika prirez
## 1 10000      Zagreb         6359         790017     18
## 2 51000      Rijeka         5418         128384     15
## 3 21000       Split         5170         167121     10
## 4 31000      Osijek         4892          84104     13
## 5  2000   Dubrovnik         5348          28434     10</code></pre>
</div>
<hr />
<p>Ukoliko želite, pokušajte ponovo stvoriti gornji podatkovni okvir ali uz različite brojeve elemenata vektora koji čine stupce. Ova operacija rezultirati će greškom uz prikladnu poruku a podatkovni okvir neće biti stvoren - R se trudi da matrična priroda okvira uvijek bude očuvana.</p>
<p>Mala napomena glede terminologije: u nastavku ćemo zbog jednostavnosti “podatkovni okvir” često zvati jednostavno “okvir” ili “tablica”. Isto tako, često ćemo za elemente podatkovnog okvira jednakopravno koristiti izraze “stupac”, “varijabla” ili “atribut”, dok ćemo paralelne podelemente elemenata okvira nazivati “retcima” ili “obzervacijama”. Ovi termini u skladu su sa standardnim načinom referenciranja elemenata tablice te statističkim terminima koji se odnose na tablične podatkovne skupove. Ukoliko iz konteksta postoji šansa za dvosmislenost, koristiti će se onaj termin koji jasno opisuje element koji se referencira.</p>
<hr />
<p>Pokušajmo sada učitati tablicu iz vanjskog izvora. Iako R dopušta različite oblike “vanjskih” podataka, mi ćemo pretpostaviti da podatke dobivamo u tzv. “CSV obliku” (engl. CSV - <em>comma-separated values</em>). Ovaj oblik jedan je od najpopularnijih načina pohrane podataka u čistom tekstualnom obliku koji ima prednosti da se lako izrađuje ručno, a većina alata za upravljanje podacima implementira i logiku za izvoz podataka u obliku CSV datoteke.</p>
<p>U nastavku možemo vidjeti primjer CSV datoteke koja odgovara podatkovnom okviru izrađenom u prethodnom primjeru. Pretpostavimo da se datoteka zove <code>mjesto.csv</code>. Podaci su odvojeni zarezom (bez razmaknice!), svaka obzervacija u svojem retku, a opcionalni prvi redak predstavlja nazive stupaca.</p>
<hr />
<div class="sourceCode" id="cb132"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb132-1" data-line-number="1">pbr,nazivMjesta,prosjPlacaKn,brojStanovnika,prirez</a>
<a class="sourceLine" id="cb132-2" data-line-number="2"><span class="dv">10000</span>,Zagreb,<span class="fl">6359.00</span>,<span class="dv">790017</span>,<span class="dv">18</span> </a>
<a class="sourceLine" id="cb132-3" data-line-number="3"><span class="dv">51000</span>,Rijeka,<span class="fl">5418.00</span>,<span class="dv">128384</span>,<span class="dv">15</span></a>
<a class="sourceLine" id="cb132-4" data-line-number="4"><span class="dv">21000</span>,Split,<span class="fl">5170.00</span>,<span class="dv">167121</span>,<span class="dv">10</span></a>
<a class="sourceLine" id="cb132-5" data-line-number="5"><span class="dv">31000</span>,Osijek,<span class="fl">4892.00</span>,<span class="dv">84104</span>,<span class="dv">13</span> </a>
<a class="sourceLine" id="cb132-6" data-line-number="6"><span class="dv">20000</span>,Dubrovnik,<span class="fl">5348.00</span>,<span class="dv">28434</span>,<span class="dv">10</span></a></code></pre></div>
<hr />
<p>Jedan od potencijalnih problema sa CSV datotekama jest taj što one koriste zarez kao razdvojnik (<em>delimiter</em>) elemenata zapisa, a na određenim govornim područjima kao standard se umjesto decimalne točke koristi upravo “decimalni zarez”. Zbog ove činjenice postoji i “alternativni” CSV standard koji kao razdvojnik koristi “točku-zarez”, tako da bi naša CSV datoteka u tom slučaju izgledala ovako (nazovimo ju <code>mjestoAlt.csv</code>):</p>
<hr />
<div class="sourceCode" id="cb133"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb133-1" data-line-number="1">pbr;nazivMjesta;prosjPlacaKn;brojStanovnika;prirez</a>
<a class="sourceLine" id="cb133-2" data-line-number="2"><span class="dv">10000</span>;Zagreb;<span class="dv">6359</span>,<span class="dv">00</span>;<span class="dv">790017</span>;<span class="dv">18</span> </a>
<a class="sourceLine" id="cb133-3" data-line-number="3"><span class="dv">51000</span>;Rijeka;<span class="dv">5418</span>,<span class="dv">00</span>;<span class="dv">128384</span>;<span class="dv">15</span></a>
<a class="sourceLine" id="cb133-4" data-line-number="4"><span class="dv">21000</span>;Split;<span class="dv">5170</span>,<span class="dv">00</span>;<span class="dv">167121</span>;<span class="dv">10</span></a>
<a class="sourceLine" id="cb133-5" data-line-number="5"><span class="dv">31000</span>;Osijek;<span class="dv">4892</span>,<span class="dv">00</span>;<span class="dv">84104</span>;<span class="dv">13</span> </a>
<a class="sourceLine" id="cb133-6" data-line-number="6"><span class="dv">20000</span>;Dubrovnik;<span class="dv">5348</span>,<span class="dv">00</span>;<span class="dv">28434</span>;<span class="dv">10</span></a></code></pre></div>
<hr />
<p>Obzirom da je “decimalni zarez” propisani standard i na području Republike Hrvatske, u radu sa CSV datotekama moramo biti oprezni koji od dva standarda zapisa se koristi. Na sreću, jezik R nudi funkcije za podršku oba standarda, tako da ne moramo posebno prilagođavati ulazne datoteke, tek biti oprezni koju funkciju ćemo odabrati.</p>
<p>Pretpostavimo da u radnoj mapi imamo ove dvije datoteke:</p>
<ul>
<li><code>mjesto.csv</code></li>
<li><code>mjestoAlt.csv</code></li>
</ul>
<p>Ukoliko nemamo dostupne ove datoteke lako ih možemo samostalno napraviti uz pomoć običnog uređivača teksta (npr. <em>Notepad</em> ili <em>gedit</em>) i kopiranja gore navedenih redaka.</p>
<hr />
<p>Za stvaranje podatkovnih okvira iz CSV datoteka koristimo funkcije:
- <code>read.csv</code> - za “normalne” CSV datoteke sa zarezom kao razdvojnikom
- <code>read.csv2</code> - za alternativni CSV standard koji koristi točku-zarez</p>
<p>Osnovni parametar ovih funkcija je staza do CSV datoteke koju učitavamo. Funkcije imaju i bogati niz dodatnih parametara koje omogućuju prilagodbu raznim scenarijima, a ukoliko smo dobili neki od “egzotičnijih” oblika CSV datoteke, isplati se pogledati i funkciju <code>read.table</code> koja je vrlo fleksibilna glede broja različitih parametara i postavki kod učitavanja podataka (<code>read.csv</code> i <code>read.csv2</code> su zapravo izvedene iz funkcije <code>read.table</code> fiksiranjem određenih parametara na standardne CSV značajke).</p>
<hr />
<p>Neke od parametara i pripadajućih vrijednosti funkcija <code>read.csv</code> (ili <code>read.table</code>) koje je korisno znati su:</p>
<ul>
<li><code>header = FALSE</code> - za datoteke bez zaglavlja</li>
<li><code>sep = &quot;#&quot;</code> - za datoteke koje koriste “egzotični” razdvojnik, u ovom slučaju <code>#</code></li>
<li><code>na.strings = &quot;NULL&quot;</code> - naznaka koji standard podaci koriste za reprezentaciju nedostajućih vrijednosti a koji će u R-u postati <code>NA</code></li>
<li><code>nrows = 2000</code> - maksimalan broj redaka koji će se pročitati, u ovom slučaju 2000</li>
<li><code>stringsAsFactors = F</code> - sprječavanje automatskog stvaranja faktorskih stupaca (o kojima ćemo učiti u nastavku ove lekcije)</li>
<li><code>encoding = &quot;UTF-8&quot;</code> - za standarde kodiranja teksta koji nisu ASCII (osobito bitno ako radimo sa podacima sa hrvatskog govornog područja koji koriste dijakritičke znakove)</li>
</ul>
<p>Pokušajmo sada učitati podatke iz dostupnih CSV datoteka. Ovi podaci neće zahtijevati posebne parametre te će se moći učitati samo pružanjem staze do pripadnih datoteka (jedne koja koristi zarez i druge koja koristi točku-zarez kao razdvojnik).</p>
<hr />
<p><strong>Zadatak 4.2 - čitanje podataka iz CSV datoteke</strong></p>
<div class="sourceCode" id="cb134"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb134-1" data-line-number="1"><span class="co"># učitajte podatke iz datoteka `mjesto.csv` i `mjestoAlt.csv`</span></a>
<a class="sourceLine" id="cb134-2" data-line-number="2"><span class="co"># podatke spremite u okvire `mjesto2` i `mjesto3`</span></a>
<a class="sourceLine" id="cb134-3" data-line-number="3"></a>
<a class="sourceLine" id="cb134-4" data-line-number="4"><span class="co"># ispišite okvire `mjesto2` i `mjesto3`</span></a></code></pre></div>
<div class="fold s o">
<div class="sourceCode" id="cb135"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb135-1" data-line-number="1"><span class="co"># učitajte podatke iz datoteka `mjesto.csv` i `mjestoAlt.csv`</span></a>
<a class="sourceLine" id="cb135-2" data-line-number="2"><span class="co"># podatke spremite u okvire `mjesto2` i `mjesto3`</span></a>
<a class="sourceLine" id="cb135-3" data-line-number="3">mjesto2 &lt;-<span class="st"> </span><span class="kw">read.csv</span>(<span class="st">&quot;mjesto.csv&quot;</span>)</a>
<a class="sourceLine" id="cb135-4" data-line-number="4">mjesto3 &lt;-<span class="st"> </span><span class="kw">read.csv2</span>(<span class="st">&quot;mjestoAlt.csv&quot;</span>)</a>
<a class="sourceLine" id="cb135-5" data-line-number="5"></a>
<a class="sourceLine" id="cb135-6" data-line-number="6"><span class="co"># ispišite okvire `mjesto2` i `mjesto3`</span></a>
<a class="sourceLine" id="cb135-7" data-line-number="7">mjesto2</a>
<a class="sourceLine" id="cb135-8" data-line-number="8"><span class="kw">cat</span>(<span class="st">&quot;-----------</span><span class="ch">\n</span><span class="st">&quot;</span>)</a>
<a class="sourceLine" id="cb135-9" data-line-number="9">mjesto3</a></code></pre></div>
<pre><code>##     pbr nazivMjesta prosjPlacaKn brojStanovnika prirez
## 1 10000      Zagreb         6359         790017     18
## 2 51000      Rijeka         5418         128384     15
## 3 21000       Split         5170         167121     10
## 4 31000      Osijek         4892          84104     13
## 5 20000   Dubrovnik         5348          28434     10
## -----------
##     pbr nazivMjesta prosjPlacaKn brojStanovnika prirez
## 1 10000      Zagreb         6359         790017     18
## 2 51000      Rijeka         5418         128384     15
## 3 21000       Split         5170         167121     10
## 4 31000      Osijek         4892          84104     13
## 5 20000   Dubrovnik         5348          28434     10</code></pre>
</div>
<hr />
<p>Pogledajmo sada neke korisne funkcije za rad sa podatkovnim okvirima tj. tablicama. Dobar dio njih će nam već otprije biti poznat iz iskustva u radu sa listama i matricama:</p>
<ul>
<li><code>nrow</code> - broj redaka</li>
<li><code>ncol</code> ili <code>length</code> - broj stupaca (budući da se okvir ponaša i kao matrica i kao lista)</li>
<li><code>dim</code> - dimenzije tablice</li>
<li><code>names</code> - imena stupaca</li>
<li><code>head</code> - ispis nekoliko redaka s početka tablice</li>
<li><code>tail</code> - ispis nekoliko redaka s kraja tablice</li>
<li><code>str</code> - ispis strukture tablice</li>
<li><code>summary</code> - sažete statističke informacije o stupcima tablice</li>
</ul>
<p>Isprobajmo neke od ovih funkcija:</p>
<hr />
<p><strong>Zadatak 4.3 - funkcije za rad sa podatkovnim okvirima</strong></p>
<div class="sourceCode" id="cb137"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb137-1" data-line-number="1"><span class="co"># ispišite dimenzije tablice `mjesto`</span></a>
<a class="sourceLine" id="cb137-2" data-line-number="2"></a>
<a class="sourceLine" id="cb137-3" data-line-number="3"></a>
<a class="sourceLine" id="cb137-4" data-line-number="4"><span class="co"># ispišite strukturu tablice `mjesto`</span></a>
<a class="sourceLine" id="cb137-5" data-line-number="5"></a>
<a class="sourceLine" id="cb137-6" data-line-number="6"></a>
<a class="sourceLine" id="cb137-7" data-line-number="7"><span class="co"># ispišite prvih nekoliko redaka tablice `mjesto`</span></a>
<a class="sourceLine" id="cb137-8" data-line-number="8"></a>
<a class="sourceLine" id="cb137-9" data-line-number="9"></a>
<a class="sourceLine" id="cb137-10" data-line-number="10"><span class="co"># ispišite sažete statističke informacije o stupcima tablice `mjesto`</span></a></code></pre></div>
<div class="fold s o">
<div class="sourceCode" id="cb138"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb138-1" data-line-number="1"><span class="co"># ispišite dimenzije tablice `mjesto`</span></a>
<a class="sourceLine" id="cb138-2" data-line-number="2"><span class="kw">dim</span>(mjesto)</a>
<a class="sourceLine" id="cb138-3" data-line-number="3"></a>
<a class="sourceLine" id="cb138-4" data-line-number="4"><span class="kw">cat</span>(<span class="st">&quot;-----------</span><span class="ch">\n</span><span class="st">&quot;</span>)</a>
<a class="sourceLine" id="cb138-5" data-line-number="5"></a>
<a class="sourceLine" id="cb138-6" data-line-number="6"><span class="co"># ispišite strukturu tablice `mjesto`</span></a>
<a class="sourceLine" id="cb138-7" data-line-number="7"><span class="kw">str</span>(mjesto)</a>
<a class="sourceLine" id="cb138-8" data-line-number="8"></a>
<a class="sourceLine" id="cb138-9" data-line-number="9"><span class="kw">cat</span>(<span class="st">&quot;-----------</span><span class="ch">\n</span><span class="st">&quot;</span>)</a>
<a class="sourceLine" id="cb138-10" data-line-number="10"></a>
<a class="sourceLine" id="cb138-11" data-line-number="11"><span class="co"># ispišite prvih nekoliko redaka tablice `mjesto`</span></a>
<a class="sourceLine" id="cb138-12" data-line-number="12"><span class="kw">head</span>(mjesto)</a>
<a class="sourceLine" id="cb138-13" data-line-number="13"></a>
<a class="sourceLine" id="cb138-14" data-line-number="14"><span class="kw">cat</span>(<span class="st">&quot;-----------</span><span class="ch">\n</span><span class="st">&quot;</span>)</a>
<a class="sourceLine" id="cb138-15" data-line-number="15"></a>
<a class="sourceLine" id="cb138-16" data-line-number="16"><span class="co"># ispišite sažete statističke informacije o stupcima tablice `mjesto`</span></a>
<a class="sourceLine" id="cb138-17" data-line-number="17"><span class="kw">summary</span>(mjesto)</a></code></pre></div>
<pre><code>## [1] 5 5
## -----------
## &#39;data.frame&#39;:    5 obs. of  5 variables:
##  $ pbr           : num  10000 51000 21000 31000 2000
##  $ nazivMjesta   : Factor w/ 5 levels &quot;Dubrovnik&quot;,&quot;Osijek&quot;,..: 5 3 4 2 1
##  $ prosjPlacaKn  : num  6359 5418 5170 4892 5348
##  $ brojStanovnika: num  790017 128384 167121 84104 28434
##  $ prirez        : num  18 15 10 13 10
## -----------
##     pbr nazivMjesta prosjPlacaKn brojStanovnika prirez
## 1 10000      Zagreb         6359         790017     18
## 2 51000      Rijeka         5418         128384     15
## 3 21000       Split         5170         167121     10
## 4 31000      Osijek         4892          84104     13
## 5  2000   Dubrovnik         5348          28434     10
## -----------
##       pbr           nazivMjesta  prosjPlacaKn  brojStanovnika  
##  Min.   : 2000   Dubrovnik:1    Min.   :4892   Min.   : 28434  
##  1st Qu.:10000   Osijek   :1    1st Qu.:5170   1st Qu.: 84104  
##  Median :21000   Rijeka   :1    Median :5348   Median :128384  
##  Mean   :23000   Split    :1    Mean   :5437   Mean   :239612  
##  3rd Qu.:31000   Zagreb   :1    3rd Qu.:5418   3rd Qu.:167121  
##  Max.   :51000                  Max.   :6359   Max.   :790017  
##      prirez    
##  Min.   :10.0  
##  1st Qu.:10.0  
##  Median :13.0  
##  Mean   :13.2  
##  3rd Qu.:15.0  
##  Max.   :18.0</code></pre>
</div>
<hr />
</div>
<div id="odabir-redaka-i-stupaca-podatkovnih-okvira" class="section level2">
<h2><span class="header-section-number">4.2</span> Odabir redaka i stupaca podatkovnih okvira</h2>
<p>Već smo rekli da se podatkovni okviri ponašaju i kao matrice i kao liste, što je svojstvo kojim se posebno često služimo kod odabira redaka i stupaca podatkovnih okvira. Konkretno, za “rezanje” okvira najčešće koristimo:</p>
<ul>
<li>dvodimenzionalno referenciranje uz pomoć indeksnih vektora</li>
<li>odabir pojedinog stupca uz pomoć operatora <code>$</code></li>
</ul>
<p>Ovdje smo zapravo dosta fleksibilni - možemo npr. prvo “izrezati” određene retke matrice uz pomoć lokacijskog referenciranja i potom izdvojiti samo jedan stupac uz pomoć operatora <code>$</code>. U praksi je jedna od najčešćih kombinacija uvjetni odabir redaka uz imenski odabir stupaca (poznavatelji <em>SQL</em>-a prepoznati će ovo kao standardnu kombinaciju <em>WHERE</em> uvjeta i <em>SELECT</em> liste).</p>
<p>Pokušajmo primijeniti naše znanje o indeksnim vektorima, matricama i listama na rezanje podatkovnih okvira.</p>
<hr />
<p><strong>Zadatak 4.4 - rezanje podatkovnih okvira</strong></p>
<div class="sourceCode" id="cb140"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb140-1" data-line-number="1"><span class="co"># ispišite tablicu `mjesto` (za referencu)</span></a>
<a class="sourceLine" id="cb140-2" data-line-number="2"></a>
<a class="sourceLine" id="cb140-3" data-line-number="3"><span class="co"># ispišite prva tri retka, treći i peti stupac</span></a>
<a class="sourceLine" id="cb140-4" data-line-number="4"></a>
<a class="sourceLine" id="cb140-5" data-line-number="5"><span class="co"># ispišite stupac &quot;prirez&quot;</span></a>
<a class="sourceLine" id="cb140-6" data-line-number="6"></a>
<a class="sourceLine" id="cb140-7" data-line-number="7"><span class="co"># ispišite poštanske brojeve i nazive svih mjesta koja </span></a>
<a class="sourceLine" id="cb140-8" data-line-number="8"><span class="co"># imaju prirez veći od 12% i broj stanovnika veći od 100,000</span></a></code></pre></div>
<div class="fold s o">

<div class="sourceCode" id="cb141"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb141-1" data-line-number="1"><span class="co">#ispišite tablicu `mjesto` (za referencu)</span></a>
<a class="sourceLine" id="cb141-2" data-line-number="2">mjesto</a>
<a class="sourceLine" id="cb141-3" data-line-number="3"></a>
<a class="sourceLine" id="cb141-4" data-line-number="4"><span class="kw">cat</span>(<span class="st">&quot;-----------</span><span class="ch">\n</span><span class="st">&quot;</span>)</a>
<a class="sourceLine" id="cb141-5" data-line-number="5"></a>
<a class="sourceLine" id="cb141-6" data-line-number="6"><span class="co">#ispišite prva tri retka, treći i peti stupac</span></a>
<a class="sourceLine" id="cb141-7" data-line-number="7">mjesto[<span class="dv">1</span><span class="op">:</span><span class="dv">3</span>, <span class="kw">c</span>(<span class="dv">3</span>,<span class="dv">5</span>)]</a>
<a class="sourceLine" id="cb141-8" data-line-number="8"></a>
<a class="sourceLine" id="cb141-9" data-line-number="9"><span class="kw">cat</span>(<span class="st">&quot;-----------</span><span class="ch">\n</span><span class="st">&quot;</span>)</a>
<a class="sourceLine" id="cb141-10" data-line-number="10"></a>
<a class="sourceLine" id="cb141-11" data-line-number="11"><span class="co">#ispišite stupac &quot;prirez&quot;</span></a>
<a class="sourceLine" id="cb141-12" data-line-number="12">mjesto<span class="op">$</span>prirez</a>
<a class="sourceLine" id="cb141-13" data-line-number="13"></a>
<a class="sourceLine" id="cb141-14" data-line-number="14"><span class="kw">cat</span>(<span class="st">&quot;-----------</span><span class="ch">\n</span><span class="st">&quot;</span>)</a>
<a class="sourceLine" id="cb141-15" data-line-number="15"></a>
<a class="sourceLine" id="cb141-16" data-line-number="16"><span class="co">#ispišite poštanske brojeve i nazive svih mjesta koji imaju </span></a>
<a class="sourceLine" id="cb141-17" data-line-number="17"><span class="co"># prirez veći od 12% i broj stanovnika veći od 100,000</span></a>
<a class="sourceLine" id="cb141-18" data-line-number="18">mjesto[mjesto<span class="op">$</span>prirez <span class="op">&gt;</span><span class="st"> </span><span class="dv">12</span> <span class="op">&amp;</span><span class="st"> </span>mjesto<span class="op">$</span>brojStanovnika <span class="op">&gt;</span><span class="st"> </span><span class="dv">100000</span>, <span class="kw">c</span>(<span class="st">&quot;pbr&quot;</span>, <span class="st">&quot;nazivMjesta&quot;</span>)]</a></code></pre></div>
<pre><code>##     pbr nazivMjesta prosjPlacaKn brojStanovnika prirez
## 1 10000      Zagreb         6359         790017     18
## 2 51000      Rijeka         5418         128384     15
## 3 21000       Split         5170         167121     10
## 4 31000      Osijek         4892          84104     13
## 5  2000   Dubrovnik         5348          28434     10
## -----------
##   prosjPlacaKn prirez
## 1         6359     18
## 2         5418     15
## 3         5170     10
## -----------
## [1] 18 15 10 13 10
## -----------
##     pbr nazivMjesta
## 1 10000      Zagreb
## 2 51000      Rijeka</code></pre>
<hr />
<p>Uočite sličnost između zadnjeg izraza i SQL upita: `</p>
<div class="sourceCode" id="cb143"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb143-1" data-line-number="1">SELECT pbr, nazivMjesta</a>
<a class="sourceLine" id="cb143-2" data-line-number="2">FROM mjesto</a>
<a class="sourceLine" id="cb143-3" data-line-number="3">WHERE mjesto.prirez <span class="op">&gt;</span><span class="st"> </span><span class="dv">12</span> AND mjesto.brojStanovnika <span class="op">&gt;</span><span class="st"> </span><span class="dv">100000</span></a></code></pre></div>
<p>Odabir stupaca i redaka nije težak ako dobro baratamo znanjem o indeksnim vektorima, no kao što se vidi u zadnjem primjeru sintaksa često nije previše čitljiva (u usporedbi sa npr. SQL-ovom sintaksom koja obavlja isti posao). Zbog toga postoje različita proširenja R-a koji ovaj posao uvelike olakšavaju, a koja ćemo detaljno obraditi u jednoj od budućih lekcija koja će se baviti upravljanjem podatkovnim skupovima.</p>
<hr />
</div>
<div id="dodavanje-i-brisanje-redaka-i-stupaca" class="section level2">
<h2><span class="header-section-number">4.3</span> Dodavanje i brisanje redaka i stupaca</h2>
<p>Za dodavanje i brisanje redaka i stupaca opet se dovoljno sjetiti da je podatkovni okvir svojevrsni hibrid matrice i liste tj. ako znamo dodavati retke i stupce u matricu ili nove elemente u listu onda ekvivalentnim načinom možemo podatke dodavati i u podatkovni okvir. U radu sa podatkovnim okvirima nešto češće dodajemo nove stupce (obično kao transformacije postojećih stupaca) nego retke tako da možemo primjere započeti sa dodavanjem stupaca.</p>
<p>Kao što je rečeno, stupce u podatkovni okvir dodajemo na isti način kao što dodajemo elemente liste - uz pažnju da dodani stupac ima isti broj elemenata kao i ostali stupci. Novi stupci često su izvedenice postojećih stupaca koje predstavljaju binarne indikatore, rezultate aritmetičkih izraza podataka u drugim stupcima i sl.</p>
<hr />
<p><strong>Zadatak 4.5 - dodavanje novih stupaca u tablicu</strong></p>
<div class="sourceCode" id="cb144"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb144-1" data-line-number="1"><span class="co"># tablici `mjesto` dodajte logički stupac `visokPrirez` </span></a>
<a class="sourceLine" id="cb144-2" data-line-number="2"><span class="co"># koji će pokazivati da li je prirez veći od 12%</span></a>
<a class="sourceLine" id="cb144-3" data-line-number="3"></a>
<a class="sourceLine" id="cb144-4" data-line-number="4"></a>
<a class="sourceLine" id="cb144-5" data-line-number="5"><span class="co"># pretpostavimo sljedeći (fiktivni!) način izračuna prireza</span></a>
<a class="sourceLine" id="cb144-6" data-line-number="6"><span class="co"># - mjesta imaju oko 60% radne populacije</span></a>
<a class="sourceLine" id="cb144-7" data-line-number="7"><span class="co"># - svaki radnik plaća porez koji je otprilike jednak 10% neto plaće </span></a>
<a class="sourceLine" id="cb144-8" data-line-number="8"><span class="co"># - prirez kojeg radnik plaća računamo kao (stopa prireza)*(iznos poreza)</span></a>
<a class="sourceLine" id="cb144-9" data-line-number="9"><span class="co">#</span></a>
<a class="sourceLine" id="cb144-10" data-line-number="10"><span class="co"># dodajte stupac `mjesecniPrihod` koji će uz pomoć prosječne plaće, prireza </span></a>
<a class="sourceLine" id="cb144-11" data-line-number="11"><span class="co"># i broja stanovnika procijeniti koliki prihod pojedino mjesto dobija od prireza </span></a>
<a class="sourceLine" id="cb144-12" data-line-number="12"><span class="co"># (izraženo u milijunima Kn)</span></a>
<a class="sourceLine" id="cb144-13" data-line-number="13"><span class="co"># iznos zaokružite uz pomoć funkcije round ( primjer: round(100.12345, 2) ==&gt;  100.12  )</span></a>
<a class="sourceLine" id="cb144-14" data-line-number="14"></a>
<a class="sourceLine" id="cb144-15" data-line-number="15"></a>
<a class="sourceLine" id="cb144-16" data-line-number="16"><span class="co"># ispišite tablicu mjesto</span></a></code></pre></div>
<div class="fold s o">
<div class="sourceCode" id="cb145"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb145-1" data-line-number="1"><span class="co"># tablici `mjesto` dodajte logički stupac `visokPrirez` </span></a>
<a class="sourceLine" id="cb145-2" data-line-number="2"><span class="co"># koji će pokazivati da li je prirez veći od 12%</span></a>
<a class="sourceLine" id="cb145-3" data-line-number="3">mjesto<span class="op">$</span>visokPrirez &lt;-<span class="st"> </span>mjesto<span class="op">$</span>prirez <span class="op">&gt;</span><span class="st"> </span><span class="dv">12</span></a>
<a class="sourceLine" id="cb145-4" data-line-number="4"></a>
<a class="sourceLine" id="cb145-5" data-line-number="5"><span class="co"># pretpostavimo sljedeći (fiktivni!) način izračuna prireza</span></a>
<a class="sourceLine" id="cb145-6" data-line-number="6"><span class="co"># - mjesta imaju oko 60% radne populacije</span></a>
<a class="sourceLine" id="cb145-7" data-line-number="7"><span class="co"># - svaki radnik plaća porez koji je otprilike jednak 10% neto plaće </span></a>
<a class="sourceLine" id="cb145-8" data-line-number="8"><span class="co"># - prirez kojeg radnik plaća računati ćemo (stopa prireza)*(iznos poreza)</span></a>
<a class="sourceLine" id="cb145-9" data-line-number="9"><span class="co">#</span></a>
<a class="sourceLine" id="cb145-10" data-line-number="10"><span class="co"># dodajte stupac `mjesecniPrihod` koji će uz pomoć prosječne plaće, prireza </span></a>
<a class="sourceLine" id="cb145-11" data-line-number="11"><span class="co"># i broja stanovnika procijeniti koliki prihod pojedino mjesto dobija od prireza </span></a>
<a class="sourceLine" id="cb145-12" data-line-number="12"><span class="co"># (izraženo u milijunima Kn)</span></a>
<a class="sourceLine" id="cb145-13" data-line-number="13"><span class="co"># iznos zaokružite uz pomoć funkcije round ( primjer: round(100.12345, 2) ==&gt;  100.12  )</span></a>
<a class="sourceLine" id="cb145-14" data-line-number="14">mjesto<span class="op">$</span>mjesecniPrihod &lt;-<span class="st"> </span><span class="kw">round</span>(<span class="fl">0.6</span> <span class="op">*</span><span class="st"> </span>mjesto<span class="op">$</span>brojStanovnika <span class="op">*</span><span class="st"> </span><span class="fl">0.1</span> <span class="op">*</span><span class="st"> </span></a>
<a class="sourceLine" id="cb145-15" data-line-number="15"><span class="st">                          </span>mjesto<span class="op">$</span>prosjPlacaKn  <span class="op">*</span><span class="st"> </span><span class="fl">0.01</span> <span class="op">*</span><span class="st"> </span>mjesto<span class="op">$</span>prirez <span class="op">/</span><span class="st"> </span><span class="fl">1e6</span> , <span class="dv">2</span>)</a>
<a class="sourceLine" id="cb145-16" data-line-number="16"></a>
<a class="sourceLine" id="cb145-17" data-line-number="17"></a>
<a class="sourceLine" id="cb145-18" data-line-number="18"><span class="co"># ispišite tablicu mjesto</span></a>
<a class="sourceLine" id="cb145-19" data-line-number="19">mjesto</a></code></pre></div>
<pre><code>##     pbr nazivMjesta prosjPlacaKn brojStanovnika prirez visokPrirez
## 1 10000      Zagreb         6359         790017     18        TRUE
## 2 51000      Rijeka         5418         128384     15        TRUE
## 3 21000       Split         5170         167121     10       FALSE
## 4 31000      Osijek         4892          84104     13        TRUE
## 5  2000   Dubrovnik         5348          28434     10       FALSE
##   mjesecniPrihod
## 1          54.26
## 2           6.26
## 3           5.18
## 4           3.21
## 5           0.91</code></pre>
</div>
<hr />
<p>Retke i stupce smo također mogli dodati slično dodavanju redaka i stupaca u matricu - uz pomoć funkcija <code>rbind</code> i <code>cbind</code>. Kod funkcije <code>rbind</code> obično dodajemo novi podatkovni okvir sa retcima koji imaju odgovarajući redoslijed i vrstu elemenata, dok kod funkcije <code>cbind</code> možemo dodati i obični vektor no moramo paziti da broj elemenata odgovara broju redaka originalnog okvira.</p>
<p>Isprobajmo ove funkcije na malim “umjetnim” podatkovnim okvirima kako bi lakše predočili njihovu funkcionalnost.</p>
<hr />
<p><strong>Zadatak 4.6 - funkcije <code>rbind</code>/<code>cbind</code> i podatkovni okviri</strong></p>
<div class="sourceCode" id="cb147"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb147-1" data-line-number="1">df1 &lt;-<span class="st"> </span><span class="kw">data.frame</span>(<span class="dt">a =</span> <span class="kw">c</span>(<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>), <span class="dt">b =</span> <span class="kw">c</span>(<span class="st">&quot;A&quot;</span>, <span class="st">&quot;B&quot;</span>, <span class="st">&quot;C&quot;</span>), <span class="dt">c =</span> <span class="kw">c</span>(T, F, T))</a>
<a class="sourceLine" id="cb147-2" data-line-number="2">df2 &lt;-<span class="st"> </span><span class="kw">data.frame</span>(<span class="dt">a =</span> <span class="dv">1</span>, <span class="dt">b =</span> <span class="st">&quot;A&quot;</span>, <span class="dt">c =</span> <span class="dv">3</span>)</a>
<a class="sourceLine" id="cb147-3" data-line-number="3"></a>
<a class="sourceLine" id="cb147-4" data-line-number="4"><span class="co">#spojite df1 i df2 u podatkovni okvir df12 uz pomoć funkcije `rbind`</span></a>
<a class="sourceLine" id="cb147-5" data-line-number="5"></a>
<a class="sourceLine" id="cb147-6" data-line-number="6"></a>
<a class="sourceLine" id="cb147-7" data-line-number="7"><span class="co"># okviru df12 dodajte stupac `imena` sa imenima Ivo, Ana, Pero i Stipe</span></a>
<a class="sourceLine" id="cb147-8" data-line-number="8"><span class="co"># koristite funkciju `cbind`</span></a>
<a class="sourceLine" id="cb147-9" data-line-number="9"></a>
<a class="sourceLine" id="cb147-10" data-line-number="10"><span class="co"># ispišite okvir df12</span></a></code></pre></div>
<div class="fold s o">
<div class="sourceCode" id="cb148"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb148-1" data-line-number="1">df1 &lt;-<span class="st"> </span><span class="kw">data.frame</span>(<span class="dt">a =</span> <span class="kw">c</span>(<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>), <span class="dt">b =</span> <span class="kw">c</span>(<span class="st">&quot;A&quot;</span>, <span class="st">&quot;B&quot;</span>, <span class="st">&quot;C&quot;</span>), <span class="dt">c =</span> <span class="kw">c</span>(T, F, T))</a>
<a class="sourceLine" id="cb148-2" data-line-number="2">df2 &lt;-<span class="st"> </span><span class="kw">data.frame</span>(<span class="dt">a =</span> <span class="dv">1</span>, <span class="dt">b =</span> <span class="st">&quot;A&quot;</span>, <span class="dt">c =</span> <span class="dv">3</span>)</a>
<a class="sourceLine" id="cb148-3" data-line-number="3"></a>
<a class="sourceLine" id="cb148-4" data-line-number="4"><span class="co">#spojite df1 i df2 u podatkovni okvir df12 uz pomoć funkcije `rbind`</span></a>
<a class="sourceLine" id="cb148-5" data-line-number="5">df12 &lt;-<span class="st"> </span><span class="kw">rbind</span>(df1, df2)</a>
<a class="sourceLine" id="cb148-6" data-line-number="6"></a>
<a class="sourceLine" id="cb148-7" data-line-number="7"><span class="co"># okviru df12 dodajte stupac `imena` sa imenima Ivo, Ana, Pero i Stipe</span></a>
<a class="sourceLine" id="cb148-8" data-line-number="8"><span class="co"># koristite funkciju `cbind`</span></a>
<a class="sourceLine" id="cb148-9" data-line-number="9">df12 &lt;-<span class="st"> </span><span class="kw">cbind</span>(df12, <span class="dt">imena =</span> <span class="kw">c</span>(<span class="st">&quot;Ivo&quot;</span>, <span class="st">&quot;Ana&quot;</span>, <span class="st">&quot;Pero&quot;</span>, <span class="st">&quot;Stipe&quot;</span>))</a>
<a class="sourceLine" id="cb148-10" data-line-number="10"></a>
<a class="sourceLine" id="cb148-11" data-line-number="11"><span class="co"># ispišite okvir df12</span></a>
<a class="sourceLine" id="cb148-12" data-line-number="12">df12</a></code></pre></div>
<pre><code>##   a b c imena
## 1 1 A 1   Ivo
## 2 2 B 0   Ana
## 3 3 C 1  Pero
## 4 1 A 3 Stipe</code></pre>
</div>
<hr />
<p>Za <em>brisanje redaka i stupaca</em> također se možemo koristiti istim metodama za upravljanje matricama i listama. Konkretno:</p>
<ul>
<li>brisanje redaka i stupaca možemo obaviti dvodimenzionalnim referenciranjem redaka i stupaca koje želimo “zadržati”</li>
<li>brisanje stupaca možemo obaviti pridjeljivanjem vrijednosti <code>NULL</code> odabranom stupcu</li>
</ul>
<p>Isprobajmo ovo na primjeru.</p>
<hr />
<p><strong>Zadatak 4.7 - brisanje redaka i stupaca</strong></p>
<div class="sourceCode" id="cb150"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb150-1" data-line-number="1"><span class="co"># obrišite prvi redak i drugi stupac iz df12 metodom 2d referenciranja</span></a>
<a class="sourceLine" id="cb150-2" data-line-number="2"></a>
<a class="sourceLine" id="cb150-3" data-line-number="3"></a>
<a class="sourceLine" id="cb150-4" data-line-number="4"><span class="co"># obrišite stupac `imena` uz pomoć pridjeljivanja `NULL` vrijednosti</span></a>
<a class="sourceLine" id="cb150-5" data-line-number="5"></a>
<a class="sourceLine" id="cb150-6" data-line-number="6"></a>
<a class="sourceLine" id="cb150-7" data-line-number="7"><span class="co"># ispišite df12</span></a></code></pre></div>
<div class="fold s o">
<div class="sourceCode" id="cb151"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb151-1" data-line-number="1"><span class="co"># obrišite prvi redak i drugi stupac iz df12 metodom 2d referenciranja</span></a>
<a class="sourceLine" id="cb151-2" data-line-number="2">df12 &lt;-<span class="st"> </span>df12[<span class="op">-</span><span class="dv">1</span>, <span class="dv">-2</span>]    </a>
<a class="sourceLine" id="cb151-3" data-line-number="3"></a>
<a class="sourceLine" id="cb151-4" data-line-number="4"><span class="co"># obrišite stupac `imena` uz pomoć pridjeljivanja `NULL` vrijednosti</span></a>
<a class="sourceLine" id="cb151-5" data-line-number="5">df12<span class="op">$</span>imena &lt;-<span class="st"> </span><span class="ot">NULL</span></a>
<a class="sourceLine" id="cb151-6" data-line-number="6"></a>
<a class="sourceLine" id="cb151-7" data-line-number="7"><span class="co"># ispišite df12</span></a>
<a class="sourceLine" id="cb151-8" data-line-number="8">df12</a></code></pre></div>
<pre><code>##   a c
## 2 2 0
## 3 3 1
## 4 1 3</code></pre>
</div>
<hr />
<p>Podatkovnim okvirima ćemo se nastaviti baviti u poglavlju o upravljanju podatkovnim skupovima, gdje ćemo naučiti kako raditi sa okvirima sa daleko više podataka od primjera koje smo koristili u ovoj lekciji, te kako raditi sa dodatnim paketima koji značajno olakšavaju česte radnje nad podacima u podatkovnim okvirima. U nastavku ćemo se pozabaviti još jednim novim (i ponešto kontroverznim) tipom podatkovne strukture.</p>
<hr />
</div>
<div id="faktori" class="section level2">
<h2><span class="header-section-number">4.4</span> Faktori</h2>
<p><strong>Faktor</strong> u R-u je zapravo tip podataka koji predstavlja ono onoga što se u statistici naziva <strong>nominalnom</strong> ili <strong>kategorijskom</strong> varijablom. Naime, atribut neke obzervacije često poprima neku vrijednost iz skupa otprije poznatih kategorija (npr. varijabla spola, dobne kategorije, obrazovanja, mjesta rođenja, stranačke preferencije i sl.). Kategorije se često identificiraju jedinstvenim nizom znakova, a u procesu analize uz pomoć njih često provodimo razna agregiranja i grupacije (npr. u nekoj utrci možemo gledati prosječno vrijeme ovisno o spolu ili dobnoj kategoriji) ili pak dijelimo skup podataka ovisno o kategorijskoj pripadnosti.</p>
<p>Faktori u R-u su često i predmet rasprava budući da se radi o konstruktu koji može olakšati rad nad podacima, ali i uzrokovati brojne probleme, pogotovo ako nismo svjesni da u nekom trenutku radimo sa faktorom (ovaj scenarij se zapravo vrlo lako izbjegava, što ćemo objasniti na kraju ovog poglavlja).</p>
<hr />
<p>Za početak ćemo predočiti što su zapravo faktori uz pomoć jednostavnog primjera. Zamislimo da sljedeći znakovni vektor opisuje razinu krvnog tlaka kod deset pacijenata:</p>
<div class="sourceCode" id="cb153"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb153-1" data-line-number="1">tlak &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;nizak&quot;</span>, <span class="st">&quot;visok&quot;</span>, <span class="st">&quot;visok&quot;</span>, <span class="st">&quot;normalan&quot;</span>, <span class="st">&quot;normalan&quot;</span>, </a>
<a class="sourceLine" id="cb153-2" data-line-number="2">          <span class="st">&quot;nizak&quot;</span>, <span class="st">&quot;visok&quot;</span>, <span class="st">&quot;nizak&quot;</span>, <span class="st">&quot;normalan&quot;</span>, <span class="st">&quot;normalan&quot;</span>)</a></code></pre></div>
<p>Ovo je očito “kategorijska” varijabla budući da može poprimiti jednu od tri diskretne vrijednosti - <code>&quot;nizak&quot;</code>, <code>&quot;normalan&quot;</code> i <code>&quot;visok&quot;</code>. Prema tome, ovaj vektor je tipičan kandidat za “faktoriziranje”, tj. za pretvorbu u objekt klase <code>factor</code>. Faktorizaciju znakovnog vektora provodimo uz pomoć funkcije <code>factor</code> kojoj prosljeđujemo (u pravilu) znakovni vektor kao parametar.</p>
<hr />
<p><strong>Zadatak 4.8 - faktoriziranje znakovnog vektora</strong></p>
<div class="sourceCode" id="cb154"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb154-1" data-line-number="1">tlak &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;nizak&quot;</span>, <span class="st">&quot;visok&quot;</span>, <span class="st">&quot;visok&quot;</span>, <span class="st">&quot;normalan&quot;</span>, <span class="st">&quot;normalan&quot;</span>, </a>
<a class="sourceLine" id="cb154-2" data-line-number="2">          <span class="st">&quot;nizak&quot;</span>, <span class="st">&quot;visok&quot;</span>, <span class="st">&quot;nizak&quot;</span>, <span class="st">&quot;normalan&quot;</span>, <span class="st">&quot;normalan&quot;</span>)</a>
<a class="sourceLine" id="cb154-3" data-line-number="3"></a>
<a class="sourceLine" id="cb154-4" data-line-number="4"><span class="co"># ispišite varijablu `tlak`</span></a>
<a class="sourceLine" id="cb154-5" data-line-number="5"></a>
<a class="sourceLine" id="cb154-6" data-line-number="6"><span class="co"># ispišite klasu varijable `tlak`</span></a>
<a class="sourceLine" id="cb154-7" data-line-number="7"></a>
<a class="sourceLine" id="cb154-8" data-line-number="8"><span class="co"># stvorite varijablu `tlak.f` koja će biti faktorizirana</span></a>
<a class="sourceLine" id="cb154-9" data-line-number="9"><span class="co"># inačica varijable `tlak`</span></a>
<a class="sourceLine" id="cb154-10" data-line-number="10"></a>
<a class="sourceLine" id="cb154-11" data-line-number="11"><span class="co"># ispišite varijablu `tlak.f`</span></a>
<a class="sourceLine" id="cb154-12" data-line-number="12"></a>
<a class="sourceLine" id="cb154-13" data-line-number="13"><span class="co"># ispišite klasu varijable tlak.f</span></a></code></pre></div>
<div class="fold s o">
<div class="sourceCode" id="cb155"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb155-1" data-line-number="1">tlak &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;nizak&quot;</span>, <span class="st">&quot;visok&quot;</span>, <span class="st">&quot;visok&quot;</span>, <span class="st">&quot;normalan&quot;</span>, <span class="st">&quot;normalan&quot;</span>, </a>
<a class="sourceLine" id="cb155-2" data-line-number="2">          <span class="st">&quot;nizak&quot;</span>, <span class="st">&quot;visok&quot;</span>, <span class="st">&quot;nizak&quot;</span>, <span class="st">&quot;normalan&quot;</span>, <span class="st">&quot;normalan&quot;</span>)</a>
<a class="sourceLine" id="cb155-3" data-line-number="3"></a>
<a class="sourceLine" id="cb155-4" data-line-number="4"><span class="co"># ispišite varijablu `tlak`</span></a>
<a class="sourceLine" id="cb155-5" data-line-number="5">tlak</a>
<a class="sourceLine" id="cb155-6" data-line-number="6"></a>
<a class="sourceLine" id="cb155-7" data-line-number="7"><span class="co"># ispišite klasu varijable `tlak`</span></a>
<a class="sourceLine" id="cb155-8" data-line-number="8"><span class="kw">class</span>(tlak)</a>
<a class="sourceLine" id="cb155-9" data-line-number="9"></a>
<a class="sourceLine" id="cb155-10" data-line-number="10"><span class="co"># stvorite varijablu `tlak.f` koja će biti faktorizirana</span></a>
<a class="sourceLine" id="cb155-11" data-line-number="11"><span class="co"># inačica varijable `tlak`</span></a>
<a class="sourceLine" id="cb155-12" data-line-number="12">tlak.f &lt;-<span class="st"> </span><span class="kw">factor</span>(tlak)</a>
<a class="sourceLine" id="cb155-13" data-line-number="13"></a>
<a class="sourceLine" id="cb155-14" data-line-number="14"><span class="kw">cat</span>(<span class="st">&quot;-----------</span><span class="ch">\n</span><span class="st">&quot;</span>)</a>
<a class="sourceLine" id="cb155-15" data-line-number="15"></a>
<a class="sourceLine" id="cb155-16" data-line-number="16"><span class="co"># ispišite varijablu `tlak.f`</span></a>
<a class="sourceLine" id="cb155-17" data-line-number="17">tlak.f</a>
<a class="sourceLine" id="cb155-18" data-line-number="18"></a>
<a class="sourceLine" id="cb155-19" data-line-number="19"><span class="co"># ispišite klasu varijable tlak.f</span></a>
<a class="sourceLine" id="cb155-20" data-line-number="20"><span class="kw">class</span>(tlak.f)</a></code></pre></div>
<pre><code>##  [1] &quot;nizak&quot;    &quot;visok&quot;    &quot;visok&quot;    &quot;normalan&quot; &quot;normalan&quot; &quot;nizak&quot;   
##  [7] &quot;visok&quot;    &quot;nizak&quot;    &quot;normalan&quot; &quot;normalan&quot;
## [1] &quot;character&quot;
## -----------
##  [1] nizak    visok    visok    normalan normalan nizak    visok   
##  [8] nizak    normalan normalan
## Levels: nizak normalan visok
## [1] &quot;factor&quot;</code></pre>
</div>
<hr />
<p>Vidimo da je ispis faktora dobio dodatni atribut <code>Levels</code>. To znači da se sada ovdje radi o “pravoj” kategorijskoj varijabli sa točno definiranim kategorijama koje smije poprimiti. Ako pokušamo dodati novu vrijednost u faktor koja nije zastupljena u trenutnim kategorijama (npr. “prenizak”) dobiti ćemo upozorenje, a umjesto kategorije koju smo naveli nova stavka imati će vrijednost <code>NA</code>.</p>
<p>Ovo ponekad nije scenarij kojeg priželjkujemo. Ukoliko unaprijed znamo da znakovni vektor kojeg kategoriziramo ne sadrži sve moguće kategorije koje se općenito mogu pojaviti, imamo opciju dodavanja parametra <code>levels</code> u kojem ćemo uz pomoć znakovnog vektora eksplicitno navesti niz “mogućih” kategorija.</p>
<hr />
<p><strong>Zadatak 4.9 - nezastupljene kategorije i parametar <code>levels</code></strong></p>
<div class="sourceCode" id="cb157"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb157-1" data-line-number="1"><span class="co"># dodajte 11. element u vektor `tlak.f` sa sadržajem &quot;prenizak&quot;</span></a>
<a class="sourceLine" id="cb157-2" data-line-number="2"></a>
<a class="sourceLine" id="cb157-3" data-line-number="3"><span class="co"># ispišite `tlak.f`</span></a>
<a class="sourceLine" id="cb157-4" data-line-number="4"></a>
<a class="sourceLine" id="cb157-5" data-line-number="5"><span class="co"># napravite varijablu `tlak.f2` uz pomoć varijable `tlak`</span></a>
<a class="sourceLine" id="cb157-6" data-line-number="6"><span class="co"># kategorijske razine navedite eksplicitno tako da sadrže</span></a>
<a class="sourceLine" id="cb157-7" data-line-number="7"><span class="co"># i kategorije &quot;prenizak&quot; i &quot;previsok&quot;</span></a>
<a class="sourceLine" id="cb157-8" data-line-number="8"></a>
<a class="sourceLine" id="cb157-9" data-line-number="9"><span class="co"># dodajte 11. element u vektor `tlak.f2` sa sadržajem &quot;prenizak&quot;</span></a>
<a class="sourceLine" id="cb157-10" data-line-number="10"></a>
<a class="sourceLine" id="cb157-11" data-line-number="11"><span class="co"># ispišite `tlak.f2`</span></a></code></pre></div>
<div class="fold s o">
<div class="sourceCode" id="cb158"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb158-1" data-line-number="1"><span class="co"># dodajte 11. element u vektor `tlak.f` sa sadržajem &quot;prenizak&quot;</span></a>
<a class="sourceLine" id="cb158-2" data-line-number="2">tlak.f[<span class="dv">11</span>] &lt;-<span class="st"> &quot;prenizak&quot;</span></a></code></pre></div>
<pre><code>## Warning in `[&lt;-.factor`(`*tmp*`, 11, value = &quot;prenizak&quot;): invalid factor
## level, NA generated</code></pre>
<div class="sourceCode" id="cb160"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb160-1" data-line-number="1"><span class="co"># ispišite `tlak.f`</span></a>
<a class="sourceLine" id="cb160-2" data-line-number="2">tlak.f</a>
<a class="sourceLine" id="cb160-3" data-line-number="3"></a>
<a class="sourceLine" id="cb160-4" data-line-number="4"><span class="kw">cat</span>(<span class="st">&quot;-----------</span><span class="ch">\n</span><span class="st">&quot;</span>)</a>
<a class="sourceLine" id="cb160-5" data-line-number="5"></a>
<a class="sourceLine" id="cb160-6" data-line-number="6"><span class="co"># napravite varijablu `tlak.f2` uz pomoć varijable `tlak`</span></a>
<a class="sourceLine" id="cb160-7" data-line-number="7"><span class="co"># kategorijske razine navedite eksplicitno tako da sadrže</span></a>
<a class="sourceLine" id="cb160-8" data-line-number="8"><span class="co"># i kategorije &quot;prenizak&quot; i &quot;previsok&quot;</span></a>
<a class="sourceLine" id="cb160-9" data-line-number="9">tlak.f2 &lt;-<span class="st"> </span><span class="kw">factor</span>(tlak, <span class="dt">levels =</span> <span class="kw">c</span>(<span class="st">&quot;prenizak&quot;</span>, <span class="st">&quot;nizak&quot;</span>, <span class="st">&quot;normalan&quot;</span>,</a>
<a class="sourceLine" id="cb160-10" data-line-number="10">                    <span class="st">&quot;visok&quot;</span>, <span class="st">&quot;previsok&quot;</span>))</a>
<a class="sourceLine" id="cb160-11" data-line-number="11"></a>
<a class="sourceLine" id="cb160-12" data-line-number="12"><span class="co"># dodajte 11. element u vektor `tlak.f2` sa sadržajem &quot;prenizak&quot;</span></a>
<a class="sourceLine" id="cb160-13" data-line-number="13">tlak.f2[<span class="dv">11</span>] &lt;-<span class="st"> &quot;prenizak&quot;</span></a>
<a class="sourceLine" id="cb160-14" data-line-number="14"></a>
<a class="sourceLine" id="cb160-15" data-line-number="15"><span class="co"># ispišite `tlak.f2`</span></a>
<a class="sourceLine" id="cb160-16" data-line-number="16">tlak.f2</a></code></pre></div>
<pre><code>##  [1] nizak    visok    visok    normalan normalan nizak    visok   
##  [8] nizak    normalan normalan &lt;NA&gt;    
## Levels: nizak normalan visok
## -----------
##  [1] nizak    visok    visok    normalan normalan nizak    visok   
##  [8] nizak    normalan normalan prenizak
## Levels: prenizak nizak normalan visok previsok</code></pre>
</div>
<hr />
<p>Koja je prednost faktora? Zašto varijable ne bismo ostavili u originalnom, “znakovnom” obliku? Razlog potrebe za faktoriziranjem kategorijskih stupaca tj. varijabli je poglavito u tome što određene statističke i vizualizacijske funkcije “znaju” na ispravan način interpretirati i koristiti faktore te ih tretiraju drugačije od običnih “znakovnih” stupaca. Zbog toga je vrlo dobra dugoročna strategija već u početku učenja R-a naviknuti se da kod rada sa podatkovnim okvirima faktoriziramo stupce koji su zaista kategorijske varijable (ali također i pripazimo da nemamo faktorizirane stupce koji nisu kategorijske varijable, što se može događati ako nismo pažljivi).</p>
<p>Jedno od pitanja koje se često pitamo vezano uz kategorijske varijable jest - kolika je zastupljenost pojedinih kategorija? Odgovor na ovo pitanje daje nam funkcija <code>table</code> kojoj prosljeđujemo odabrani faktor.</p>
<hr />
<p><strong>Zadatak 4.10 - funkcija <code>table</code></strong></p>
<div class="sourceCode" id="cb162"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb162-1" data-line-number="1"><span class="co"># ispišite zastupljenost pojedinih kategorija u faktoru `tlak.f2`</span></a></code></pre></div>
<div class="fold s o">
<div class="sourceCode" id="cb163"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb163-1" data-line-number="1"><span class="co"># ispišite zastupljenost pojedinih kategorija u faktoru `tlak.f2`</span></a>
<a class="sourceLine" id="cb163-2" data-line-number="2"><span class="kw">table</span>(tlak.f2)</a></code></pre></div>
<pre><code>## tlak.f2
## prenizak    nizak normalan    visok previsok 
##        1        3        4        3        0</code></pre>
</div>
<p>Funkcija <code>table</code> ne zahtijeva nužno faktor i uredno će raditi čak i sa znakovnim vektorom. No u tom slučaju ne bismo dobili informaciju o kategorijama koje nisu uopće zastupljene.</p>
<hr />
<p>Kategorijska varijabla iz naših primjera zapravo ima prirodu tzv. ordinalne kategorijske varijable, što znači da kategorije imaju prirodni poredak (nizak tlak je “manji” od normalnog koji je “manji” od visokog). Ukoliko želimo, ovu činjenicu možemo “ugraditi” u faktor kod njegove inicijalizacije, jednostavnim dodavanjem parametra <code>ordered</code> postavljenog na <code>TRUE</code>. Prednost ordinalnog faktora jest ta što nam omogućuje usporedbu vrijednosti faktora uz pomoć usporednih operatora.</p>
<hr />
<p><strong>Zadatak 4.11 - ordinalni faktor</strong></p>
<div class="sourceCode" id="cb165"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb165-1" data-line-number="1"><span class="co"># napravite varijablu `tlak.f3` na isti način kao i `tlak.f2`</span></a>
<a class="sourceLine" id="cb165-2" data-line-number="2"><span class="co"># ali uz dodatni parametar `ordered = TRUE`</span></a>
<a class="sourceLine" id="cb165-3" data-line-number="3"><span class="co"># pripazite da poredak kategorija odgovara ordinalnom rasporedu</span></a>
<a class="sourceLine" id="cb165-4" data-line-number="4"></a>
<a class="sourceLine" id="cb165-5" data-line-number="5"></a>
<a class="sourceLine" id="cb165-6" data-line-number="6"><span class="co"># ispišite `tlak.f3`</span></a>
<a class="sourceLine" id="cb165-7" data-line-number="7"></a>
<a class="sourceLine" id="cb165-8" data-line-number="8"></a>
<a class="sourceLine" id="cb165-9" data-line-number="9"><span class="co"># provjerite radi li se uistinu o ordinalnom faktoru </span></a>
<a class="sourceLine" id="cb165-10" data-line-number="10"><span class="co"># uz pomoć funkcije `is.ordered`</span></a>
<a class="sourceLine" id="cb165-11" data-line-number="11"></a>
<a class="sourceLine" id="cb165-12" data-line-number="12"></a>
<a class="sourceLine" id="cb165-13" data-line-number="13"><span class="co"># provjerite da li je tlak prvog pacijenta</span></a>
<a class="sourceLine" id="cb165-14" data-line-number="14"><span class="co"># (okvirno) niži od tlaka trećeg pacijenta</span></a></code></pre></div>
<div class="fold s o">
<div class="sourceCode" id="cb166"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb166-1" data-line-number="1"><span class="co"># napravite varijablu `tlak.f3` na isti način kao i `tlak.f2`</span></a>
<a class="sourceLine" id="cb166-2" data-line-number="2"><span class="co"># ali uz dodatni parametar `ordered = TRUE`</span></a>
<a class="sourceLine" id="cb166-3" data-line-number="3"><span class="co"># pripazite da poredak kategorija odgovara ordinalnom rasporedu</span></a>
<a class="sourceLine" id="cb166-4" data-line-number="4">tlak.f3 &lt;-<span class="st"> </span><span class="kw">factor</span>(tlak, <span class="dt">levels =</span> <span class="kw">c</span>(<span class="st">&quot;prenizak&quot;</span>, <span class="st">&quot;nizak&quot;</span>, <span class="st">&quot;normalan&quot;</span>, <span class="st">&quot;visok&quot;</span>, <span class="st">&quot;previsok&quot;</span>), <span class="dt">ordered =</span> <span class="ot">TRUE</span>)</a>
<a class="sourceLine" id="cb166-5" data-line-number="5"></a>
<a class="sourceLine" id="cb166-6" data-line-number="6"><span class="co"># ispišite `tlak.f3`</span></a>
<a class="sourceLine" id="cb166-7" data-line-number="7">tlak.f3</a>
<a class="sourceLine" id="cb166-8" data-line-number="8"></a>
<a class="sourceLine" id="cb166-9" data-line-number="9"><span class="co"># provjerite radi li se uistinu o ordinalnom faktoru </span></a>
<a class="sourceLine" id="cb166-10" data-line-number="10"><span class="co"># uz pomoć funkcije `is.ordered`</span></a>
<a class="sourceLine" id="cb166-11" data-line-number="11"><span class="kw">is.ordered</span>(tlak.f3)</a>
<a class="sourceLine" id="cb166-12" data-line-number="12"></a>
<a class="sourceLine" id="cb166-13" data-line-number="13"></a>
<a class="sourceLine" id="cb166-14" data-line-number="14"><span class="co"># provjerite da li je tlak prvog pacijenta</span></a>
<a class="sourceLine" id="cb166-15" data-line-number="15"><span class="co"># (okvirno) niži od tlaka trećeg pacijenta</span></a>
<a class="sourceLine" id="cb166-16" data-line-number="16">tlak.f3[<span class="dv">1</span>] <span class="op">&lt;</span><span class="st"> </span>tlak.f3[<span class="dv">3</span>]</a></code></pre></div>
<pre><code>##  [1] nizak    visok    visok    normalan normalan nizak    visok   
##  [8] nizak    normalan normalan
## Levels: prenizak &lt; nizak &lt; normalan &lt; visok &lt; previsok
## [1] TRUE
## [1] TRUE</code></pre>
</div>
<hr />
<p>Već smo uvidjeli da je u R-u zapravo “sve vektor” - brojevi su jednodimenzionalni numerički vektori, matrice su vektori sa dodanim parametrom dimenzionalnosti, liste su vektori malih listi, podatkovni okviri su liste za dodanom restrikcijom. Možemo se zapitati - što su zapravo faktori?</p>
<p>Implementacijski, faktor je zapravo kodirani ili enumerirani skup vrijednosti inicijalno definiranih znakovnih nizova, uz pridruženu kodnu tablicu istih. Jednostavnije rečeno, faktorizacija znakovnog vektora uključuje:</p>
<ul>
<li>“popisivanje” svih uočenih kategorija (ili preuzimanje eksplicitnog popisa iz parametra <code>levels</code>)</li>
<li>pridjeljivanje numeričkih vrijednosti redom svakoj kategoriji (npr: <code>&quot;nizak&quot;</code> -&gt; <code>1</code>, <code>&quot;normalan&quot;</code> -&gt; <code>2</code> itd.)</li>
<li>“pakiranje” novostvorenog numeričkog vektora i pripadajuće “kodne tablice”</li>
</ul>
<p>Iako ove korake R radi automatski, u internu strukturu faktora možemo se uvjeriti ako faktor probamo pretvoriti u čisti numerički, odnosno čisti znakovni tip.</p>
<hr />
<p><strong>Zadatak 4.12 - interna struktura faktora</strong></p>
<div class="sourceCode" id="cb168"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb168-1" data-line-number="1"><span class="co"># ispišite vrijednost varijable tlak.f3 pretvorene u znakovni tip</span></a>
<a class="sourceLine" id="cb168-2" data-line-number="2"></a>
<a class="sourceLine" id="cb168-3" data-line-number="3"><span class="co"># ispišite vrijednost varijable tlak.f3 pretvorene u numerički tip</span></a></code></pre></div>
<div class="fold s o">
<div class="sourceCode" id="cb169"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb169-1" data-line-number="1"><span class="co"># ispišite vrijednost varijable tlak.f3 pretvorene u znakovni tip</span></a>
<a class="sourceLine" id="cb169-2" data-line-number="2"><span class="kw">as.character</span>(tlak.f3)</a>
<a class="sourceLine" id="cb169-3" data-line-number="3"></a>
<a class="sourceLine" id="cb169-4" data-line-number="4"><span class="co"># ispišite vrijednost varijable tlak.f3 pretvorene u numerički tip</span></a>
<a class="sourceLine" id="cb169-5" data-line-number="5"><span class="kw">as.numeric</span>(tlak.f3)</a></code></pre></div>
<pre><code>##  [1] &quot;nizak&quot;    &quot;visok&quot;    &quot;visok&quot;    &quot;normalan&quot; &quot;normalan&quot; &quot;nizak&quot;   
##  [7] &quot;visok&quot;    &quot;nizak&quot;    &quot;normalan&quot; &quot;normalan&quot;
##  [1] 2 4 4 3 3 2 4 2 3 3</code></pre>
</div>
<hr />
<p>Pretvaranjem faktora u znakovni tip zapravo radimo operaciju inverznu faktoriziranju, tj. dobijamo originalni znakovni vektor. S druge strane pretvaranjem faktora u numerički tip zapravo dobivamo “prekodirane” brojke koje faktor interno koristi za reprezentaciju kategorija. Možemo se zapitati - zašto bi nam ovo bilo korisno? Odgovor je - ne, od ovog u praksi nema neke direktne koristi. Zapravo je ovo nešto što nam može stvoriti vrlo velike probleme ako to unaprijed ne očekujemo.</p>
<p>Ovdje se krije već prije navedena “kontroverza” oko faktora kao tipa podataka. Ona zapravo uopće nije povezana sa samim faktorima, već sa nekim nazivnim postavkama R-a i njegovim funkcijama učitavanja podataka iz vanjske datoteke. Navedimo sada detaljne korake koji se odvijaju tijekom stvaranja podatkovnog okvira iz datoteke i pokušajmo zaključiti gdje nastaje potencijalni problem:</p>
<ol style="list-style-type: decimal">
<li>R otvara CSV datoteku</li>
<li>na osnovu pročitanih podataka R <strong>pokušava zaključiti kojeg je tipa koji stupac</strong></li>
<li><strong>svi znakovni stupci se automatski faktoriziraju</strong> osim ako nije naveden parametar <code>stringsAsFactors - FALSE</code></li>
<li>Formira se konačni podatkovni okvir</li>
</ol>
<p>Vidimo li mogući problem? Pretpostavimo sljedeći scenarij: u jednom numeričkom stupcu potkrala se nenumerička vrijednost (npr. niz znakova <code>NULL</code> zbog nedostajućih vrijednosti iz baze). Ovo može biti samo jedna vrijednost od više milijuna redaka, no to je dovoljno da R klasificira stupac kao “znakovni”. Budući da R automatski faktorizira znakovne stupce, u konačnom podatkovnom okviru taj numerički stupac postaje kategorijski (iako su nazivi kategorija zapravo brojevi). Nepažljivi analitičar (ili automatska skripta) ne uočava da se radi o faktoru već provodi konverziju navedenog stupca u numerički tip - i dobija potpuno semantički besmisleni niz “prekodiranih” cijelih brojeva koji, ako nisu pravovremeno uočeni, mogu biti korišteni kao ulazni podaci za daljnje analize.</p>
<hr />
<hr />
<p><strong>Zadatak 4.13 - važnost parametra <code>stringsAsFactors = F</code></strong></p>
<div class="sourceCode" id="cb171"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb171-1" data-line-number="1"><span class="co"># uz pomoć funkcije `read.csv` učitajte podatke iz datoteke `mjestoNULL.csv`</span></a>
<a class="sourceLine" id="cb171-2" data-line-number="2"><span class="co"># u varijablu  `mjesto4`</span></a>
<a class="sourceLine" id="cb171-3" data-line-number="3"><span class="co"># nemojte koristiti parametar `stringsAsFactors` niti `na.strings`</span></a>
<a class="sourceLine" id="cb171-4" data-line-number="4"></a>
<a class="sourceLine" id="cb171-5" data-line-number="5"><span class="co"># ispišite sadržaj okvira `mjesto4` na zaslon</span></a>
<a class="sourceLine" id="cb171-6" data-line-number="6"></a>
<a class="sourceLine" id="cb171-7" data-line-number="7"><span class="co"># ispisite stupac `prosjPlaca`</span></a>
<a class="sourceLine" id="cb171-8" data-line-number="8"></a>
<a class="sourceLine" id="cb171-9" data-line-number="9"><span class="co"># primjenite funkciju `as.numeric` na stupac `prosjPlaca` i komentirajte rezultat</span></a>
<a class="sourceLine" id="cb171-10" data-line-number="10"></a>
<a class="sourceLine" id="cb171-11" data-line-number="11"><span class="co"># primjenite kombinaciju funkcija `as.character` i `as.numeric` na stupac `prosjPlaca` </span></a>
<a class="sourceLine" id="cb171-12" data-line-number="12"><span class="co"># i komentirajte rezultat</span></a></code></pre></div>
<div class="fold s o">
<div class="sourceCode" id="cb172"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb172-1" data-line-number="1"><span class="co"># učitajte podatke iz datoteka `mjesto.csv` i `mjestoAlt.csv`</span></a>
<a class="sourceLine" id="cb172-2" data-line-number="2"><span class="co"># podatke spremite u okvire `mjesto2` i `mjesto3`</span></a>
<a class="sourceLine" id="cb172-3" data-line-number="3">mjesto4 &lt;-<span class="st"> </span><span class="kw">read.csv</span>(<span class="st">&quot;mjestoNULL.csv&quot;</span>)</a>
<a class="sourceLine" id="cb172-4" data-line-number="4"></a>
<a class="sourceLine" id="cb172-5" data-line-number="5"><span class="co"># ispišite sadržaj okvira `mjesto4` na zaslon</span></a>
<a class="sourceLine" id="cb172-6" data-line-number="6">mjesto4</a></code></pre></div>
<pre><code>##     pbr nazivMjesta prosjPlacaKn brojStanovnika prirez
## 1 10000      Zagreb      6359.00         790017     18
## 2 51000      Rijeka         NULL         128384     15
## 3 21000       Split      5170.00         167121     10
## 4 31000      Osijek      4892.00          84104     13
## 5 20000   Dubrovnik      5348.00          28434     10</code></pre>
</div>
<div class="fold s o">
<div class="sourceCode" id="cb174"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb174-1" data-line-number="1"><span class="co"># ispisite stupac `prosjPlacaKn`</span></a>
<a class="sourceLine" id="cb174-2" data-line-number="2">mjesto4<span class="op">$</span>prosjPlacaKn</a>
<a class="sourceLine" id="cb174-3" data-line-number="3"><span class="kw">cat</span>(<span class="st">&quot;----------------------</span><span class="ch">\n</span><span class="st">&quot;</span>)</a>
<a class="sourceLine" id="cb174-4" data-line-number="4"></a>
<a class="sourceLine" id="cb174-5" data-line-number="5"><span class="co"># primjenite funkciju `as.numeric` na stupac `prosjPlacaKn` i komentirajte rezultat</span></a>
<a class="sourceLine" id="cb174-6" data-line-number="6"><span class="kw">as.numeric</span>(mjesto4<span class="op">$</span>prosjPlacaKn)</a>
<a class="sourceLine" id="cb174-7" data-line-number="7"><span class="kw">cat</span>(<span class="st">&quot;----------------------</span><span class="ch">\n</span><span class="st">&quot;</span>)</a>
<a class="sourceLine" id="cb174-8" data-line-number="8"></a>
<a class="sourceLine" id="cb174-9" data-line-number="9"><span class="co"># primjenite kombinaciju funkcija `as.character` i `as.numeric` na stupac `prosjPlacaKn` </span></a>
<a class="sourceLine" id="cb174-10" data-line-number="10"><span class="co"># i komentirajte rezultat</span></a>
<a class="sourceLine" id="cb174-11" data-line-number="11"><span class="co"># pazite na redoslijed poziva funkcija!</span></a>
<a class="sourceLine" id="cb174-12" data-line-number="12"><span class="kw">as.numeric</span>(<span class="kw">as.character</span>(mjesto4<span class="op">$</span>prosjPlacaKn))</a></code></pre></div>
<pre><code>## [1] 6359.00 NULL    5170.00 4892.00 5348.00
## Levels: 4892.00 5170.00 5348.00 6359.00 NULL
## ----------------------
## [1] 4 5 2 1 3
## ----------------------
## [1] 6359   NA 5170 4892 5348</code></pre>
</div>
<hr />
<p>Ponovimo - kako izbjeći ovaj scenarij? Procedura je vrlo jednostavna:</p>
<ul>
<li>kod korištenja funkcija <code>read.csv</code> ili <code>read.table</code> <strong>uvijek koristiti parametar <code>stringsAsFactors = FALSE</code></strong></li>
<li>pažljivo pregledati <strong>tipove podataka stupaca</strong> učitanog okvira</li>
<li><strong>provesti odgovarajuće konverzije</strong> stupaca</li>
<li><strong>provjeriti dobivene rezultate</strong></li>
</ul>
<p>Ako se pridržavamo ovih koraka gotovo nikada nećemo doći u situaciju da nam faktori prave probleme. Postoje i alternativne procedure (npr. eksplicitno navođenje tipova stupaca kod čitanja iz datoteke uz pomoć parametara <code>colClasses</code>, ili korištenje sintagme <code>as.numeric(as.character())</code> za pretvaranje stupaca u numerički tip koja će provesti ispravnu konverziju neovisno o tome radi li se o znakovnom stupcu ili “prikrivenom” faktoru), no gore navedeni koraci bi u većini slučajeva trebali biti potpuno dovoljni. Najvažnija stvar za zapamtiti jest ključna uloga parametra <code>stringsAsFactors = FALSE</code> (koja se u literaturi zna navoditi kao obavezni parametar, bez dodatnih objašnjenja).</p>
<hr />
</div>
<div id="zadaci-za-vjezbu-2" class="section level2 unnumbered">
<h2>Zadaci za vježbu</h2>
<ol style="list-style-type: decimal">
<li>U mapi zajedno sa ovom bilježnicom pronađite datoteku <code>mjestoNOHEADER.csv</code> koja predstavlja datoteku istovjetnu datoteci <code>mjesto.csv</code> osim sljedećih značajki:</li>
</ol>
<ul>
<li>nedostaju imena stupaca</li>
<li>korišten je razmak kao razdvojnik</li>
</ul>
<p>Pokušajte uz pomoć dokumentacije učitati podatke iz ove datoteke u varijablu <code>mjestoNH</code> koja će biti istovjetna varijabli <code>mjesto</code> korištenoj u lekciji.</p>
<ol start="2" style="list-style-type: decimal">
<li>U mapi zajedno sa ovom bilježnicom pronađite datoteku <code>racun.csv</code> i učitajte ju u varijablu <code>racun</code>. Pripazite da nizovi znakova nisu automatski pretvoreni u faktore. Ispišite na zaslon:</li>
</ol>
<ul>
<li>broj redaka ove tablice</li>
<li>broj stupaca tablice</li>
<li>imena stupaca tablice</li>
</ul>
<ol start="3" style="list-style-type: decimal">
<li>Za tablicu <code>racun</code> napravite sljedeće:</li>
</ol>
<ul>
<li>faktorizirajte stupac <code>katArtikl</code></li>
<li>ispišite šifru, naziv i cijenu svih artikala kategorije “slatkisi i grickalice” jeftinijih od 12 Kn</li>
<li>ispišite koliko proizvoda koje kategorije se nalazi u računu</li>
<li>dodajte stupac ukupno koji će sadržavati ukupnu cijenu pojedine stavke uračunavajući i cijenu i količinu</li>
<li>izračunajte ukupni iznos računa</li>
</ul>
<hr />
<p><a rel="license" href="http://creativecommons.org/licenses/by-nc-nd/4.0/"><img alt="Creative Commons License" style="border-width:0" src="https://i.creativecommons.org/l/by-nc-nd/4.0/88x31.png" /></a><br /><span xmlns:dct="http://purl.org/dc/terms/" property="dct:title">Programirajmo u R-u</span> by <a xmlns:cc="http://creativecommons.org/ns#" href="https://www.fer.unizg.hr/en/damir.pintar" property="cc:attributionName" rel="cc:attributionURL">Damir Pintar</a> is licensed under a <a rel="license" href="http://creativecommons.org/licenses/by-nc-nd/4.0/">Creative Commons Attribution-NonCommercial-NoDerivatives 4.0 International License</a>.<br />Based on a work at <a xmlns:dct="http://purl.org/dc/terms/" href="https://ratnip.github.io/FER_OPJR/" rel="dct:source">https://ratnip.github.io/FER_OPJR/</a></p>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="vektori.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="kontrola.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"google": false,
"linkedin": false,
"weibo": false,
"instapper": false,
"vk": false,
"all": ["facebook", "google", "twitter", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"download": null,
"toc": {
"collapse": "section",
"scroll_highlight": true
},
"toolbar": {
"position": "fixed",
"edit": null,
"download": null,
"search": true
}
});
});
</script>

</body>

</html>
